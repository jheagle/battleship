"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(){var e=this,t=e.jDomCore,n={noConflict:function(){return e.jDomCore=t,n}},r=function(e){return function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.length>=e.length?e.apply(void 0,r):function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(void 0,[].concat(r,n))}}};n.curry=r;n.pipe=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}};var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,n):Object.keys(e).reduce(function(n,r){return n[r]=t.apply(void 0,_toConsumableArray([e[r],r,e].slice(0,t.length||2))),n},n||{})};n.mapObject=i;n.filterObject=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,n):Object.keys(e).reduce(function(n,r){return t.apply(void 0,_toConsumableArray([e[r],r,e].slice(0,t.length||2)))?n[r]=e[r]:delete n[r],n},n||{})};n.reduceObject=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,n):Object.keys(e).reduce(function(n,r){return t.apply(void 0,_toConsumableArray([n,e[r],r,e].slice(0,t.length||2)))},n)};var o=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};n.notEmptyObjectOrArray=o;var a=function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return function(r,o){return t.apply(void 0,_toConsumableArray([r,o].slice(0,t.length)))?r:n.apply(void 0,_toConsumableArray([e[o],r].slice(0,n.length||2)).concat(i))}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){return!e[r]||/^(parentItem|listenerArgs|element)$/.test(r)||!!t&&t(n,r)}},c=function e(t,n){var c,s,l,d,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o(n)?(l=m,d=e,i(s=n,a(c=t,u(c,r(g)(l.concat([s]))),d,l.concat([s])))):t},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("object"===(void 0===t?"undefined":_typeof(t))){if(g(n,t))return;n.push(t)}return t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c(JSON.parse(JSON.stringify(e,function(e,n){return s(e,n,t)})),e,[])};n.cloneObject=l;var d=function(e,t,n){return o(n)?i(n,a(t,u(t),e),/mutable/i.test(e.name)?t:l(t)):n};n.mergeObjects=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 2===n.length?d(e,n[0],n[1]):1===n.length?l(n[0]):n.reduce(r(d)(e),{})};n.mergeObjectsMutable=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 2===n.length?d(e,n[0],n[1]):1===n.length?n[0]:n.reduce(r(d)(e),{})};var m=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--r>0?e(t,t?n:l(n),r,i.concat([n])):i.concat([n])},f=r(m)(!1);n.buildArray=f;var p=r(m)(!0);n.buildArrayOfReferences=p;var g=function(e,t){return e.indexOf(t)>=0};n.inArray=g;var h=function(e,t,n){return e&&n>t||!e&&n<t?n:t};n.getMaxOrMin=h;var v=r(h)(!0);n.getMax=v;var b=r(h)(!1);n.getMin=b;n.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*n};n.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*n};var y=function(e,t){return e===t?0:e>t?1:-1};n.compare=y;n.compareArrays=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter(function(t,n){return!g(e,t)||e[n]!==t}).concat(e).reduce(function(r,i){return r[JSON.stringify(i,function(e,t){return s(e,t,n)})]=y(t.filter(function(e){return e===i}).length,e.filter(function(e){return e===i}).length),r},{})};n.trace=function(e){return function(t){return console.info(e+": ",t),t}};n.queueTimeout=function e(){for(var t=arguments.length,n=Array(t>2?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.queue=e.queue||[],e.isRunning=e.isRunning||!1;var a={id:0,func:i,timeout:o,args:n,result:0};if(i&&e.queue.push(a),e.queue.length&&!e.isRunning){e.isRunning=!0;var u=e.queue.shift();return u.id=setTimeout(function(){return u.result=u.func.apply(u,_toConsumableArray(u.args)),e.isRunning=!1,e(!1)},u.timeout),u}return a};var j=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=j[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomCore=n,e=Object.assign(e,n))}).call(void 0),function(){var e=this,t=e.jDomObjects,n={noConflict:function(){return e.jDomObjects=t,n}},r=e.jDomCore;void 0===r&&("undefined"!=typeof require?r=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=e.document;if(void 0===i)if("undefined"!=typeof require){var o=require("./pseudo-dom.js");e=o.generate(),i=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var a=function(){for(var e,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(n))};n.DOMItem=a;var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return a({tagName:"html",attributes:{},element:i,eventListeners:t.reduce(function(e,t){return r.mergeObjectsMutable(e,_defineProperty({},""+t.name,t))},{}),children:e,head:e[0],body:e[1]})}([a({tagName:"head",attributes:{},element:i.head,children:[]}),a({tagName:"body",attributes:{},element:i.body,children:[]})],e);return t.children=t.children.map(function(e){return a(e,{parentItem:t})}),t.head=t.children[0],t.body=t.children[1],a(t)};n.documentDOMItem=u,n.documentItem=u();var c=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=c[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomObjects=n,e=Object.assign(e,n))}.call(void 0),function(){var e=this,t=e.jDomCoreDom,n={noConflict:function(){return e.jDomCoreDom=t,n}},r=e.jDomCore;void 0===r&&("undefined"!=typeof require?r=require("./core.js"):console.error("core-dom.js requires jDomCore"));var i=e.jDomObjects;void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));var o=function(e,t,n){return!!e.style&&(t in e?/^(style|className)$/.test(t)?r.compareArrays("string"==typeof n?e[t].split(" "):Object.keys(e[t]),"string"==typeof n?n.split(" "):Object.keys(n)):e[t]===n:e.hasAttribute(t)&&e.getAttribute(t)===n)};n.elementHasAttribute=o;var a=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?c(e):(e.attributes=r.filterObject(e.attributes,function(t,n){return r.filterObject(r.mapObject(e.attributes,function(t,n){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===n?r.filterObject(o(e.element,n,t),function(e){return 1===e}):!o(e.element,n,t)}),function(e){return!!e})[n]}),e)};n.elementChanges=a;var u=function(e){return e.element.style&&(e.attributes=r.mapObject(a(e).attributes,function(t,n){return n in e.element?r.notEmptyObjectOrArray(t)?r.mapObject(r.filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,n){return e.element.style[n]=t,t},e.element.style):(e.element[n]=t,t):(e.element.setAttribute(n,t),t)})),e};n.updateElement=u;n.updateElements=function e(t){return(t=u(t)).children.map(function(t){return e(t)}),t};var c=function(e){return e.element=document.createElement(e.tagName),u(e)};n.generateElement=c;n.bindAllElements=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return r.mapObject(i.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:s(t).element,t.parentItem=n.body||n,t.children.map(function(n){return e(n,t)}),t};var s=function(e){return e.element&&e.element.style||(e.element=c(e).element),e};n.bindElement=s;var l=function e(t){return t.children.map(function(n){return t.element.appendChild(e(n).element)}),t};n.buildHTML=l;n.appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body,n=t.body?t.body:t;return r.inArray(n.children,e)||n.children.push(e),l(n)};var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body,n=t.body?t.body:t;return r.inArray(n.children,e)||n.children.push(e),e.element&&e.element.style||(e=s(e)),n.element.appendChild(e.element),e};n.appendHTML=d;n.removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return Object.assign(t.eventListeners,_defineProperty({},e.name,e))};n.registerListener=m;n.registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return r.mergeObjects(t,{eventListeners:e.reduce(function(e,n){return r.mergeObjects(e,_defineProperty({},""+n.name,m(n,t)))},t.eventListeners)})};var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return r.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};n.retrieveListener=f;var p=function(e,t,n,r){return t.addEventListener?t.addEventListener(e,n,function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t}(r)):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n,n};n.assignListener=p;n.appendListeners=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.children=t.children||[],t.eventListeners&&t.eventListeners[n]&&(t.eventListeners[n]={listenerFunc:r,listenerArgs:i,listenerOptions:o}),t.children.map(function(t){return e(t,n,r,i,o)}),t};n.bindAllListeners=function e(t){return t.eventListeners&&Object.keys(t.eventListeners).length&&t.element.style&&r.mapObject(t.eventListeners,function(e,n){return p(n,t.element,function(n){return e.listenerFunc(n,t,e.listenerArgs)},e.listenerOptions)}),t.children=t.children.map(function(t){return e(t)}),t};var g=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&r.mapObject(e.eventListeners,function(t,n){return p(n,e.element,function(n){return t.listenerFunc(n,e,t.listenerArgs)},t.listenerOptions)}),e};n.bindListeners=g;var h=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.documentItem.body;return r.attributes[t]&&r.attributes[t]===n?r.children.reduce(function(r,i){return r.concat(e(t,n,i))},[]).concat([r]):r.children.reduce(function(r,i){return r.concat(e(t,n,i))},[])};n.getChildrenFromAttribute=h;var v=r.curry(h)("className");n.getChildrenByClass=v;var b=r.curry(h)("name");n.getChildrenByName=b;var y=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.documentItem.body;return Object.keys(r.parentItem).length?r.attributes[t]&&r.attributes[t]===n?e(t,n,r.parentItem).concat([r]):e(t,n,r.parentItem):[]},j=r.curry(y)("className");n.getParentsByClass=j;var O=r.curry(y)("name");n.getParentsByName=O;var x=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};n.getTopParentItem=x;n.renderHTML=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return r.mapObject(i.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:s(t).element,t.eventListeners=r.mapObject(t.eventListeners,function(e){return r.mergeObjects(e,{listenerFunc:f(e.listenerFunc,x(n))})}),t.parentItem=n.body||n,(t=g(d(t,n))).children.map(function(n){return e(n,t)}),t};var k=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=k[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomCoreDom=n,e=Object.assign(e,n))}.call(void 0),function(){var e=this,t=e.jDomObjectsMatrix,n={noConflict:function(){return e.jDomObjectsMatrix=t,n}},r=e.jDomCore;void 0===r&&("undefined"!=typeof require?r=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=e.jDomObjects;void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));n.point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}};n.tile=function(){return{point:{}}};var o=function(e,t,n){for(var o=arguments.length,a=Array(o>4?o-4:0),u=4;u<o;u++)a[u-4]=arguments[u];var c,s,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return i.DOMItem({tagName:"div",attributes:{className:"matrix"},children:r.buildArray((c=i).DOMItem.apply(c,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:r.buildArray((s=i).DOMItem.apply(s,[{axis:"y",tagName:"div",attributes:{className:"row"},children:r.buildArray((l=i).DOMItem.apply(l,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(a,[e])),t)}].concat(a)),n)}].concat(a)),d)})};n.matrix=o;n.square=function(e,t){return o(e,t,t)};n.cube=function(e,t){return o(e,t,t,t)};var a=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=a[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomObjectsMatrix=n,e=Object.assign(e,n))}.call(void 0),function(){var e=this,t=e.jDomCoreMatrix,n={noConflict:function(){return e.jDomCoreMatrix=t,n}},r=e.jDomCore;void 0===r&&("undefined"!=typeof require?r=require("./core.js"):console.error("core-matrix.js requires jDomCore"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("core-matrix.js requires jDomObjectsMatrix"));n.bindPointData=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.point(0,0,0);return r.mergeObjects(t,t.point?{point:r.cloneObject(n)}:{children:t.children.map(function(t,i){return e(t,r.mergeObjects(n,_defineProperty({},t.axis,i)))})})};var o=function(e,t){return i.point(e.x+t.x,e.y+t.y,e.z+t.z)};n.nextCell=o;var a=function(e,t){return i.point(t.x-e.x,t.y-e.y,t.z-e.z)};n.pointDifference=a;var u=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z};n.checkEqualPoints=u;var c=function(e){return!!Object.keys(r.filterObject(e,function(e){return e<0})).length};n.pointHasNegative=c;var s=function(e){return r.reduceObject(e,r.curry(r.getMaxOrMin)(!c(e)),0)};n.getHighAbsoluteCoord=s;var l=function(e,t){return Object.keys(e).filter(function(n){return e[n]===t})};n.getAxisOfCoord=l;var d=function(e){return l(e,s(e))};n.getHighAbsoluteCoordAxis=d;var m=function(e,t){return r.mergeObjects(i.point(0,0,0),_defineProperty({},""+d(a(e,t))[0],c(a(e,t))?-1:1))};n.pointDirection=m;n.randomStart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.point(10,10,10);return i.point(r.randomInteger(n.x-(e-1)*t.x),r.randomInteger(n.y-(e-1)*t.y),r.randomInteger(n.z-(e-1)*t.z))};n.lineEndPoint=function(e,t,n){return i.point(e.x+n.x*(t-1),e.y+n.y*(t-1),e.z+n.z*(t-1))};var f=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return u(t,n)?r.concat([t]):e(o(t,m(t,n)),n,r.concat([t]))};n.getPointsLine=f;var p=function(e){return e.reduce(function(e,t){return e.concat(f.apply(void 0,_toConsumableArray(t)))},[])};n.getPointsLines=p;var g=function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return f(e,t).filter(function(e,t,n){return 0!==t&&t!==n.length-1||o}).reduce(function(e,t){return r.mergeObjects(e,_defineProperty({},""+!!i(t,n),[t]))},{true:[],false:[]})};n.testPointsBetween=g;n.getInBetween=function(e,t,n,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return r.mergeObjects({true:[],false:[]},g(e,t,n,i,o))};n.checkInBetween=function(e,t,n,r){return!(arguments.length>4&&void 0!==arguments[4]&&!arguments[4]||!r(e,n)&&!r(t,n))||!!g(e,t,n,r).true.length};n.getAxisLengths=function(e){return i.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)};n.randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[r.randomInteger(e.length)]:i.point(0,0,0)};var h=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)};n.checkValidPoint=h;n.getDOMItemFromPoint=function(e,t){return!!h(e,t)&&t.children[e.z].children[e.y].children[e.x]};n.getAllPoints=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?n.concat([t.point]):t.children.reduce(function(t,n){return t.concat(e(n,[]))},[])};n.adjacentPoints=function(e,t){return p([[i.point(-1,1,1),i.point(1,-1,-1)],[i.point(1,1,1),i.point(-1,1,-1)],[i.point(-1,-1,1),i.point(1,-1,1)],[i.point(1,0,0),i.point(1,1,-1)],[i.point(-1,1,0),i.point(1,1,0)]]).concat([i.point(0,0,1),i.point(1,0,0),i.point(-1,0,-1),i.point(0,0,-1)]).map(function(t){return o(e,t)}).filter(function(n){return h(o(e,n),t)})};n.adjacentEdgePoints=function(e,t){return[i.point(-1,0,0),i.point(1,0,0),i.point(0,-1,0),i.point(0,1,0),i.point(0,0,-1),i.point(0,0,1)].map(function(t){return o(e,t)}).filter(function(e){return h(e,t)})};var v=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=v[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomCoreMatrix=n,e=Object.assign(e,n))}.call(void 0),function(){var e=this,t=e.jDomLayout,n={noConflict:function(){return e.jDomLayout=t,n}};n.mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}};n.boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}};n.finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}};var r=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});Object.keys(n).map(function(t){return n[t].noConflict=function(){return e[t]=r[t],n[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n)):(n.jDomLayout=n,e=Object.assign(e,n))}.call(void 0);var checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip},checkIfHitCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit},getAllNonHitCells=function(e){return getAllPoints(e).filter(function(t){return!checkIfHitCell(t,e)})},getAdjNonHitCells=function(e,t){return adjacentPoints(e,t).filter(function(e){return!checkIfHitCell(e,t)})},getAdjEdgeNonHitCells=function(e,t){return adjacentEdgePoints(e,t).filter(function(e){return!checkIfHitCell(e,t)})},getALowStatusItem=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})},getLowStatusItems=function(e){return e.filter(function(t){return t.status<=getALowStatusItem(e).status})},getBrokenItems=function(e){return e.filter(function(e){return e.status<100&&e.status>0})},getBrokenShipsPlayers=function(e){return e.filter(function(e){return getBrokenItems(e.shipFleet).length})},numDamangedParts=function(e,t){return e-Math.ceil(t/100*e)},filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)},buildShip=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mergeObjects(ship(e.name),{parts:t.map(function(e){return setShip(n,e,r)})})},selectShipDirection=function(e,t){return randDirection([point(1,0,0),point(0,1,0),point(0,0,1)].filter(function(n){return e[getAxisOfCoord(n,1)]>t}))},randomStartDir=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:selectShipDirection(e,t);return{start:randomStart(t,n,e),dir:n}},generateStartEnd=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:randomStartDir(r,n);return 0===getHighAbsoluteCoord(i.dir)?[point(0,0,0),point(0,0,0)]:checkInBetween.apply(void 0,[i.start,lineEndPoint(i.start,n,i.dir)].concat([t,checkIfShipCell]))?e(t,n,r):[i.start,lineEndPoint(i.start,n,i.dir)]},generateRandomFleet=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){return buildShip(e,getPointsLine.apply(void 0,_toConsumableArray(generateStartEnd(t,e.size,getAxisLengths(t)))),t,n)})},buildPlayers=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&n<1)return r;var i=playerSet({},"Player "+(r.length+1));return i.isRobot=t<=0,i.board=bindPointData(square(waterTile(i,r),10)),i.shipFleet=defaultFleet(i.board,!1),i.playerStats=playerStats(i,Math.round(100*i.status)/100+"%"),i.children=[i.board,i.playerStats],r.push(i),e(--t,t<0?--n:n,r)},beginRound=function(e,t){e.preventDefault();var n=getTopParentItem(t),r=parseInt(getChildrenByName("human-players",t)[0].element.value),i=parseInt(getChildrenByName("robot-players",t)[0].element.value);if(r<0||r>100||i<0||i>100)return!1;var o=getChildrenByName("first-go-first",t)[0].element.checked;0===(r=r<0?0:r)&&(i=i<2?2:i),1===r&&(i=i<1?1:i),removeChild(getChildrenByClass("main-menu",n.body)[0],n.body);var a=renderHTML(boards(buildPlayers(r,i)),n).children,u=updatePlayer(o?a[0]:a[randomInteger(a.length)]);return u.isRobot&&computerAttack(u,a),!1},main=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:documentItem,t=e.body.children.length-1;t>=0;--t)removeChild(e.body.children[t],e.body);return renderHTML(mainMenu(),e),e},restart=function(e,t){return main(getTopParentItem(t))},gameTile=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}},waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return mergeObjects(gameTile(e,t),tile())},shipTile=function(){return{hasShip:!0}},ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}},hitTile=function(){return{isHit:!0}},playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}},playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}},defaultFleet=curry(generateRandomFleet)([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]),selectTargetPlayer=function(e){var t=getBrokenShipsPlayers(e).length?getBrokenShipsPlayers(e):getLowStatusItems(e);return 1===t.length?t[0]:t[randomInteger(t.length)]},selectTargetCoord=function(e){var t=getBrokenItems(e.shipFleet),n=[];if(t.length){var r=t.filter(function(e){return numDamangedParts(e.parts.length,e.status)>1}),i=getALowStatusItem(r.length?r:t).parts.filter(function(t){return checkIfHitCell(t.point,e.board)});if(r.length){for(var o=0;o<i.length;++o){var a=getInBetween(i[0].point,i[o].point,e.board,checkIfHitCell,!1);if(a.false.length)return displayTargets(a.false,a.false[0],e),getDOMItemFromPoint(a.false[0],e.board)}var u=(pointDifference(i[0].point,i[1].point).x>0?[point(-1,0,0),point(1,0,0)]:[point(0,-1,0),point(0,1,0)]).map(function(e,t){return nextCell(i[(i.length-1)*t].point,e)}).filter(function(t){return checkValidPoint(t,e.board)}).filter(function(t){return!checkIfHitCell(t,e.board)}),c=u.reduce(function(t,n){return checkIfHitCell(t,e.board)?n:t});if(c)return displayTargets(u,c,e),getDOMItemFromPoint(c,e.board)}n=getAdjEdgeNonHitCells(i[0].point,e.board)}var s=n.length?n:getAllNonHitCells(e.board).filter(function(e){return filterAdjacentPoints(e)}),l=s[randomInteger(s.length)];return displayTargets(s,l,e),getDOMItemFromPoint(l,e.board)},displayTargets=function(e,t,n){return[queueTimeout(resetTargets,0,{targets:e,victim:n}),queueTimeout(resetTargets,200,{targets:e,target:t,victim:n})]},resetTargets=function(e){return e.victim.board.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return updateElement(mergeObjects(getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return updateElement(mergeObjects(getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e},computerAttack=function(e,t){var n=selectTargetPlayer(t.filter(function(e){return!e.attacker}));return attackFleet.isLocked=!1,attackFleet(selectTargetCoord(n))},configureHtml=function(e,t){return t?(attackFleet.isLocked=!0,queueTimeout(function(){return e.isHit&&(e.attributes.style.backgroundColor=e.hasShip?"red":"white"),e=updateElement(e),attackFleet.isLocked=!1,e},0)):(e.isHit&&(e.attributes.style.backgroundColor=e.hasShip?"red":"white"),e=updateElement(e)),e},update3dCell=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return configureHtml(mergeObjectsMutable(t.children[i].children[r].children[n],e),o)},setViewShip=curry(update3dCell)(mergeObjects(shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),setHiddenShip=curry(update3dCell)(shipTile()),setHit=curry(update3dCell)(hitTile()),setShip=function(e,t,n){return n?setViewShip(e,t.x,t.y,t.z):setHiddenShip(e,t.x,t.y,t.z)},updatePlayerStats=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=updateElements(mergeObjects(e.playerStats,playerStats(e,t))),e},updatePlayer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,n&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,attackFleet.isLocked=!0,e.attacker?(queueTimeout(function(){return attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):queueTimeout(function(){return attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),queueTimeout(function(){return updatePlayerStats(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e},endGame=function(e){var t=getTopParentItem(e),n=e.parentItem.children;return n.map(function(e){return updatePlayerStats(e)}),e=updatePlayerStats(e,"WINNER"),renderHTML(finalScore(n),t),[e]},findNextAttacker=function e(t,n,r){var i=n.length>1&&r>=n.length-1?n[0]:n[++r];return i.status>0?i:e(t,n,r)},getNextAttacker=function(e,t,n){return n?e:updatePlayer(findNextAttacker(e,t,t.indexOf(e)),n)},updateScore=function(e,t,n,r,i){var o=(r=r.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(o=updatePlayer(o,t,n),r.length<2)return queueTimeout(function(){return endGame(r[0])},200);var a=getNextAttacker(o,r,t);return a.isRobot&&queueTimeout(computerAttack,0,a,r),r},attackFleet=function e(t){e.isLocked=e.isLocked||!1;var n=getParentsByClass("player",t)[0],r=getParentsByClass("boards",t)[0].children;if(n.status<=0||n.attacker||e.isLocked)return r;var i=setHit(n.board,t.point.x,t.point.y,t.point.z,r.reduce(function(e,t){return e.attacker?e:t}).isRobot),o=!1,a=0;if(i.hasShip){var u=0;n.shipFleet.map(function(e){var n=e.parts.filter(function(n){return checkEqualPoints(n.point,t.point)&&(o=e),!n.isHit});return e.status=n.length/e.parts.length*100,u+=e.status,e}),n.status=u/n.shipFleet.length}return o&&(n=updatePlayerStats(n,Math.round(100*n.status)/100+"%"),a=o.status<=0?o.parts.length:0),updateScore(n,i.hasShip,a,r,t.point)},attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return attackFleet(t)};!function(){var e=main(documentDOMItem([beginRound,attackListener,restart]));console.log(e)}();
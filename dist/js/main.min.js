"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(function(){var e=this,t=e.jDomCore,r={noConflict:function(){return e.jDomCore=t,r}},n=function(e){return function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.length>=e.length?e.apply(void 0,n):function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(void 0,[].concat(n,r))}}};r.curry=n;r.pipe=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}};var i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,r):Object.keys(e).reduce(function(r,n){return r[n]=t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2))),r},r||{})};r.mapObject=i;r.filterObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2)))?r[n]=e[n]:delete r[n],r},r||{})};r.reduceObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([r,e[n],n,e].slice(0,t.length||2)))},r)};var o=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};r.notEmptyObjectOrArray=o;var u=function(e,t,r){for(var n=arguments.length,i=Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];return function(n,o){return t.apply(void 0,_toConsumableArray([n,o].slice(0,t.length)))?n:r.apply(void 0,_toConsumableArray([e[o],n].slice(0,r.length||2)).concat(i))}},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){return!e[n]||/^(parentItem|listenerArgs|element)$/.test(n)||!!t&&t(r,n)}},s=function e(t,r){var s,c,l,d,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o(r)?(l=m,d=e,i(c=r,u(s=t,a(s,n(g)(l.concat([c]))),d,l.concat([c])))):t},c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("object"===(void 0===t?"undefined":_typeof(t))){if(g(r,t))return;r.push(t)}return t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s(JSON.parse(JSON.stringify(e,function(e,r){return c(e,r,t)})),e,[])};r.cloneObject=l;var d=function(e,t,r){return o(r)?i(r,u(t,a(t),e),/mutable/i.test(e.name)?t:l(t)):r};r.mergeObjects=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return 2===r.length?d(e,r[0],r[1]):1===r.length?l(r[0]):r.reduce(n(d)(e),{})};r.mergeObjectsMutable=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return 2===r.length?d(e,r[0],r[1]):1===r.length?r[0]:r.reduce(n(d)(e),{})};var m=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--n>0?e(t,t?r:l(r),n,i.concat([r])):i.concat([r])},f=n(m)(!1);r.buildArray=f;var p=n(m)(!0);r.buildArrayOfReferences=p;var g=function(e,t){return e.indexOf(t)>=0};r.inArray=g;var v=function(e,t,r){return e&&r>t||!e&&r<t?r:t};r.getMaxOrMin=v;var h=n(v)(!0);r.getMax=h;var y=n(v)(!1);r.getMin=y;r.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*r};r.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*r};var b=function(e,t){return e===t?0:e>t?1:-1};r.compare=b;r.compareArrays=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter(function(t,r){return!g(e,t)||e[r]!==t}).concat(e).reduce(function(n,i){return n[JSON.stringify(i,function(e,t){return c(e,t,r)})]=b(t.filter(function(e){return e===i}).length,e.filter(function(e){return e===i}).length),n},{})};r.trace=function(e){return function(t){return console.info(e+": ",t),t}};r.queueTimeout=function e(){for(var t=arguments.length,r=Array(t>2?t-2:0),n=2;n<t;n++)r[n-2]=arguments[n];var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.queue=e.queue||[],e.isRunning=e.isRunning||!1;var u={id:0,func:i,timeout:o,args:r,result:0};if(i&&e.queue.push(u),e.queue.length&&!e.isRunning){e.isRunning=!0;var a=e.queue.shift();return a.id=setTimeout(function(){return a.result=a.func.apply(a,_toConsumableArray(a.args)),e.isRunning=!1,e(!1)},a.timeout),a}return u};var j=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=j[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCore=r,e=Object.assign(e,r))}).call(void 0),function(){var e=this,t=e.jDomObjects,r={noConflict:function(){return e.jDomObjects=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=e.document;if(void 0===i)if("undefined"!=typeof require){var o=require("./pseudo-dom.js");e=o.generate(),i=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var u=function(){for(var e,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(r))};r.DOMItem=u;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u({tagName:"html",attributes:{},element:i,eventListeners:t.reduce(function(e,t){return n.mergeObjectsMutable(e,_defineProperty({},""+t.name,t))},{}),children:e,head:e[0],body:e[1]})}([u({tagName:"head",attributes:{},element:i.head,children:[]}),u({tagName:"body",attributes:{},element:i.body,children:[]})],e);return t.children=t.children.map(function(e){return u(e,{parentItem:t})}),t.head=t.children[0],t.body=t.children[1],u(t)};r.documentDOMItem=a,r.documentItem=a();var s=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=s[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomObjects=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomCoreDom,r={noConflict:function(){return e.jDomCoreDom=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-dom.js requires jDomCore"));var i=e.jDomObjects,o=e.document;if(void 0===o)if("undefined"!=typeof require){var u=require("./pseudo-dom.js");e=u.generate(),o=e.document}else console.error("objects-dom.js requires jDomPseudoDom");void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));var a=function(e,t,r){return!!e.style&&(t in e?/^(style|className)$/.test(t)?n.compareArrays("string"==typeof r?e[t].split(" "):Object.keys(e[t]),"string"==typeof r?r.split(" "):Object.keys(r)):e[t]===r:e.hasAttribute(t)&&e.getAttribute(t)===r)};r.elementHasAttribute=a;var s=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?l(e):(e.attributes=n.filterObject(e.attributes,function(t,r){return n.filterObject(n.mapObject(e.attributes,function(t,r){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===r?n.filterObject(a(e.element,r,t),function(e){return 1===e}):!a(e.element,r,t)}),function(e){return!!e})[r]}),e)};r.elementChanges=s;var c=function(e){return e.element.style&&(e.attributes=n.mapObject(s(e).attributes,function(t,r){return r in e.element?n.notEmptyObjectOrArray(t)?n.mapObject(n.filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,r){return e.element.style[r]=t,t},e.element.style):(e.element[r]=t,t):(e.element.setAttribute(r,t),t)})),e};r.updateElement=c;r.updateElements=function e(t){return(t=c(t)).children.map(function(t){return e(t)}),t};var l=function(e){return e.element=o.createElement(e.tagName),c(e)};r.generateElement=l;r.bindAllElements=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return n.mapObject(i.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.parentItem=r.body||r,t.children.map(function(r){return e(r,t)}),t};var d=function(e){return e.element&&e.element.style||(e.element=l(e).element),e};r.bindElement=d;var m=function e(t){return t.children.map(function(r){return t.element.appendChild(e(r).element)}),t};r.buildHTML=m;r.appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),m(r)};var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),e.element&&e.element.style||(e=d(e)),r.element.appendChild(e.element),e};r.appendHTML=f;r.removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return Object.assign(t.eventListeners,_defineProperty({},e.name,e))};r.registerListener=p;r.registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return n.mergeObjects(t,{eventListeners:e.reduce(function(e,r){return n.mergeObjects(e,_defineProperty({},""+r.name,p(r,t)))},t.eventListeners)})};var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return n.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};r.retrieveListener=g;var v=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t}(n)):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r,r};r.assignListener=v;r.appendListeners=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.children=t.children||[],t.eventListeners&&t.eventListeners[r]&&(t.eventListeners[r]={listenerFunc:n,listenerArgs:i,listenerOptions:o}),t.children.map(function(t){return e(t,r,n,i,o)}),t};r.bindAllListeners=function e(t){return t.eventListeners&&Object.keys(t.eventListeners).length&&t.element.style&&n.mapObject(t.eventListeners,function(e,r){return v(r,t.element,function(r){return e.listenerFunc(r,t,e.listenerArgs)},e.listenerOptions)}),t.children=t.children.map(function(t){return e(t)}),t};var h=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&n.mapObject(e.eventListeners,function(t,r){return v(r,e.element,function(r){return t.listenerFunc(r,e,t.listenerArgs)},t.listenerOptions)}),e};r.bindListeners=h;var y=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.documentItem.body;return n.attributes[t]&&n.attributes[t]===r?n.children.reduce(function(n,i){return n.concat(e(t,r,i))},[]).concat([n]):n.children.reduce(function(n,i){return n.concat(e(t,r,i))},[])};r.getChildrenFromAttribute=y;var b=n.curry(y)("className");r.getChildrenByClass=b;var j=n.curry(y)("name");r.getChildrenByName=j;var O=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.documentItem.body;return Object.keys(n.parentItem).length?(n.attributes[t]||n[t]||!1)===r?e(t,r,n.parentItem).concat([n]):e(t,r,n.parentItem):[]},x=n.curry(O)("className");r.getParentsByClass=x;var C=n.curry(O)("name");r.getParentsByName=C;var q=n.curry(O)("tagName");r.getParentsByTagName=q;var D=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};r.getTopParentItem=D;r.renderHTML=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.documentItem;return n.mapObject(i.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.eventListeners=n.mapObject(t.eventListeners,function(e){return n.mergeObjects(e,{listenerFunc:g(e.listenerFunc,D(r))})}),t.parentItem=r.body||r,(t=h(f(t,r))).children.map(function(r){return e(r,t)}),t};var k=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=k[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCoreDom=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomObjectsMatrix,r={noConflict:function(){return e.jDomObjectsMatrix=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=e.jDomObjects;void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));r.point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}};r.tile=function(){return{point:{}}};var o=function(e,t,r){for(var o=arguments.length,u=Array(o>4?o-4:0),a=4;a<o;a++)u[a-4]=arguments[a];var s,c,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return i.DOMItem({tagName:"div",attributes:{className:"matrix"},children:n.buildArray((s=i).DOMItem.apply(s,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:n.buildArray((c=i).DOMItem.apply(c,[{axis:"y",tagName:"div",attributes:{className:"row"},children:n.buildArray((l=i).DOMItem.apply(l,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(u,[e])),t)}].concat(u)),r)}].concat(u)),d)})};r.matrix=o;r.square=function(e,t){return o(e,t,t)};r.cube=function(e,t){return o(e,t,t,t)};var u=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=u[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomObjectsMatrix=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomCoreMatrix,r={noConflict:function(){return e.jDomCoreMatrix=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-matrix.js requires jDomCore"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("core-matrix.js requires jDomObjectsMatrix"));r.bindPointData=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.point(0,0,0);return n.mergeObjects(t,t.point?{point:n.cloneObject(r)}:{children:t.children.map(function(t,i){return e(t,n.mergeObjects(r,_defineProperty({},t.axis,i)))})})};var o=function(e,t){return i.point(e.x+t.x,e.y+t.y,e.z+t.z)};r.nextCell=o;var u=function(e,t){return i.point(t.x-e.x,t.y-e.y,t.z-e.z)};r.pointDifference=u;var a=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z};r.checkEqualPoints=a;var s=function(e){return!!Object.keys(n.filterObject(e,function(e){return e<0})).length};r.pointHasNegative=s;var c=function(e){return n.reduceObject(e,n.curry(n.getMaxOrMin)(!s(e)),0)};r.getHighAbsoluteCoord=c;var l=function(e,t){return Object.keys(e).filter(function(r){return e[r]===t})};r.getAxisOfCoord=l;var d=function(e){return l(e,c(e))};r.getHighAbsoluteCoordAxis=d;var m=function(e,t){return n.mergeObjects(i.point(0,0,0),_defineProperty({},""+d(u(e,t))[0],s(u(e,t))?-1:1))};r.pointDirection=m;r.randomStart=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.point(10,10,10);return i.point(n.randomInteger(r.x-(e-1)*t.x),n.randomInteger(r.y-(e-1)*t.y),n.randomInteger(r.z-(e-1)*t.z))};r.lineEndPoint=function(e,t,r){return i.point(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))};var f=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a(t,r)?n.concat([t]):e(o(t,m(t,r)),r,n.concat([t]))};r.getPointsLine=f;var p=function(e){return e.reduce(function(e,t){return e.concat(f.apply(void 0,_toConsumableArray(t)))},[])};r.getPointsLines=p;var g=function(e,t,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return f(e,t).filter(function(e,t,r){return 0!==t&&t!==r.length-1||o}).reduce(function(e,t){return n.mergeObjects(e,_defineProperty({},""+!!i(t,r),[t]))},{true:[],false:[]})};r.testPointsBetween=g;r.getInBetween=function(e,t,r,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.mergeObjects({true:[],false:[]},g(e,t,r,i,o))};r.checkInBetween=function(e,t,r,n){return!(arguments.length>4&&void 0!==arguments[4]&&!arguments[4]||!n(e,r)&&!n(t,r))||!!g(e,t,r,n).true.length};r.getAxisLengths=function(e){return i.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)};r.randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[n.randomInteger(e.length)]:i.point(0,0,0)};var v=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)};r.checkValidPoint=v;r.getDOMItemFromPoint=function(e,t){return!!v(e,t)&&t.children[e.z].children[e.y].children[e.x]};r.getAllPoints=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?r.concat([t.point]):t.children.reduce(function(t,r){return t.concat(e(r,[]))},[])};r.adjacentPoints=function(e,t){return p([[i.point(-1,1,1),i.point(1,-1,-1)],[i.point(1,1,1),i.point(-1,1,-1)],[i.point(-1,-1,1),i.point(1,-1,1)],[i.point(1,0,0),i.point(1,1,-1)],[i.point(-1,1,0),i.point(1,1,0)]]).concat([i.point(0,0,1),i.point(1,0,0),i.point(-1,0,-1),i.point(0,0,-1)]).map(function(t){return o(e,t)}).filter(function(r){return v(o(e,r),t)})};r.adjacentEdgePoints=function(e,t){return[i.point(-1,0,0),i.point(1,0,0),i.point(0,-1,0),i.point(0,1,0),i.point(0,0,-1),i.point(0,0,1)].map(function(t){return o(e,t)}).filter(function(e){return v(e,t)})};var h=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=h[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCoreMatrix=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomLayout,r={noConflict:function(){return e.jDomLayout=t,r}};r.mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{name:"mainMenuForm",className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}};r.boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}};r.finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}};var n=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=n[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomLayout=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gamePieces,r={noConflict:function(){return e.gamePieces=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("game-pieces.js requires jDomCore"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("game-pieces.js requires jDomObjectsMatrix"));r.waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.mergeObjects(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}}(e,t),i.tile())};r.shipTile=function(){return{hasShip:!0}};r.ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}};r.hitTile=function(){return{isHit:!0}};r.playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}};r.playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}};var o=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=o[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gamePieces=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameUtils,r={noConflict:function(){return e.gameUtils=t,r}},n=e.jDomCoreMatrix;void 0===n&&("undefined"!=typeof require?n=require("./core-matrix.js"):console.error("functions.js requires jDomCoreMatrix"));r.checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip};var i=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit};r.checkIfHitCell=i;r.getAllNonHitCells=function(e){return n.getAllPoints(e).filter(function(t){return!i(t,e)})};r.getAdjEdgeNonHitCells=function(e,t){return n.adjacentEdgePoints(e,t).filter(function(e){return!i(e,t)})};var o=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})};r.getALowStatusItem=o;r.getLowStatusItems=function(e){return e.filter(function(t){return t.status<=o(e).status})};var u=function(e){return e.filter(function(e){return e.status<100&&e.status>0})};r.getBrokenItems=u;r.getBrokenShipsPlayers=function(e){return e.filter(function(e){return u(e.shipFleet).length})};r.numDamangedParts=function(e,t){return e-Math.ceil(t/100*e)};r.filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)};var a=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=a[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameUtils=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameActions,r={noConflict:function(){return e.gameActions=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("actions.js requires jDomCore"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("actions.js requires jDomCoreDom"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("actions.js requires jDomObjectsMatrix"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("actions.js requires jDomCoreMatrix"));var a=e.jDomLayout;void 0===a&&("undefined"!=typeof require?a=require("./layout.js"):console.error("actions.js requires jDomLayout"));var s=e.gamePieces;void 0===s&&("undefined"!=typeof require?s=require("./game-pieces.js"):console.error("actions.js requires gamePieces"));var c=e.gameUtils;void 0===c&&("undefined"!=typeof require?c=require("./functions.js"):console.error("actions.js requires gameUtils"));var l=function(e,t,r,o,u){var a,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return a=n.mergeObjectsMutable(t.children[u].children[o].children[r],e),s?(h.isLocked=!0,n.queueTimeout(function(){return a.isHit&&(a.attributes.style.backgroundColor=a.hasShip?"red":"white"),a=i.updateElement(a),h.isLocked=!1,a},0)):(a.isHit&&(a.attributes.style.backgroundColor=a.hasShip?"red":"white"),a=i.updateElement(a)),a},d=n.curry(l)(n.mergeObjects(s.shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),m=n.curry(l)(s.shipTile()),f=n.curry(l)(s.hitTile());r.setShip=function(e,t,r){return r?d(e,t.x,t.y,t.z):m(e,t.x,t.y,t.z)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=i.updateElements(n.mergeObjects(e.playerStats,s.playerStats(e,t))),e.playerStats.children[0].attributes.innerHTML&&console.log(e.playerStats.children[0].attributes.innerHTML),e},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,r&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,h.isLocked=!0,e.attacker?(n.queueTimeout(function(){return h.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},100),++e.turnCnt):n.queueTimeout(function(){return h.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),n.queueTimeout(function(){return p(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e};r.updatePlayer=g;var v=function(e,t,r,o){var u=(o=o.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(u=g(u,t,r),o.length<2)return n.queueTimeout(function(){return e=o[0],t=i.getTopParentItem(e),(r=e.parentItem.children).map(function(e){return p(e)}),e=p(e,"WINNER"),i.renderHTML(a.finalScore(r),t).children[0].children.map(function(e){return n.trace("Score Card: ")(e.attributes.innerHTML)}),[e];var e,t,r},200);var s,c,l,d=(s=u,c=o,(l=t)?s:g(function e(t,r,n){var i=r.length>1&&n>=r.length-1?r[0]:r[++n];return i.status>0?i:e(t,r,n)}(s,c,c.indexOf(s)),l));return d.isRobot&&n.queueTimeout(j,0,d,o),o},h=function e(t){e.isLocked=e.isLocked||!1;var r=i.getParentsByClass("player",t)[0],n=i.getParentsByClass("boards",t)[0].children;if(r.status<=0||r.attacker||e.isLocked)return n;var o=f(r.board,t.point.x,t.point.y,t.point.z,n.reduce(function(e,t){return e.attacker?e:t}).isRobot),a=!1,s=0;if(o.hasShip){var c=0;r.shipFleet.map(function(e){var r=e.parts.filter(function(r){return u.checkEqualPoints(r.point,t.point)&&(a=e),!r.isHit});return e.status=r.length/e.parts.length*100,c+=e.status,e}),r.status=c/r.shipFleet.length}return a&&(r=p(r,Math.round(100*r.status)/100+"%"),s=a.status<=0?a.parts.length:0),v(0,o.hasShip,s,n)};r.attackFleet=h;r.attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(t)};var y=function(e,t,r){return[n.queueTimeout(b,0,{targets:e,victim:r}),n.queueTimeout(b,200,{targets:e,target:t,victim:r})]},b=function(e){return e.victim.board.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return i.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return i.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e},j=function(e,t){var r,i,a=(r=t.filter(function(e){return!e.attacker}),1===(i=c.getBrokenShipsPlayers(r).length?c.getBrokenShipsPlayers(r):c.getLowStatusItems(r)).length?i[0]:i[n.randomInteger(i.length)]);return h.isLocked=!1,h(function(e){var t=c.getBrokenItems(e.shipFleet),r=[];if(t.length){var i=t.filter(function(e){return c.numDamangedParts(e.parts.length,e.status)>1}),a=c.getALowStatusItem(i.length?i:t).parts.filter(function(t){return c.checkIfHitCell(t.point,e.board)});if(i.length){for(var s=0;s<a.length;++s){var l=u.getInBetween(a[0].point,a[s].point,e.board,c.checkIfHitCell,!1);if(l.false.length)return y(l.false,l.false[0],e),u.getDOMItemFromPoint(l.false[0],e.board)}var d=(u.pointDifference(a[0].point,a[1].point).x>0?[o.point(-1,0,0),o.point(1,0,0)]:[o.point(0,-1,0),o.point(0,1,0)]).map(function(e,t){return u.nextCell(a[(a.length-1)*t].point,e)}).filter(function(t){return u.checkValidPoint(t,e.board)}).filter(function(t){return!c.checkIfHitCell(t,e.board)}),m=d.reduce(function(t,r){return c.checkIfHitCell(t,e.board)?r:t});if(m)return y(d,m,e),u.getDOMItemFromPoint(m,e.board)}r=c.getAdjEdgeNonHitCells(a[0].point,e.board)}var f=r.length?r:c.getAllNonHitCells(e.board).filter(function(e){return c.filterAdjacentPoints(e)}),p=f[n.randomInteger(f.length)];return y(f,p,e),u.getDOMItemFromPoint(p,e.board)}(a))};r.computerAttack=j;var O=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=O[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameActions=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameStart,r={noConflict:function(){return e.gameStart=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("start-functions.js requires jDomCore"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("start-functions.js requires jDomCoreDom"));var o=e.jDomCoreMatrix;void 0===o&&("undefined"!=typeof require?o=require("./core-matrix.js"):console.error("start-functions.js requires jDomCoreMatrix"));var u=e.jDomObjectsMatrix;void 0===u&&("undefined"!=typeof require?u=require("./objects-matrix.js"):console.error("start-functions.js requires jDomObjectsMatrix"));var a=e.jDomLayout;void 0===a&&("undefined"!=typeof require?a=require("./layout.js"):console.error("start-functions.js requires jDomLayout"));var s=e.gamePieces;void 0===s&&("undefined"!=typeof require?s=require("./game-pieces.js"):console.error("start-functions.js requires gamePieces"));var c=e.gameUtils;void 0===c&&("undefined"!=typeof require?c=require("./functions.js"):console.error("start-functions.js requires gameUtils"));var l=e.gameActions;void 0===l&&("undefined"!=typeof require?l=require("./actions.js"):console.error("start-functions.js requires gameActions"));var d=function(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(r=e,n=t,o.randDirection([u.point(1,0,0),u.point(0,1,0),u.point(0,0,1)].filter(function(e){return r[o.getAxisOfCoord(e,1)]>n})));return{start:o.randomStart(t,i,e),dir:i}},m=n.curry(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var i;return function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.mergeObjects(s.ship(e.name),{parts:t.map(function(e){return l.setShip(r,e,i)})})}(e,(i=o).getPointsLine.apply(i,_toConsumableArray(function e(t,r,n){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(n,r);return 0===o.getHighAbsoluteCoord(a.dir)?[u.point(0,0,0),u.point(0,0,0)]:(i=o).checkInBetween.apply(i,[a.start,o.lineEndPoint(a.start,r,a.dir)].concat([t,c.checkIfShipCell]))?e(t,r,n):[a.start,o.lineEndPoint(a.start,r,a.dir)]}(t,e.size,o.getAxisLengths(t)))),t,r)})})([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]);r.beginRound=function(e,t){e.preventDefault();var r=i.getTopParentItem(t),c=parseInt(i.getChildrenByName("human-players",t)[0].element.value),d=parseInt(i.getChildrenByName("robot-players",t)[0].element.value);if(c<0||c>100||d<0||d>100)return!1;var f=i.getChildrenByName("first-go-first",t)[0].element.checked;0===(c=c<0?0:c)&&(d=d<2?2:d),1===c&&(d=d<1?1:d),i.removeChild(i.getChildrenByClass("main-menu",r.body)[0],r.body);var p=i.renderHTML(a.boards(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&r<1)return n;var i=s.playerSet({},"Player "+(n.length+1));return i.isRobot=t<=0,i.board=o.bindPointData(u.square(s.waterTile(i,n),10)),i.shipFleet=m(i.board,!1),i.playerStats=s.playerStats(i,Math.round(100*i.status)/100+"%"),i.children=[i.board,i.playerStats],n.push(i),e(--t,t<0?--r:r,n)}(c,d)),r).children,g=l.updatePlayer(f?p[0]:p[n.randomInteger(p.length)]);return g.isRobot&&l.computerAttack(g,p),!1};var f=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jDomObjects.documentItem,t=e.body.children.length-1;t>=0;--t)i.removeChild(e.body.children[t],e.body);return i.renderHTML(a.mainMenu(),e),e};r.main=f;r.restart=function(e,t){return f(i.getTopParentItem(t))};var p=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=p[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameStart=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameMain,r={noConflict:function(){return e.gameMain=t,r}},n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects-dom.js"):console.error("main.js requires jDomObjects"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("main.js requires jDomCoreDom"));var o=e.gameActions;void 0===o&&("undefined"!=typeof require?o=require("./actions.js"):console.error("main.js requires gameActions"));var u=e.gameStart;void 0===u&&("undefined"!=typeof require?u=require("./start-functions.js"):console.error("main.js requires gameStart"));var a=u.main(n.documentDOMItem([u.beginRound,o.attackListener,u.restart])),s=i.getChildrenByClass("main-menu-form",a.body);i.getChildrenFromAttribute("type","submit",s[0])[0].element.click();var c=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=c[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameAI=r,e=Object.assign(e,r))}.call(void 0);
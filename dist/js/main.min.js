"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(){var n=function(n){return function t(){for(var r=arguments.length,e=Array(r),o=0;o<r;o++)e[o]=arguments[o];return e.length>=n.length?n.apply(void 0,e):function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,[].concat(e,r))}}},t=function(n){return JSON.parse(JSON.stringify(n))},r=function(){return Object.assign.apply(Object,arguments)},e=function n(r,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return o=o.slice(),o.push(r),--e>0?n(t(r),e,o):o},o=n(e),i=function(n,t){return t<n.length-1?++t:n.length-1},u=function(n,t){return{x:n,y:t}},a=function(n,t){return n.z?{x:n.x+t.x,y:n.y+t.y,z:n.z+t.z}:{x:n.x+t.x,y:n.y+t.y}},f=function n(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(o).length||(o=u(0,0)),Array.isArray(e)?e.map(function(t,e){switch(i){case 0:o=r(o,{y:e});break;case 1:o=r(o,{x:e});break;default:o=r(o,{z:e})}return n(t,o,i+1)}):(e.point=t(o),e)},c=function(n){return n.isHit&&(n.styles.backgroundColor=n.hasShip?"red":"white"),Object.keys(n.styles).length&&Object.keys(n.styles).forEach(function(t){return n.element.style[t]=n.styles[t]}),n},l=function n(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=o||0,u=function(n){return i(t,n)};if(0===o){var a=function(){var r=[];Array.isArray(t[o])&&(r=t[o].map(function(n){return document.createElement(n)})),e.forEach(function(e){return r[r.length-1].appendChild(n(t,e,u(o)))});var i=!1;return r.forEach(function(n){i&&i.appendChild(n),i=n}),{v:r[0]}}();if("object"===("undefined"==typeof a?"undefined":_typeof(a)))return a.v}if(Array.isArray(e)){var f=function(){var r=document.createElement(t[o]);return e.forEach(function(e){return r.appendChild(n(t,e,u(o)))}),{v:r}}();if("object"===("undefined"==typeof f?"undefined":_typeof(f)))return f.v}var l=document.createElement(t[o]);return e instanceof Object&&(e=c(r(e,{element:l}))),l},s=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;return r.appendChild(l(n,t))},y=n(s),h=y([["table","tbody"],"tr","td"]),p=function(n,t,e,o){return c(r(t[o][e],n))},d=n(p),v=function(n,t,e,o,i){return c(r(t[o][e][i],n))},b=(n(v),function(){return{hasShip:!1,isHit:!1,point:{},styles:{border:"1px solid #333",width:"35px",height:"35px",backgroundColor:"blue",cursor:"pointer"},events:{click:{f:E,args:["shipFleet","point"]}},element:{}}}),g=function(){return{hasShip:!0}},m=function(){return{status:100,parts:[]}},x=function(){return{isHit:!0}},S=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:n,status:100,board:{},shipFleet:[]}},k=d(r(g(),{styles:{backgroundColor:"#777"}})),A=d(g()),O=function(n,t,r){return r?k(n,t.x,t.y):A(n,t.x,t.y)},j=d(x()),E=function(n,t,r){var e=j(n,r.x,r.y);return e.hasShip?t.map(function(n){if(n.hasOwnProperty("parts")){var t=n.parts.filter(function(n){return!n.isHit});n.status=t.length/n.parts.length*100}return n}):t},C=function(n,t){return t[n.y][n.x].hasShip},M=function(n,t,r){if(C(n,r)||C(t,r))return!0;var e=t.x-n.x,o=t.y-n.y;if(e>0){for(var i=n.x;i<t.x;++i)if(C({x:i,y:n.y},r))return!0}else if(o>0)for(var u=n.y;u<t.y;++u)if(C({x:n.x,y:u},r))return!0;return!1},w=function(n,t,r,e){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=m(),u=t,f=0;f<n;++f)i.parts.push(O(e,u,o)),u=a(u,r);return i},z=function(n,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],e=[];for(var o in n){var i=u(0,0),a=0,f=u(0,1),c=u(0,0);do a=Math.floor(2*Math.random()),f=0===a?u(0,1):u(1,0),i=u(Math.floor(Math.random()*(t.length-(n[o]-1)*f.x)),Math.floor(Math.random()*(t[0].length-(n[o]-1)*f.y))),c=u(i.x+f.x*(n[o]-1),i.y+f.y*(n[o]-1));while(M(i,c,t));e.push(w(n[o],i,f,t,r))}return e},F=n(z),H=F([5,4,3,3,2]),_=o(b()),J=function(n,t){return o(_(n),t)},N=function(n){return J(n,n)},L=n(E),P=function n(t,r,e,o){return Array.isArray(t)?t.map(function(t){return n(t,r,e,o)}):t.element.addEventListener("click",function(){return L(e,o,t.point)})},q=function(n){for(var t=[],r=0;r<n;++r){var e=S();e.board=N(10);L(e.board);h(f(e.board),document.body),e.shipFleet=H(e.board,!0);var o=e.shipFleet;P(e.board,o,e.board,e.shipFleet),t.push(e)}return t},B=q(1);console.log(B)}();
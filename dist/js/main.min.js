"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},curry=function(e){return function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.length>=e.length?e.apply(void 0,n):function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(void 0,[].concat(n,r))}}},cloneObject=function(e){return JSON.parse(JSON.stringify(e))},mergeObjects=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=r[0],o=r[1];r.length>2;){var l=r.splice(r.length-2,2);o=r[r.length-2]=e.apply(void 0,_toConsumableArray(l))}return"object"!==("undefined"==typeof i?"undefined":_typeof(i))||"object"!==("undefined"==typeof o?"undefined":_typeof(o))?"object"===("undefined"==typeof o?"undefined":_typeof(o))?o:i:(Object.keys(o).map(function(t){"object"===_typeof(o[t])&&i.hasOwnProperty(t)&&"object"===_typeof(i[t])&&(i[t]=e(i[t],o[t]),Object.keys(i[t]).length>Object.keys(o[t]).length&&(o[t]=cloneObject(i[t])))}),Object.assign(i,o))},fillArray=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n=n.slice(),n.push(t),--r>0?e(cloneObject(t),r,n):n},buildArray=curry(fillArray),nextIndex=function(e,t){return t<e.length-1?++t:e.length-1},nextCell=function(e,t){return e.z?{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}:{x:e.x+t.x,y:e.y+t.y}},locateCells=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(r).length||(r=point(0,0)),Array.isArray(t)?t.map(function(t,i){switch(n){case 0:r=mergeObjects(r,{y:i});break;case 1:r=mergeObjects(r,{x:i});break;default:r=mergeObjects(r,{z:i})}return e(t,r,n+1)}):(t.point=cloneObject(r),t)},checkIfShipCell=function(e,t){return t[e.y][e.x].hasShip},checkIfAnyShip=function(e,t){return e.filter(function(e){return!checkIfShipCell(e,t)})},checkShipBetween=function(e,t,r){if(checkIfShipCell(e,r)||checkIfShipCell(t,r))return!0;var n=t.x-e.x,i=t.y-e.y;if(n>0){for(var o=e.x;o<t.x;++o)if(checkIfShipCell({x:o,y:e.y},r))return!0}else if(i>0)for(var l=e.y;l<t.y;++l)if(checkIfShipCell({x:e.x,y:l},r))return!0;return!1},buildShip=function(e,t,r,n){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=ship(),l=t,u=0;u<e;++u)o.parts.push(setShip(n,l,i)),l=nextCell(l,r);return o},buildFleet=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(var i in e){var o=point(0,0),l=0,u=point(0,1),c=point(0,0);do l=Math.floor(2*Math.random()),u=0===l?point(0,1):point(1,0),o=point(Math.floor(Math.random()*(t.length-(e[i]-1)*u.x)),Math.floor(Math.random()*(t[0].length-(e[i]-1)*u.y))),c=point(o.x+u.x*(e[i]-1),o.y+u.y*(e[i]-1));while(checkShipBetween(o,c,t));n.push(buildShip(e[i],o,u,t,r))}return n},fleetBuilder=curry(buildFleet),point=function(e,t){return{x:e,y:t}},point3d=function(e,t){return Object.assign({},e,{z:t})},shipViewTile=function(){return{hasShip:!0,styles:{backgroundColor:"#777"}}},tile=function(){return{point:{},styles:{width:"35px",height:"35px",backgroundColor:"transparent"},element:{}}},gameTile=function(){return mergeObjects(tile(),{hasShip:!1,isHit:!1,styles:{border:"1px solid #333",backgroundColor:"blue",cursor:"pointer"}})},rectMatrix=function(e,t,r){return buildArray(buildArray(e,t),r)},rect3d=function(e,t,r,n){return buildArray(rectMatrix(e,t,r),n)},squareMatrix=function(e,t){return rectMatrix(e,t,t)},cube3d=function(e,t){return rect3d(e,t,t,t)},shipTile=function(){return{hasShip:!0}},ship=function(){return{status:100,parts:[]}},hitTile=function(){return{isHit:!0}},playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,status:100,board:{},shipFleet:[]}},defaultFleet=fleetBuilder([5,4,3,3,2]),configureHtml=function(e){return e.isHit&&(e.styles.backgroundColor=e.hasShip?"red":"white"),Object.keys(e.styles).length&&e.element.style&&Object.keys(e.styles).forEach(function(t){return e.element.style[t]=e.styles[t]}),e},recurseHtml=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=n||0,i=function(e){return nextIndex(t,e)};if(0===n){var o=function(){var o=[];Array.isArray(t[n])&&(o=t[n].map(function(e){return document.createElement(e)})),r.forEach(function(r){return o[o.length-1].appendChild(e(t,r,i(n)))});var l=!1;return o.forEach(function(e){l&&l.appendChild(e),l=e}),{v:o[0]}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}if(Array.isArray(r)){var l=function(){var o=document.createElement(t[n]);return r.forEach(function(r){return o.appendChild(e(t,r,i(n)))}),{v:o}}();if("object"===("undefined"==typeof l?"undefined":_typeof(l)))return l.v}var u=document.createElement(t[n]);return r instanceof Object&&(r=configureHtml(mergeObjects(r,{element:u}))),u},processHtml=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;return r.appendChild(recurseHtml(e,t))},generateHtml=curry(processHtml),createTable=generateHtml([["table","tbody"],"tr","td"]),updateCell=function(e,t,r,n){return configureHtml(mergeObjects(t[n][r],e))},alterCell=curry(updateCell),update3dCell=function(e,t,r,n,i){return configureHtml(mergeObjects(t[n][r][i],e))},alter3dCell=curry(update3dCell),setViewShip=alterCell(mergeObjects(shipTile(),{styles:{backgroundColor:"#777"}})),setHiddenShip=alterCell(shipTile()),setShip=function(e,t,r){return r?setViewShip(e,t.x,t.y):setHiddenShip(e,t.x,t.y)},setHit=alterCell(hitTile()),attackFleet=function(e,t,r){var n=setHit(e,r.x,r.y);return n.hasShip?t.map(function(e){if(e.hasOwnProperty("parts")){var t=e.parts.filter(function(e){return!e.isHit});e.status=t.length/e.parts.length*100}return e}):t},launchAttack=curry(attackFleet),bindListeners=function e(t,r,n,i){return Array.isArray(t)?t.map(function(t){return e(t,r,n,i)}):t.element instanceof HTMLElement?t.element.addEventListener("click",function(){return launchAttack(n,i,t.point)}):t.element};!function(){var e=function(e){for(var t=[],r=0;r<e;++r){var n=playerSet();n.board=squareMatrix(gameTile(),10),createTable(locateCells(n.board),document.body),n.shipFleet=defaultFleet(n.board,!0);var i=n.shipFleet;bindListeners(n.board,i,n.board,n.shipFleet),t.push(n)}return t},t=e(1);console.log(t)}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var base=window||{};(function(){var e=this||{},t=e.jDomCore||{},a={};(e.jDomCore=a).noConflict=function(){return e.jDomCore=t,a},a.curry=function(o){return function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.length>=o.length?o.apply(void 0,n):function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return a.curry(o).apply(void 0,[].concat(n,t))}}},a.pipe=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},a.mapObject=function(r,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(r)?r.map(n,e):Object.keys(r).reduce(function(e,t){return e[t]=n.apply(void 0,_toConsumableArray([r[t],t,r].slice(0,n.length||2))),e},e||{})},a.filterObject=function(r,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(r)?r.filter(n,e):Object.keys(r).reduce(function(e,t){return n.apply(void 0,_toConsumableArray([r[t],t,r].slice(0,n.length||2)))?e[t]=r[t]:delete e[t],e},e||{})},a.reduceObject=function(r,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r[Object.keys(r)[0]]||r[0];return Array.isArray(r)?r.reduce(n,e):Object.keys(r).reduce(function(e,t){return n.apply(void 0,_toConsumableArray([e,r[t],t,r].slice(0,n.length||2)))},e)},a.notEmptyObjectOrArray=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};a.cloneObject=function(e){return function n(e,o){return a.notEmptyObjectOrArray(e)?a.reduceObject(e,function(e,t,r){return e[r]=o[r]&&!/^(parentItem|listenerArgs|element)$/.test(r)?n(t,o[r]):t,e},o):o}(e,JSON.parse(JSON.stringify(e,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})))};var n=function(r,n,e){var t=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return a.notEmptyObjectOrArray(e)?a.mapObject(e,function(e,t){return n[t]&&!/^(parentItem|listenerArgs|element)$/.test(t)?r(n[t],e):e},t?n:a.cloneObject(n)):e};a.mergeObjects=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 2===t.length?n(a.mergeObjects,t[0],t[1]):1===t.length?a.cloneObject(t[0]):t.reduce(a.curry(n)(a.mergeObjects),{})},a.mergeObjectsMutable=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 2===t.length?n(a.mergeObjectsMutable,t[0],t[1],!0):1===t.length?t[0]:t.reduce(a.curry(n)(a.mergeObjectsMutable),{})};var r=function e(t,r,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return 0<--n?e(t,t?r:a.cloneObject(r),n,o.concat([r])):o.concat([r])};a.buildArray=a.curry(r)(!1),a.buildArrayOfReferences=a.curry(r)(!0),a.inArray=function(e,t){return 0<=e.indexOf(t)},a.getMaxOrMin=function(e,t,r){return e&&t<r||!e&&r<t?r:t},a.getMax=a.curry(a.getMaxOrMin)(!0),a.getMin=a.curry(a.getMaxOrMin)(!1),a.randomNumber=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*r},a.randomInteger=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*r},a.compare=function(e,t){return e===t?0:t<e?1:-1},a.compareArrays=function(r,n){return n.filter(function(e,t){return!a.inArray(r,e)||r[t]!==e}).concat(r).reduce(function(e,t){return e[JSON.stringify(t,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})]=a.compare(n.filter(function(e){return e===t}).length,r.filter(function(e){return e===t}).length),e},{})},a.trace=function(t){return function(e){return console.info(t+": ",e),e}},a.queueTimeout=function(){for(var e=arguments.length,t=Array(2<e?e-2:0),r=2;r<e;r++)t[r-2]=arguments[r];var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;a.queueTimeout.queue=a.queueTimeout.queue||[],a.queueTimeout.isRunning=a.queueTimeout.isRunning||!1;var i={id:0,func:n,timeout:o,args:t,result:0};if(n&&a.queueTimeout.queue.push(i),a.queueTimeout.queue.length&&!a.queueTimeout.isRunning){a.queueTimeout.isRunning=!0;var u=a.queueTimeout.queue.shift();return u.id=setTimeout(function(){return u.result=u.func.apply(u,_toConsumableArray(u.args)),a.queueTimeout.isRunning=!1,a.queueTimeout(!1)},u.timeout),u}return i},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=a),exports=Object.assign(exports,a))}).call(window||base||{}),function(){var e=this||{},r=e.document;Object.keys(e).length||("undefined"!=typeof require?(e=require("../../pseudoDom/objects.js").generate(e),r=e.document):console.error("objects.js requires jDomPseudoDom"));var t=e.jDomObjects||{},n={};(e.jDomObjects=n).noConflict=function(){return e.jDomObjects=t,n};var o=e.jDomCore;void 0===o&&("undefined"!=typeof require?o=require("../core.js"):console.error("objects.js requires jDomCore")),n.DOMItem=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(r))};n.documentDOMItem=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return n.DOMItem({tagName:"html",attributes:{},element:r,eventListeners:t,children:e,head:e[0],body:e[1]})}([n.DOMItem({tagName:"head",attributes:{},element:r.head,children:[]}),n.DOMItem({tagName:"body",attributes:{},element:r.body,children:[]})],e);return t.children=t.children.map(function(e){return n.DOMItem(e,{parentItem:t})}),t.head=t.children[0],t.body=t.children[1],n.DOMItem(t)},n.documentItem=n.documentDOMItem(),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=Object.assign(exports,n))}.call(window||base||{}),function(){var e=this||{},t=e.jDomCoreDom||{},i={};(e.jDomCoreDom=i).noConflict=function(){return e.jDomCoreDom=t,i};var r=e.document;void 0===r&&("undefined"!=typeof require?(e=require("../../pseudoDom/objects.js").generate(e),r=e.document):console.error("objects.js requires jDomPseudoDom"));var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("../core.js"):console.error("core.js requires jDomCore"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("./objects.js"):console.error("core.js requires jDomObjects")),i.elementHasAttribute=function(e,t,r){return!!e.style&&(t in e?/^(style|className)$/.test(t)?n.compareArrays("string"==typeof r?e[t].split(" "):Object.keys(e[t]),"string"==typeof r?r.split(" "):Object.keys(r)):e[t]===r:e.hasAttribute(t)&&e.getAttribute(t)===r)},i.elementChanges=function(r){return r.element.tagName.toLowerCase()!==r.tagName.toLowerCase()?i.generateElement(r):(r.attributes=n.filterObject(r.attributes,function(e,t){return n.filterObject(n.mapObject(r.attributes,function(e,t){return"object"===(void 0===e?"undefined":_typeof(e))||"className"===t?n.filterObject(i.elementHasAttribute(r.element,t,e),function(e){return 1===e}):!i.elementHasAttribute(r.element,t,e)}),function(e){return!!e})[t]}),r)},i.updateElement=function(r){return r.element.style&&(r.attributes=n.mapObject(i.elementChanges(r).attributes,function(e,t){return t in r.element?n.notEmptyObjectOrArray(e)?n.mapObject(n.filterObject(e,function(e,t){return/^\D+$/.test(t)}),function(e,t){return r.element.style[t]=e},r.element.style):r.element[t]=e:(r.element.setAttribute(t,e),e)})),r},i.updateElements=function(e){return(e=i.updateElement(e)).children.map(function(e){return i.updateElements(e)}),e},i.generateElement=function(e){return e.element=r.createElement(e.tagName),i.updateElement(e)},i.bindAllElements=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mapObject(o.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:i.bindElement(t).element,t.parentItem=e.body||e,t.children.map(function(e){return i.bindAllElements(e,t)}),t},i.bindElement=function(e){return e.element&&e.element.style||(e.element=i.generateElement(e).element),e},i.buildHTML=function(t){return t.children.map(function(e){return t.element.appendChild(i.buildHTML(e).element)}),t},i.appendAllHTML=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),i.buildHTML(r)},i.appendHTML=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),e.element&&e.element.style||(e=i.bindElement(e)),r.element.appendChild(e.element),e},i.removeChild=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)},i.registerListener=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.name,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.documentItem;return Object.assign(r.eventListeners,_defineProperty({},t,e))},i.registerListeners=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mergeObjects(t,{eventListeners:e},t.eventListeners)},i.retrieveListener=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};i.assignListener=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,function t(e){if(void 0===t.supportsOptions){t.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(e){t.supportsOptions=!1}}return!("object"!==(void 0===e?"undefined":_typeof(e))||!t.supportsOptions)&&e}(n)):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r,r},i.appendListeners=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},o=4<arguments.length&&void 0!==arguments[4]&&arguments[4];return e.children=e.children||[],e.eventListeners&&e.eventListeners[t]&&(e.eventListeners[t]={listenerFunc:r,listenerArgs:n,listenerOptions:o}),e.children.map(function(e){return i.appendListeners(e,t,r,n,o)}),e},i.bindAllListeners=function(r){return r.eventListeners&&Object.keys(r.eventListeners).length&&r.element.style&&n.mapObject(r.eventListeners,function(t,e){return i.assignListener(e,r.element,function(e){return t.listenerFunc(e,r,t.listenerArgs)},t.listenerOptions)}),r.children=r.children.map(function(e){return i.bindAllListeners(e)}),r},i.bindListeners=function(r){return r.eventListeners&&Object.keys(r.eventListeners).length&&r.element.style&&n.mapObject(r.eventListeners,function(t,e){return i.assignListener(e,r.element,function(e){return t.listenerFunc(e,r,t.listenerArgs)},t.listenerOptions)}),r},i.getChildrenFromAttribute=function(r,n){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.documentItem.body;return e.attributes[r]&&e.attributes[r]===n?e.children.reduce(function(e,t){return e.concat(i.getChildrenFromAttribute(r,n,t))},[]).concat([e]):e.children.reduce(function(e,t){return e.concat(i.getChildrenFromAttribute(r,n,t))},[])},i.getChildrenByClass=n.curry(i.getChildrenFromAttribute)("className"),i.getChildrenByName=n.curry(i.getChildrenFromAttribute)("name"),i.getParentsFromAttribute=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.documentItem.body;return Object.keys(r.parentItem).length?(r.attributes[e]||r[e]||!1)===t?i.getParentsFromAttribute(e,t,r.parentItem).concat([r]):i.getParentsFromAttribute(e,t,r.parentItem):[]},i.getParentsByClass=n.curry(i.getParentsFromAttribute)("className"),i.getParentsByName=n.curry(i.getParentsFromAttribute)("name"),i.getParentsByTagName=n.curry(i.getParentsFromAttribute)("tagName"),i.getTopParentItem=function(e){return Object.keys(e.parentItem).length?i.getTopParentItem(e.parentItem):e},i.renderHTML=function(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mapObject(o.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:i.bindElement(t).element,t.eventListeners=n.mapObject(t.eventListeners,function(e){return n.mergeObjects(e,{listenerFunc:i.retrieveListener(e.listenerFunc,i.getTopParentItem(r))})}),t.parentItem=r.body||r,(t=i.bindListeners(i.appendHTML(t,r))).children.map(function(e){return i.renderHTML(e,t)}),t},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports=Object.assign(exports,i))}.call(window||base||{}),function(){var e=this||{},t=e.jDomMatrixObjects||{},l={};(e.jDomMatrixObjects=l).noConflict=function(){return e.jDomMatrixObjects=t,l};var s=e.jDomCore;void 0===s&&("undefined"!=typeof require?s=require("../core/core.js"):console.error("objects.js requires jDomCore"));var c=e.jDomObjects;void 0===c&&("undefined"!=typeof require?c=require("../core/dom/objects.js"):console.error("core.js requires jDomObjects")),l.point=function(e,t){return{x:e,y:t,z:2<arguments.length&&void 0!==arguments[2]?arguments[2]:0}},l.tile=function(){return{point:{}}},l.matrix=function(){var e,t,r,n,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{coord:0,props:[]},i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{coord:0,props:[]},u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{coord:1,props:[]},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return(e=c).DOMItem.apply(e,[{tagName:"div",attributes:{className:"matrix"},children:s.buildArray((t=c).DOMItem.apply(t,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:s.buildArray((r=c).DOMItem.apply(r,[{axis:"y",tagName:"div",attributes:{className:"row"},children:s.buildArray((n=c).DOMItem.apply(n,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(_toConsumableArray(o.props))),o.coord)}].concat(_toConsumableArray(i.props))),i.coord)}].concat(_toConsumableArray(u.props))),u.coord)}].concat(_toConsumableArray(a)))},l.square=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.x,r=void 0===t?[]:t,n=e.y,o=void 0===n?[]:n,i=e.z,u=void 0===i?[]:i,a=e.matrixProps,s=void 0===a?[]:a,c=arguments[1];return l.matrix({coord:c,props:r},{coord:c,props:o},{coord:1,props:u},s)},l.cube=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.x,r=void 0===t?[]:t,n=e.y,o=void 0===n?[]:n,i=e.z,u=void 0===i?[]:i,a=e.matrixProps,s=void 0===a?[]:a,c=arguments[1];return l.matrix({coord:c,props:r},{coord:c,props:o},{coord:c,props:u},s)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=l),exports=Object.assign(exports,l))}.call(window||base||{}),function(){var e=this||{},t=e.jDomMatrixCore||{},i={};(e.jDomMatrixCore=i).noConflict=function(){return e.jDomMatrixCore=t,i};var u=e.jDomCore;void 0===u&&("undefined"!=typeof require?u=require("../core/core.js"):console.error("core.js requires jDomCore"));var n=e.jDomMatrixObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects.js"):console.error("core.js requires jDomMatrixObjects")),i.bindPointData=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n.point(0,0,0);return u.mergeObjects(e,e.point?{point:u.cloneObject(r)}:{children:e.children.map(function(e,t){return i.bindPointData(e,u.mergeObjects(r,_defineProperty({},e.axis,t)))})})},i.nextCell=function(e,t){return n.point(e.x+t.x,e.y+t.y,e.z+t.z)},i.pointDifference=function(e,t){return n.point(t.x-e.x,t.y-e.y,t.z-e.z)},i.checkEqualPoints=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},i.pointHasNegative=function(e){return!!Object.keys(u.filterObject(e,function(e){return e<0})).length},i.getHighAbsoluteCoord=function(e){return u.reduceObject(e,u.curry(u.getMaxOrMin)(!i.pointHasNegative(e)),0)},i.getAxisOfCoord=function(t,r){return Object.keys(t).filter(function(e){return t[e]===r})},i.getHighAbsoluteCoordAxis=function(e){return i.getAxisOfCoord(e,i.getHighAbsoluteCoord(e))},i.pointDirection=function(e,t){return u.mergeObjects(n.point(0,0,0),_defineProperty({},""+i.getHighAbsoluteCoordAxis(i.pointDifference(e,t))[0],i.pointHasNegative(i.pointDifference(e,t))?-1:1))},i.randomStart=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:n.point(10,10,10);return n.point(u.randomInteger(r.x-(e-1)*t.x),u.randomInteger(r.y-(e-1)*t.y),u.randomInteger(r.z-(e-1)*t.z))},i.lineEndPoint=function(e,t,r){return n.point(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))},i.getPointsLine=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return i.checkEqualPoints(e,t)?r.concat([e]):i.getPointsLine(i.nextCell(e,i.pointDirection(e,t)),t,r.concat([e]))},i.getPointsLines=function(e){return e.reduce(function(e,t){return e.concat(i.getPointsLine.apply(i,_toConsumableArray(t)))},[])},i.testPointsBetween=function(e,t,r,n){var o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];return i.getPointsLine(e,t).filter(function(e,t,r){return 0!==t&&t!==r.length-1||o}).reduce(function(e,t){return u.mergeObjects(e,_defineProperty({},""+!!n(t,r),[t]))},{true:[],false:[]})},i.getInBetween=function(e,t,r,n){var o=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];return u.mergeObjects({true:[],false:[]},i.testPointsBetween(e,t,r,n,o))},i.checkInBetween=function(e,t,r,n){return!(!(!(4<arguments.length&&void 0!==arguments[4])||arguments[4])||!n(e,r)&&!n(t,r))||!!i.testPointsBetween(e,t,r,n).true.length},i.getAxisLengths=function(e){return n.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)},i.randDirection=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[u.randomInteger(e.length)]:n.point(0,0,0)},i.checkValidPoint=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)},i.getDOMItemFromPoint=function(e,t){return!!i.checkValidPoint(e,t)&&t.children[e.z].children[e.y].children[e.x]},i.getAllPoints=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e.point?t.concat([e.point]):e.children.reduce(function(e,t){return e.concat(i.getAllPoints(t,[]))},[])},i.adjacentPoints=function(t,r){return i.getPointsLines([[n.point(-1,1,1),n.point(1,-1,-1)],[n.point(1,1,1),n.point(-1,1,-1)],[n.point(-1,-1,1),n.point(1,-1,1)],[n.point(1,0,0),n.point(1,1,-1)],[n.point(-1,1,0),n.point(1,1,0)]]).concat([n.point(0,0,1),n.point(1,0,0),n.point(-1,0,-1),n.point(0,0,-1)]).map(function(e){return i.nextCell(t,e)}).filter(function(e){return i.checkValidPoint(i.nextCell(t,e),r)})},i.adjacentEdgePoints=function(t,r){return[n.point(-1,0,0),n.point(1,0,0),n.point(0,-1,0),n.point(0,1,0),n.point(0,0,-1),n.point(0,0,1)].map(function(e){return i.nextCell(t,e)}).filter(function(e){return i.checkValidPoint(e,r)})},i.getPointFromElement=function(e){return n.point(Array.from(e.parentNode.childNodes).indexOf(e),Array.from(e.parentNode.parentNode.childNodes).indexOf(e.parentNode),Array.from(e.parentNode.parentNode.parentNode.childNodes).indexOf(e.parentNode.parentNode))},i.getDOMItemFromElement=function(e,t){return i.getDOMItemFromPoint(i.getPointFromElement(e),t)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports=Object.assign(exports,i))}.call(window||base||{}),function(){var e=this||{},t=e.gameLayout||{},r={};(e.gameLayout=r).noConflict=function(){return e.gameLayout=t,r};var n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("../jDom/core/dom/objects.js"):console.error("layout.js requires jDomObjects")),r.mainMenu=function(){return n.DOMItem({tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{name:"mainMenuForm",className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]})},r.boards=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return n.DOMItem({tagName:"div",attributes:{className:"boards"},children:e})},r.finalScore=function(e){return n.DOMItem({tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]})},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gamePieces||{},r={};(e.gamePieces=r).noConflict=function(){return e.gamePieces=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("../jDom/core/core.js"):console.error("pieces.js requires jDom/core/core"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("../jDom/core/dom/objects.js"):console.error("setup.js requires jDom/core/dom/objects"));var i=e.jDomMatrixObjects;void 0===i&&("undefined"!=typeof require?i=require("../jDom/matrix/objects.js"):console.error("pieces.js requires jDom/matrix/objects"));r.waterTile=function(){return n.mergeObjects(o.DOMItem({hasShip:!1,isHit:!1}),i.tile())},r.shipTile=function(){return{hasShip:!0}},r.ship=function(){return{name:0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}},r.hitTile=function(){return{isHit:!0}},r.playerSet=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return{name:1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}},r.playerStats=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameUtils||{},r={};(e.gameUtils=r).noConflict=function(){return e.gameUtils=t,r};var n=e.jDomMatrixCore;void 0===n&&("undefined"!=typeof require?n=require("../jDom/matrix/core.js"):console.error("functions.js requires jDom/matrix/core")),r.checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip},r.checkIfHitCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit},r.getAllNonHitCells=function(t){return n.getAllPoints(t).filter(function(e){return!r.checkIfHitCell(e,t)})},r.getAdjEdgeNonHitCells=function(e,t){return n.adjacentEdgePoints(e,t).filter(function(e){return!r.checkIfHitCell(e,t)})},r.getALowStatusItem=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})},r.getLowStatusItems=function(t){return t.filter(function(e){return e.status<=r.getALowStatusItem(t).status})},r.getBrokenItems=function(e){return e.filter(function(e){return e.status<100&&0<e.status})},r.getBrokenShipsPlayers=function(e){return e.filter(function(e){return r.getBrokenItems(e.shipFleet).length})},r.numDamagedParts=function(e,t){return e-Math.ceil(t/100*e)},r.filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameActions||{},c={};(e.gameActions=c).noConflict=function(){return e.gameActions=t,c};var d=e.jDomCore;void 0===d&&("undefined"!=typeof require?d=require("../jDom/core/core.js"):console.error("actions.js requires jDom/core/core"));var l=e.jDomCoreDom;void 0===l&&("undefined"!=typeof require?l=require("../jDom/core/dom/core.js"):console.error("actions.js requires jDom/core/dom/core"));var m=e.jDomMatrixObjects;void 0===m&&("undefined"!=typeof require?m=require("../jDom/matrix/objects.js"):console.error("actions.js requires jDom/matrix/objects"));var f=e.jDomMatrixCore;void 0===f&&("undefined"!=typeof require?f=require("../jDom/matrix/core.js"):console.error("actions.js requires jDom/matrix/core"));var p=e.gameLayout;void 0===p&&("undefined"!=typeof require?p=require("./layout.js"):console.error("actions.js requires game/layout"));var r=e.gamePieces;void 0===r&&("undefined"!=typeof require?r=require("./pieces.js"):console.error("actions.js requires game/pieces"));var g=e.gameUtils;void 0===g&&("undefined"!=typeof require?g=require("./functions.js"):console.error("actions.js requires game/functions"));var n=function(e,t,r,n,o){var i,u=5<arguments.length&&void 0!==arguments[5]&&arguments[5];return i=d.mergeObjectsMutable(t.children[o].children[n].children[r],e),u?(c.attackFleet.isLocked=!0,d.queueTimeout(function(){return i.isHit&&(i.attributes.style.backgroundColor=i.hasShip?"red":"white"),i=l.updateElement(i),c.attackFleet.isLocked=!1,i},0)):(i.isHit&&(i.attributes.style.backgroundColor=i.hasShip?"red":"white"),i=l.updateElement(i)),i},o=d.curry(n)(d.mergeObjects(r.shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),i=d.curry(n)(r.shipTile()),a=d.curry(n)(r.hitTile());c.setShip=function(e,t,r){return r?o(e,t.x,t.y,t.z):i(e,t.x,t.y,t.z)};var h=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=l.updateElements(d.mergeObjects(e.playerStats,r.playerStats(e,t))),e};c.updatePlayer=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,r&&++e.attacks.sunk),t||(e.attacker=!e.attacker,c.attackFleet.isLocked=!0,e.attacker&&!e.isRobot?(d.queueTimeout(function(){return c.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return l.updateElement(d.mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):d.queueTimeout(function(){return c.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return l.updateElement(d.mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),d.queueTimeout(function(){return h(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e};var s=function(e,t,r,n){var o=(n=n.filter(function(e){return 0<e.status})).reduce(function(e,t){return e.attacker?e:t});if(o=c.updatePlayer(o,t,r),n.length<2)return d.queueTimeout(function(){return e=n[0],t=l.getTopParentItem(e),(r=e.parentItem.children).map(function(e){return h(e)}),e=h(e,"WINNER"),l.renderHTML(p.finalScore(r),t).children[0].children.map(function(e){return e.attributes.innerHTML}),[e];var e,t,r},200);var i,u,a,s=(i=o,u=n,(a=t)?i:c.updatePlayer(function e(t,r,n){var o=1<r.length&&n>=r.length-1?r[0]:r[++n];return 0<o.status?o:e(t,r,n)}(i,u,u.indexOf(i)),a));return s.isRobot&&d.queueTimeout(c.computerAttack,0,s,n),n};c.attackFleet=function(r){c.attackFleet.isLocked=c.attackFleet.isLocked||!1;var e=l.getParentsByClass("player",r)[0],t=l.getParentsByClass("boards",r)[0].children;if(e.status<=0||e.attacker||c.attackFleet.isLocked)return t;var n=a(e.board,r.point.x,r.point.y,r.point.z,t.reduce(function(e,t){return e.attacker?e:t}).isRobot),o=!1,i=0;if(n.hasShip){var u=0;e.shipFleet.map(function(t){var e=t.parts.filter(function(e){return f.checkEqualPoints(e.point,r.point)&&(o=t),!e.isHit});return t.status=e.length/t.parts.length*100,u+=t.status,t}),e.status=u/e.shipFleet.length}return o&&(e=h(e,Math.round(100*e.status)/100+"%"),i=o.status<=0?o.parts.length:0),s(0,n.hasShip,i,t)},c.attackListener=function(e,t){return c.attackFleet(f.getDOMItemFromElement(e.target,t))};var b=function(e,t,r){return[d.queueTimeout(u,0,{targets:e,victim:r}),d.queueTimeout(u,200,{targets:e,target:t,victim:r})]},u=function(t){return t.victim.board.children.map(function(e){return l.updateElement(d.mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),t.targets.forEach(function(e){return l.updateElement(d.mergeObjects(f.getDOMItemFromPoint(e,t.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),t.target||(t.victim.board.children.map(function(e){return l.updateElement(d.mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),t.targets.forEach(function(e){return l.updateElement(d.mergeObjects(f.getDOMItemFromPoint(e,t.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),t};c.computerAttack=function(e,t){var r,n,o=(r=t.filter(function(e){return!e.attacker}),1===(n=g.getBrokenShipsPlayers(r).length?g.getBrokenShipsPlayers(r):g.getLowStatusItems(r)).length?n[0]:n[d.randomInteger(n.length)]);return c.attackFleet.isLocked=!1,c.attackFleet(function(r){var e=g.getBrokenItems(r.shipFleet),t=[];if(e.length){var n=e.filter(function(e){return 1<g.numDamagedParts(e.parts.length,e.status)}),o=g.getALowStatusItem(n.length?n:e).parts.filter(function(e){return g.checkIfHitCell(e.point,r.board)});if(n.length){for(var i=0;i<o.length;++i){var u=f.getInBetween(o[0].point,o[i].point,r.board,g.checkIfHitCell,!1);if(u.false.length)return b(u.false,u.false[0],r),f.getDOMItemFromPoint(u.false[0],r.board)}var a=(0<f.pointDifference(o[0].point,o[1].point).x?[m.point(-1,0,0),m.point(1,0,0)]:[m.point(0,-1,0),m.point(0,1,0)]).map(function(e,t){return f.nextCell(o[(o.length-1)*t].point,e)}).filter(function(e){return f.checkValidPoint(e,r.board)}).filter(function(e){return!g.checkIfHitCell(e,r.board)}),s=a.reduce(function(e,t){return g.checkIfHitCell(e,r.board)?t:e});if(s)return b(a,s,r),f.getDOMItemFromPoint(s,r.board)}t=g.getAdjEdgeNonHitCells(o[0].point,r.board)}var c=t.length?t:g.getAllNonHitCells(r.board).filter(function(e){return g.filterAdjacentPoints(e)}),l=c[d.randomInteger(c.length)];return b(c,l,r),f.getDOMItemFromPoint(l,r.board)}(o))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=c),exports=Object.assign(exports,c))}.call(window||base||{}),function(){var e=this||{},t=e.gameStart||{},r={};(e.gameStart=r).noConflict=function(){return e.gameStart=t,r};var s=e.jDomCore;void 0===s&&("undefined"!=typeof require?s=require("../jDom/core/core.js"):console.error("setup.js requires jDom/core/core"));var c=e.jDomCoreDom;void 0===c&&("undefined"!=typeof require?c=require("../jDom/core/dom/core.js"):console.error("setup.js requires jDom/core/dom/core"));var l=e.jDomMatrixCore;void 0===l&&("undefined"!=typeof require?l=require("../jDom/matrix/core.js"):console.error("setup.js requires jDom/matrix/core"));var d=e.jDomMatrixObjects;void 0===d&&("undefined"!=typeof require?d=require("../jDom/matrix/objects.js"):console.error("setup.js requires jDom/matrix/objects"));var m=e.gameLayout;void 0===m&&("undefined"!=typeof require?m=require("./layout.js"):console.error("setup.js requires game/layout"));var f=e.gamePieces;void 0===f&&("undefined"!=typeof require?f=require("./pieces.js"):console.error("setup.js requires game/pieces"));var u=e.gameUtils;void 0===u&&("undefined"!=typeof require?u=require("./functions.js"):console.error("setup.js requires game/functions"));var p=e.gameActions;void 0===p&&("undefined"!=typeof require?p=require("./actions.js"):console.error("setup.js requires game/actions"));var a=function(e,t){var r,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:(r=e,n=t,l.randDirection([d.point(1,0,0),d.point(0,1,0),d.point(0,0,1)].filter(function(e){return r[l.getAxisOfCoord(e,1)]>n})));return{start:l.randomStart(t,o,e),dir:o}},g=s.curry(function(e,r){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var t;return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];return s.mergeObjects(f.ship(e.name),{parts:t.map(function(e){return p.setShip(r,e,n)})})}(e,(t=l).getPointsLine.apply(t,_toConsumableArray(function e(t,r,n){var o,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:a(n,r);return 0===l.getHighAbsoluteCoord(i.dir)?[d.point(0,0,0),d.point(0,0,0)]:(o=l).checkInBetween.apply(o,[i.start,l.lineEndPoint(i.start,r,i.dir)].concat([t,u.checkIfShipCell]))?e(t,r,n):[i.start,l.lineEndPoint(i.start,r,i.dir)]}(r,e.size,l.getAxisLengths(r)))),r,n)})})([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]);r.beginRound=function(e,t){e.preventDefault();var r=c.getTopParentItem(t),n=parseInt(c.getChildrenByName("human-players",t)[0].element.value),o=parseInt(c.getChildrenByName("robot-players",t)[0].element.value);if(n<0||100<n||o<0||100<o)return!1;var i=c.getChildrenByName("first-go-first",t)[0].element.checked;0===(n=n<0?0:n)&&(o=o<2?2:o),1===n&&(o=o<1?1:o),c.removeChild(c.getChildrenByClass("main-menu",r.body)[0],r.body);var u=c.renderHTML(m.boards(function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&r<1)return n;var o=f.playerSet({},"Player "+(n.length+1));return o.isRobot=t<=0,o.board=l.bindPointData(d.square({x:[f.waterTile(o,n)],matrixProps:[{eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}]},10)),o.shipFleet=g(o.board,!1),o.playerStats=f.playerStats(o,Math.round(100*o.status)/100+"%"),o.children=[o.board,o.playerStats],n.push(o),e(--t,t<0?--r:r,n)}(n,o)),r).children,a=p.updatePlayer(i?u[0]:u[s.randomInteger(u.length)]);return a.isRobot&&p.computerAttack(a,u),!1},r.main=function(e){for(var t=e.body.children.length-1;0<=t;--t)c.removeChild(e.body.children[t],e.body);return c.renderHTML(m.mainMenu(),e),e},r.restart=function(e,t){return r.main(c.getTopParentItem(t))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameMain||{},r={};(e.gameMain=r).noConflict=function(){return e.gameMain=t,r};var n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("../jDom/core/dom/objects.js"):console.error("main.js requires jDom/core/dom/objects"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("../jDom/core/dom/core.js"):console.error("main.js requires jDom/core/dom/core"));var i=e.gameActions;void 0===i&&("undefined"!=typeof require?i=require("./actions.js"):console.error("main.js requires game/actions"));var u=e.gameStart;void 0===u&&("undefined"!=typeof require?u=require("./setup.js"):console.error("main.js requires game/setup"));var a=u.main(n.documentDOMItem({beginRound:u.beginRound,attackListener:i.attackListener,restart:u.restart}));if(console.log(a),"undefined"==typeof document||!(document instanceof HTMLDocument)){var s=o.getChildrenByClass("main-menu-form",a.body);o.getChildrenFromAttribute("type","submit",s[0])[0].element.click()}"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{});
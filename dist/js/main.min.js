"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){var e=this,t=e.jDomCore,n={noConflict:function(){return e.jDomCore=t,n}},r=function(e){return function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.length>=e.length?e.apply(void 0,r):function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(void 0,[].concat(r,n))}}};n.curry=r;var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,n):Object.keys(e).reduce(function(n,r){return n[r]=t.apply(void 0,_toConsumableArray([e[r],r,e].slice(0,t.length||2))),n},n||{})};n.mapObject=i;n.filterObject=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,n):Object.keys(e).reduce(function(n,r){return t.apply(void 0,_toConsumableArray([e[r],r,e].slice(0,t.length||2)))?n[r]=e[r]:delete n[r],n},n||{})};n.reduceObject=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,n):Object.keys(e).reduce(function(n,r){return t.apply(void 0,_toConsumableArray([n,e[r],r,e].slice(0,t.length||2)))},n)};var a=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};n.notEmptyObjectOrArray=a;var o=function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return function(r,a){return t.apply(void 0,_toConsumableArray([r,a].slice(0,t.length)))?r:n.apply(void 0,_toConsumableArray([e[a],r].slice(0,n.length||2)).concat(i))}},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r){return!e[r]||/^(parentItem|listenerArgs|element)$/.test(r)||!!t&&t(n,r)}},s=function e(t,n){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a(n)?function(e,t,n,a){return i(t,o(e,u(e,r(g)(n.concat([t]))),a,n.concat([t])))}(t,n,s,e):t},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("object"===(void 0===t?"undefined":_typeof(t))){if(g(n,t))return;n.push(t)}return t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s(JSON.parse(JSON.stringify(e,function(e,n){return c(e,n,t)})),e,t=[])};n.cloneObject=l;var d=function(e,t,n){return a(n)?i(n,o(t,u(t),e),/mutable/i.test(e.name)?t:l(t)):n};n.mergeObjects=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 2===n.length?d(e,n[0],n[1]):1===n.length?l(n[0]):n.reduce(r(d)(e),{})};var m=function e(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return 2===n.length?d(e,n[0],n[1]):1===n.length?n[0]:n.reduce(r(d)(e),{})};n.mergeObjectsMutable=m;var f=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--r>0?e(t,t?n:l(n),r,i.concat([n])):i.concat([n])},h=r(f)(!1);n.buildArray=h;var p=r(f)(!0);n.buildArrayOfReferences=p;var g=function(e,t){return e.indexOf(t)>=0};n.inArray=g;var b=function(e,t,n){return e&&n>t||!e&&n<t?n:t};n.getMaxOrMin=b;var v=r(b)(!0);n.getMax=v;var y=r(b)(!1);n.getMin=y;n.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*n};n.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*n};var O=function(e,t){return e===t?0:e>t?1:-1};n.compare=O;n.compareArrays=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter(function(t,n){return!g(e,t)||e[n]!==t}).concat(e).reduce(function(r,i){return r[JSON.stringify(i,function(e,t){return c(e,t,n)})]=O(t.filter(function(e){return e===i}).length,e.filter(function(e){return e===i}).length),r},{})};n.queueTimeout=function e(){for(var t=arguments.length,n=Array(t>2?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.queue=e.queue||[],e.isRunning=e.isRunning||!1;var o={id:0,func:i,timeout:a,args:n,result:0};if(i&&e.queue.push(o),e.queue.length&&!e.isRunning){e.isRunning=!0;var u=e.queue.shift();return u.id=setTimeout(function(){return u.result=u.func.apply(u,_toConsumableArray(u.args)),e.isRunning=!1,e(!1)},u.timeout),u}return o};var k=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});i(n,function(t,n){return t.noConflict=function(){return e[n]=k[n],t}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=m(exports,n)):(n.jDomCore=n,e=m(e,n))}).call(void 0),function(){var e=this,t=e.jDomObjects,n={noConflict:function(){return e.jDomObjects=t,n}},r=e.jDomCore;void 0===r&&("undefined"!=typeof require?r=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=r.mergeObjectsMutable,a=r.mapObject,o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tagName,r=void 0===n?"div":n,i=t.attributes,a=void 0===i?[]:i,o=t.children,u=void 0===o?[]:o;_classCallCheck(this,e),this.tagName=r,this.attributes=[],this.children=u,this.style={};var s=!0,c=!1,l=void 0;try{for(var d,m=a[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var f=d.value,h=f.name,p=f.value;this[h]=p,this.attributes.concat([{name:h,value:p}])}}catch(e){c=!0,l=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw l}}return this}return _createClass(e,null,[{key:"generate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.tagName,r=void 0===n?"":n,i=t.attributes,a=void 0===i?[]:i,o=t.children;return new e({tagName:r,attributes:a,children:void 0===o?[]:o})}},{key:"appendChild",value:function(e){return this.children.concat([e]),e}},{key:"removeChild",value:function(e){return this.children.splice(this.children.indexOf(e),1)[0]}},{key:"hasAttribute",value:function(e){return"undefined"!==this.attributes.find(function(t){return t.name=e})}},{key:"setAttribute",value:function(e,t){(this.hasAttribute(e)||"undefined"===this[e])&&(this[e]=t,this.attributes.concat([{name:e,value:t}]))}},{key:"getAttribute",value:function(e){return this.attributes.find(function(t){return t.name=e})}},{key:"removeAttribute",value:function(e){this.hasAttribute(e)&&(delete this[e],this.attributes.find(function(t){return t.name=e}))}}]),e}();n.PseudoHTMLElement=o;this.HTMLElement||new o;var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.tagName,r=void 0===n?"":n,i=e.attributes,a=void 0===i?[]:i,u=e.children,s=void 0===u?[]:u;_classCallCheck(this,t);var c=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:r,attributes:a,children:s})),l=new o({tagName:"head"}),d=new o({tagName:"body"});return c.head=l,c.body=d,c.children=[new o({tagName:"html",children:[l,d]})],c}return _inherits(t,o),t}();n.PseudoHTMLDocument=u;var s=this.document||new u,c=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.apply(void 0,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(t))};n.DOMItem=c;var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return c({tagName:"html",attributes:{},element:s,eventListeners:t.reduce(function(e,t){return i(e,_defineProperty({},""+t.name,t))},{}),children:e,head:e[0],body:e[1]})}([c({tagName:"head",attributes:{},element:s.head,children:[]}),c({tagName:"body",attributes:{},element:s.body,children:[]})],e);return t.children=t.children.map(function(e){return c(e,{parentItem:t})}),t.head=t.children[0],t.body=t.children[1],c(t)};n.documentDOMItem=l,n.documentItem=l();var d=Object.keys(n).reduce(function(t,n){return t[n]=e[n],t},{});a(n,function(t,n){return t.noConflict=function(){return e[n]=d[n],t}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports=i(exports,n)):(n.jDomObjects=n,e=i(e,n))}.call(void 0);var elementHasAttribute=function(e,t,n){return e instanceof HTMLElement&&(t in e?/^(style|className)$/.test(t)?compareArrays("string"==typeof n?e[t].split(" "):Object.keys(e[t]),"string"==typeof n?n.split(" "):Object.keys(n)):e[t]===n:e.hasAttribute(t)&&e.getAttribute(t)===n)},elementChanges=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?generateElement(e):(e.attributes=filterObject(e.attributes,function(t,n){return filterObject(mapObject(e.attributes,function(t,n){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===n?filterObject(elementHasAttribute(e.element,n,t),function(e){return 1===e}):!elementHasAttribute(e.element,n,t)}),function(e){return!!e})[n]}),e)},updateElement=function(e){return e.element instanceof HTMLElement&&(e.attributes=mapObject(elementChanges(e).attributes,function(t,n){return n in e.element?notEmptyObjectOrArray(t)?e.attributes[n]=mapObject(filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,n){return e.element.style[n]=t},e.element.style):e.element[n]=t:(e.element.setAttribute(n,t),t)})),e},updateElements=function e(t){return(t=updateElement(t)).children.map(function(t){return e(t)}),t},generateElement=function(e){return e.element=document.createElement(e.tagName),updateElement(e)},bindAllElements=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem;return mapObject(DOMItem(t),function(e){return e},t),t.element=t.element&&t.element instanceof HTMLElement?t.element:bindElement(t).element,t.parentItem=n.body||n,t.children.map(function(n){return e(n,t)}),t},bindElement=function(e){return e.element&&e.element instanceof HTMLElement||(e.element=generateElement(e).element),e},buildHTML=function e(t){return t.children.map(function(n){return t.element.appendChild(e(n).element)}),t},appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem.body,n=t.body?t.body:t;return inArray(n.children,e)||n.children.push(e),buildHTML(n)},appendHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem.body,n=t.body?t.body:t;return inArray(n.children,e)||n.children.push(e),e.element&&e.element instanceof HTMLElement||(e=bindElement(e)),n.element.appendChild(e.element),e},removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)},registerListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem;return t.eventListeners[e.name]=t.head.parentItem.eventListeners[e.name]=t.body.parentItem.eventListeners[e.name]=e},registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem;return mergeObjects(t,{eventListeners:e.reduce(function(e,n){return mergeObjects(e,_defineProperty({},""+n.name,registerListener(n,t)))},t.eventListeners)})},retrieveListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem;return inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}},listenerOptions=function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t},assignListener=function(e,t,n,r){return t.addEventListener?t.addEventListener(e,n,listenerOptions(r)):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n,n},appendListeners=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.children=t.children||[],t.eventListeners&&t.eventListeners[n]&&(t.eventListeners[n]={listenerFunc:r,listenerArgs:i,listenerOptions:a}),t.children.map(function(t){return e(t,n,r,i,a)}),t},bindAllListeners=function e(t){return t.eventListeners&&Object.keys(t.eventListeners).length&&t.element instanceof HTMLElement&&mapObject(t.eventListeners,function(e,n){return assignListener(n,t.element,function(n){return e.listenerFunc(n,t,e.listenerArgs)},e.listenerOptions)}),t.children=t.children.map(function(t){return e(t)}),t},bindListeners=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element instanceof HTMLElement&&mapObject(e.eventListeners,function(t,n){return assignListener(n,e.element,function(n){return t.listenerFunc(n,e,t.listenerArgs)},t.listenerOptions)}),e},getChildrenFromAttribute=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:documentItem.body;return r.attributes[t]&&r.attributes[t]===n?r.children.reduce(function(r,i){return r.concat(e(t,n,i))},[]).concat([r]):r.children.reduce(function(r,i){return r.concat(e(t,n,i))},[])},getChildrenByClass=curry(getChildrenFromAttribute)("className"),getChildrenByName=curry(getChildrenFromAttribute)("name"),getParentsFromAttribute=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:documentItem.body;return Object.keys(r.parentItem).length?r.attributes[t]&&r.attributes[t]===n?e(t,n,r.parentItem).concat([r]):e(t,n,r.parentItem):[]},getParentsByClass=curry(getParentsFromAttribute)("className"),getParentsByName=curry(getParentsFromAttribute)("name"),getTopParentItem=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t},renderHTML=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:documentItem;return mapObject(DOMItem(t),function(e){return e},t),t.element=t.element&&t.element instanceof HTMLElement?t.element:bindElement(t).element,t.eventListeners=mapObject(t.eventListeners,function(e){return mergeObjects(e,{listenerFunc:retrieveListener(e.listenerFunc,getTopParentItem(n))})}),t.parentItem=n.body||n,(t=bindListeners(appendHTML(t,n))).children.map(function(n){return e(n,t)}),t},point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},tile=function(){return{point:{}}},matrix=function(e,t,n){for(var r=arguments.length,i=Array(r>4?r-4:0),a=4;a<r;a++)i[a-4]=arguments[a];var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return DOMItem({tagName:"div",attributes:{className:"matrix"},children:buildArray(DOMItem.apply(void 0,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:buildArray(DOMItem.apply(void 0,[{axis:"y",tagName:"div",attributes:{className:"row"},children:buildArray(DOMItem.apply(void 0,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(i,[e])),t)}].concat(i)),n)}].concat(i)),o)})},square=function(e,t){return matrix(e,t,t)},cube=function(e,t){return matrix(e,t,t,t)},bindPointData=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:point(0,0,0);return mergeObjects(t,t.point?{point:cloneObject(n)}:{children:t.children.map(function(t,r){return e(t,mergeObjects(n,_defineProperty({},t.axis,r)))})})},nextCell=function(e,t){return point(e.x+t.x,e.y+t.y,e.z+t.z)},pointDifference=function(e,t){return point(t.x-e.x,t.y-e.y,t.z-e.z)},checkEqualPoints=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},pointHasNegative=function(e){return!!Object.keys(filterObject(e,function(e,t){return e<0})).length},getHighAbsoluteCoord=function(e){return reduceObject(e,curry(getMaxOrMin)(!pointHasNegative(e)),0)},getAxisOfCoord=function(e,t){return Object.keys(e).filter(function(n){return e[n]===t})},getHighAbsoluteCoordAxis=function(e){return getAxisOfCoord(e,getHighAbsoluteCoord(e))},pointDirection=function(e,t){return mergeObjects(point(0,0,0),_defineProperty({},""+getHighAbsoluteCoordAxis(pointDifference(e,t))[0],pointHasNegative(pointDifference(e,t))?-1:1))},randomStart=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:point(10,10,10);return point(randomInteger(n.x-(e-1)*t.x),randomInteger(n.y-(e-1)*t.y),randomInteger(n.z-(e-1)*t.z))},lineEndPoint=function(e,t,n){return point(e.x+n.x*(t-1),e.y+n.y*(t-1),e.z+n.z*(t-1))},getPointsLine=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return checkEqualPoints(t,n)?r.concat([t]):e(nextCell(t,pointDirection(t,n)),n,r.concat([t]))},getPointsLines=function(e){return e.reduce(function(e,t){return e.concat(getPointsLine.apply(void 0,_toConsumableArray(t)))},[])},testPointsBetween=function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return getPointsLine(e,t).filter(function(e,t,n){return 0!==t&&t!==n.length-1||i}).reduce(function(e,t){return mergeObjects(e,_defineProperty({},""+!!r(t,n),[t]))},{true:[],false:[]})},getInBetween=function(e,t,n,r){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return mergeObjects({true:[],false:[]},testPointsBetween(e,t,n,r,i))},checkInBetween=function(e,t,n,r){return!(!(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])||!r(e,n)&&!r(t,n))||!!testPointsBetween(e,t,n,r).true.length},getAxisLengths=function(e){return point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)},randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[randomInteger(e.length)]:point(0,0,0)},checkValidPoint=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)},getDOMItemFromPoint=function(e,t){return!!checkValidPoint(e,t)&&t.children[e.z].children[e.y].children[e.x]},getAllPoints=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?n.concat([t.point]):t.children.reduce(function(t,n){return t.concat(e(n,[]))},[])},adjacentPoints=function(e,t){return getPointsLines([[point(-1,1,1),point(1,-1,-1)],[point(1,1,1),point(-1,1,-1)],[point(-1,-1,1),point(1,-1,1)],[point(1,0,0),point(1,1,-1)],[point(-1,1,0),point(1,1,0)]]).concat([point(0,0,1),point(1,0,0),point(-1,0,-1),point(0,0,-1)]).map(function(t){return nextCell(e,t)}).filter(function(n){return checkValidPoint(nextCell(e,n),t)})},adjacentEdgePoints=function(e,t){return[point(-1,0,0),point(1,0,0),point(0,-1,0),point(0,1,0),point(0,0,-1),point(0,0,1)].map(function(t){return nextCell(e,t)}).filter(function(e){return checkValidPoint(e,t)})},mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}},boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}},checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip},checkIfHitCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit},getAllNonHitCells=function(e){return getAllPoints(e).filter(function(t){return!checkIfHitCell(t,e)})},getAdjNonHitCells=function(e,t){return adjacentPoints(e,t).filter(function(e){return!checkIfHitCell(e,t)})},getAdjEdgeNonHitCells=function(e,t){return adjacentEdgePoints(e,t).filter(function(e){return!checkIfHitCell(e,t)})},getALowStatusItem=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})},getLowStatusItems=function(e){return e.filter(function(t){return t.status<=getALowStatusItem(e).status})},getBrokenItems=function(e){return e.filter(function(e){return e.status<100&&e.status>0})},getBrokenShipsPlayers=function(e){return e.filter(function(e){return getBrokenItems(e.shipFleet).length})},numDamangedParts=function(e,t){return e-Math.ceil(t/100*e)},filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)},buildShip=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mergeObjects(ship(e.name),{parts:t.map(function(e){return setShip(n,e,r)})})},selectShipDirection=function(e,t){return randDirection([point(1,0,0),point(0,1,0),point(0,0,1)].filter(function(n){return e[getAxisOfCoord(n,1)]>t}))},randomStartDir=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:selectShipDirection(e,t);return{start:randomStart(t,n,e),dir:n}},generateStartEnd=function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:randomStartDir(r,n);return 0===getHighAbsoluteCoord(i.dir)?[point(0,0,0),point(0,0,0)]:checkInBetween.apply(void 0,[i.start,lineEndPoint(i.start,n,i.dir)].concat([t,checkIfShipCell]))?e(t,n,r):[i.start,lineEndPoint(i.start,n,i.dir)]},generateRandomFleet=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){return buildShip(e,getPointsLine.apply(void 0,_toConsumableArray(generateStartEnd(t,e.size,getAxisLengths(t)))),t,n)})},buildPlayers=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&n<1)return r;var i=playerSet({},"Player "+(r.length+1));return i.isRobot=t<=0,i.board=bindPointData(square(waterTile(i,r),10)),i.shipFleet=defaultFleet(i.board,!1),i.playerStats=playerStats(i,Math.round(100*i.status)/100+"%"),i.children=[i.board,i.playerStats],r.push(i),e(--t,t<0?--n:n,r)},beginRound=function(e,t){e.preventDefault();var n=getTopParentItem(t),r=parseInt(getChildrenByName("human-players",t)[0].element.value),i=parseInt(getChildrenByName("robot-players",t)[0].element.value);if(r<0||r>100||i<0||i>100)return!1;var a=getChildrenByName("first-go-first",t)[0].element.checked;0===(r=r<0?0:r)&&(i=i<2?2:i),1===r&&(i=i<1?1:i),removeChild(getChildrenByClass("main-menu",n.body)[0],n.body);var o=renderHTML(boards(buildPlayers(r,i)),n).children,u=updatePlayer(a?o[0]:o[randomInteger(o.length)]);return u.isRobot&&computerAttack(u,o),!1},main=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:documentItem,t=e.body.children.length-1;t>=0;--t)removeChild(e.body.children[t],e.body);return renderHTML(mainMenu(),e),e},restart=function(e,t){return main(getTopParentItem(t))},gameTile=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}},waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return mergeObjects(gameTile(e,t),tile())},shipTile=function(){return{hasShip:!0}},ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}},hitTile=function(){return{isHit:!0}},playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}},playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}},defaultFleet=curry(generateRandomFleet)([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]),selectTargetPlayer=function(e){var t=getBrokenShipsPlayers(e).length?getBrokenShipsPlayers(e):getLowStatusItems(e);return 1===t.length?t[0]:t[randomInteger(t.length)]},selectTargetCoord=function(e){var t=getBrokenItems(e.shipFleet),n=[];if(t.length){var r=t.filter(function(e){return numDamangedParts(e.parts.length,e.status)>1}),i=getALowStatusItem(r.length?r:t).parts.filter(function(t){return checkIfHitCell(t.point,e.board)});if(r.length){for(var a=0;a<i.length;++a){var o=getInBetween(i[0].point,i[a].point,e.board,checkIfHitCell,!1);if(o.false.length)return displayTargets(o.false,o.false[0],e),getDOMItemFromPoint(o.false[0],e.board)}var u=(pointDifference(i[0].point,i[1].point).x>0?[point(-1,0,0),point(1,0,0)]:[point(0,-1,0),point(0,1,0)]).map(function(e,t){return nextCell(i[(i.length-1)*t].point,e)}).filter(function(t){return checkValidPoint(t,e.board)}).filter(function(t){return!checkIfHitCell(t,e.board)}),s=u.reduce(function(t,n){return checkIfHitCell(t,e.board)?n:t});if(s)return displayTargets(u,s,e),getDOMItemFromPoint(s,e.board)}n=getAdjEdgeNonHitCells(i[0].point,e.board)}var c=n.length?n:getAllNonHitCells(e.board).filter(function(e){return filterAdjacentPoints(e)}),l=c[randomInteger(c.length)];return displayTargets(c,l,e),getDOMItemFromPoint(l,e.board)},displayTargets=function(e,t,n){return[queueTimeout(resetTargets,0,{targets:e,victim:n}),queueTimeout(resetTargets,200,{targets:e,target:t,victim:n})]},resetTargets=function(e){return e.victim.board.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return updateElement(mergeObjects(getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return updateElement(mergeObjects(getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e},computerAttack=function(e,t){var n=selectTargetPlayer(t.filter(function(e){return!e.attacker}));return attackFleet.isLocked=!1,attackFleet(selectTargetCoord(n))},configureHtml=function(e,t){return t?(attackFleet.isLocked=!0,queueTimeout(function(){return e.isHit&&(e.attributes.style.backgroundColor=e.hasShip?"red":"white"),e=updateElement(e),attackFleet.isLocked=!1,e},0)):(e.isHit&&(e.attributes.style.backgroundColor=e.hasShip?"red":"white"),e=updateElement(e)),e},update3dCell=function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return configureHtml(mergeObjectsMutable(t.children[i].children[r].children[n],e),a)},setViewShip=curry(update3dCell)(mergeObjects(shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),setHiddenShip=curry(update3dCell)(shipTile()),setHit=curry(update3dCell)(hitTile()),setShip=function(e,t,n){return n?setViewShip(e,t.x,t.y,t.z):setHiddenShip(e,t.x,t.y,t.z)},updatePlayerStats=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=updateElements(mergeObjects(e.playerStats,playerStats(e,t))),e},updatePlayer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,n&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,attackFleet.isLocked=!0,e.attacker?(queueTimeout(function(){return attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):queueTimeout(function(){return attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return updateElement(mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),queueTimeout(function(){return updatePlayerStats(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e},endGame=function(e){var t=getTopParentItem(e),n=e.parentItem.children;return n.map(function(e){return updatePlayerStats(e)}),e=updatePlayerStats(e,"WINNER"),renderHTML(finalScore(n),t),[e]},findNextAttacker=function e(t,n,r){var i=n.length>1&&r>=n.length-1?n[0]:n[++r];return i.status>0?i:e(t,n,r)},getNextAttacker=function(e,t,n){return n?e:updatePlayer(findNextAttacker(e,t,t.indexOf(e)),n)},updateScore=function(e,t,n,r,i){var a=(r=r.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(a=updatePlayer(a,t,n),r.length<2)return queueTimeout(function(){return endGame(r[0])},200);var o=getNextAttacker(a,r,t);return o.isRobot&&queueTimeout(computerAttack,0,o,r),r},attackFleet=function e(t){e.isLocked=e.isLocked||!1;var n=getParentsByClass("player",t)[0],r=getParentsByClass("boards",t)[0].children;if(n.status<=0||n.attacker||e.isLocked)return r;var i=setHit(n.board,t.point.x,t.point.y,t.point.z,r.reduce(function(e,t){return e.attacker?e:t}).isRobot),a=!1,o=0;if(i.hasShip){var u=0;n.shipFleet.map(function(e){var n=e.parts.filter(function(n){return checkEqualPoints(n.point,t.point)&&(a=e),!n.isHit});return e.status=n.length/e.parts.length*100,u+=e.status,e}),n.status=u/n.shipFleet.length}return a&&(n=updatePlayerStats(n,Math.round(100*n.status)/100+"%"),o=a.status<=0?a.parts.length:0),updateScore(n,i.hasShip,o,r,t.point)},attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return attackFleet(t)};!function(){var e=main(documentDOMItem([beginRound,attackListener,restart]));console.log(e)}();
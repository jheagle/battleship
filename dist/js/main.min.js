"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(function(){var e=this,t=e.jDomCore,r={noConflict:function(){return e.jDomCore=t,r}},n=function(e){return function t(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return n.length>=e.length?e.apply(void 0,n):function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(void 0,[].concat(n,r))}}};r.curry=n;r.pipe=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}};var o=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,r):Object.keys(e).reduce(function(r,n){return r[n]=t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2))),r},r||{})};r.mapObject=o;r.filterObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2)))?r[n]=e[n]:delete r[n],r},r||{})};r.reduceObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([r,e[n],n,e].slice(0,t.length||2)))},r)};var i=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};r.notEmptyObjectOrArray=i;var u=function(e,t,r){for(var n=arguments.length,o=Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];return function(n,i){return t.apply(void 0,_toConsumableArray([n,i].slice(0,t.length)))?n:r.apply(void 0,_toConsumableArray([e[i],n].slice(0,r.length||2)).concat(o))}},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r,n){return!e[n]||/^(parentItem|listenerArgs|element)$/.test(n)||!!t&&t(r,n)}},s=function e(t,r){var s,c,l,d,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return i(r)?(l=m,d=e,o(c=r,u(s=t,a(s,n(g)(l.concat([c]))),d,l.concat([c])))):t},c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("object"===(void 0===t?"undefined":_typeof(t))){if(g(r,t))return;r.push(t)}return t},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return s(JSON.parse(JSON.stringify(e,function(e,r){return c(e,r,t)})),e,[])};r.cloneObject=l;var d=function(e,t,r){return i(r)?o(r,u(t,a(t),e),/mutable/i.test(e.name)?t:l(t)):r};r.mergeObjects=function e(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return 2===r.length?d(e,r[0],r[1]):1===r.length?l(r[0]):r.reduce(n(d)(e),{})};r.mergeObjectsMutable=function e(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return 2===r.length?d(e,r[0],r[1]):1===r.length?r[0]:r.reduce(n(d)(e),{})};var m=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--n>0?e(t,t?r:l(r),n,o.concat([r])):o.concat([r])},f=n(m)(!1);r.buildArray=f;var p=n(m)(!0);r.buildArrayOfReferences=p;var g=function(e,t){return e.indexOf(t)>=0};r.inArray=g;var v=function(e,t,r){return e&&r>t||!e&&r<t?r:t};r.getMaxOrMin=v;var h=n(v)(!0);r.getMax=h;var b=n(v)(!1);r.getMin=b;r.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*r};r.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*r};var y=function(e,t){return e===t?0:e>t?1:-1};r.compare=y;r.compareArrays=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.filter(function(t,r){return!g(e,t)||e[r]!==t}).concat(e).reduce(function(n,o){return n[JSON.stringify(o,function(e,t){return c(e,t,r)})]=y(t.filter(function(e){return e===o}).length,e.filter(function(e){return e===o}).length),n},{})};r.trace=function(e){return function(t){return console.info(e+": ",t),t}};r.queueTimeout=function e(){for(var t=arguments.length,r=Array(t>2?t-2:0),n=2;n<t;n++)r[n-2]=arguments[n];var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.queue=e.queue||[],e.isRunning=e.isRunning||!1;var u={id:0,func:o,timeout:i,args:r,result:0};if(o&&e.queue.push(u),e.queue.length&&!e.isRunning){e.isRunning=!0;var a=e.queue.shift();return a.id=setTimeout(function(){return a.result=a.func.apply(a,_toConsumableArray(a.args)),e.isRunning=!1,e(!1)},a.timeout),a}return u};var j=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=j[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCore=r,e=Object.assign(e,r))}).call(void 0),function(){var e=this,t=e.jDomObjects,r={noConflict:function(){return e.jDomObjects=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var o=e.document;if(void 0===o)if("undefined"!=typeof require){var i=require("./pseudo-dom.js");e=i.generate(),o=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var u=function(){for(var e,t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(r))};r.DOMItem=u;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return u({tagName:"html",attributes:{},element:o,eventListeners:t.reduce(function(e,t){return n.mergeObjectsMutable(e,_defineProperty({},""+t.name,t))},{}),children:e,head:e[0],body:e[1]})}([u({tagName:"head",attributes:{},element:o.head,children:[]}),u({tagName:"body",attributes:{},element:o.body,children:[]})],e);return t.children=t.children.map(function(e){return u(e,{parentItem:t})}),t.head=t.children[0],t.body=t.children[1],u(t)};r.documentDOMItem=a,r.documentItem=a();var s=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=s[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomObjects=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomCoreDom,r={noConflict:function(){return e.jDomCoreDom=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-dom.js requires jDomCore"));var o=e.jDomObjects,i=e.document;if(void 0===i)if("undefined"!=typeof require){var u=require("./pseudo-dom.js");e=u.generate(),i=e.document}else console.error("objects-dom.js requires jDomPseudoDom");void 0===o&&("undefined"!=typeof require?o=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));var a=function(e,t,r){return!!e.style&&(t in e?/^(style|className)$/.test(t)?n.compareArrays("string"==typeof r?e[t].split(" "):Object.keys(e[t]),"string"==typeof r?r.split(" "):Object.keys(r)):e[t]===r:e.hasAttribute(t)&&e.getAttribute(t)===r)};r.elementHasAttribute=a;var s=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?l(e):(e.attributes=n.filterObject(e.attributes,function(t,r){return n.filterObject(n.mapObject(e.attributes,function(t,r){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===r?n.filterObject(a(e.element,r,t),function(e){return 1===e}):!a(e.element,r,t)}),function(e){return!!e})[r]}),e)};r.elementChanges=s;var c=function(e){return e.element.style&&(e.attributes=n.mapObject(s(e).attributes,function(t,r){return r in e.element?n.notEmptyObjectOrArray(t)?n.mapObject(n.filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,r){return e.element.style[r]=t,t},e.element.style):(e.element[r]=t,t):(e.element.setAttribute(r,t),t)})),e};r.updateElement=c;r.updateElements=function e(t){return(t=c(t)).children.map(function(t){return e(t)}),t};var l=function(e){return e.element=i.createElement(e.tagName),c(e)};r.generateElement=l;r.bindAllElements=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mapObject(o.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.parentItem=r.body||r,t.children.map(function(r){return e(r,t)}),t};var d=function(e){return e.element&&e.element.style||(e.element=l(e).element),e};r.bindElement=d;var m=function e(t){return t.children.map(function(r){return t.element.appendChild(e(r).element)}),t};r.buildHTML=m;r.appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),m(r)};var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem.body,r=t.body?t.body:t;return n.inArray(r.children,e)||r.children.push(e),e.element&&e.element.style||(e=d(e)),r.element.appendChild(e.element),e};r.appendHTML=f;r.removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem;return Object.assign(t.eventListeners,_defineProperty({},e.name,e))};r.registerListener=p;r.registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mergeObjects(t,{eventListeners:e.reduce(function(e,r){return n.mergeObjects(e,_defineProperty({},""+r.name,p(r,t)))},t.eventListeners)})};var g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};r.retrieveListener=g;var v=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t}(n)):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r,r};r.assignListener=v;r.appendListeners=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.children=t.children||[],t.eventListeners&&t.eventListeners[r]&&(t.eventListeners[r]={listenerFunc:n,listenerArgs:o,listenerOptions:i}),t.children.map(function(t){return e(t,r,n,o,i)}),t};r.bindAllListeners=function e(t){return t.eventListeners&&Object.keys(t.eventListeners).length&&t.element.style&&n.mapObject(t.eventListeners,function(e,r){return v(r,t.element,function(r){return e.listenerFunc(r,t,e.listenerArgs)},e.listenerOptions)}),t.children=t.children.map(function(t){return e(t)}),t};var h=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&n.mapObject(e.eventListeners,function(t,r){return v(r,e.element,function(r){return t.listenerFunc(r,e,t.listenerArgs)},t.listenerOptions)}),e};r.bindListeners=h;var b=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.documentItem.body;return n.attributes[t]&&n.attributes[t]===r?n.children.reduce(function(n,o){return n.concat(e(t,r,o))},[]).concat([n]):n.children.reduce(function(n,o){return n.concat(e(t,r,o))},[])};r.getChildrenFromAttribute=b;var y=n.curry(b)("className");r.getChildrenByClass=y;var j=n.curry(b)("name");r.getChildrenByName=j;var O=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.documentItem.body;return Object.keys(n.parentItem).length?n.attributes[t]&&n.attributes[t]===r?e(t,r,n.parentItem).concat([n]):e(t,r,n.parentItem):[]},x=n.curry(O)("className");r.getParentsByClass=x;var C=n.curry(O)("name");r.getParentsByName=C;var q=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};r.getTopParentItem=q;r.renderHTML=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.documentItem;return n.mapObject(o.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.eventListeners=n.mapObject(t.eventListeners,function(e){return n.mergeObjects(e,{listenerFunc:g(e.listenerFunc,q(r))})}),t.parentItem=r.body||r,(t=h(f(t,r))).children.map(function(r){return e(r,t)}),t};var D=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=D[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCoreDom=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomObjectsMatrix,r={noConflict:function(){return e.jDomObjectsMatrix=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));r.point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}};r.tile=function(){return{point:{}}};var i=function(e,t,r){for(var i=arguments.length,u=Array(i>4?i-4:0),a=4;a<i;a++)u[a-4]=arguments[a];var s,c,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o.DOMItem({tagName:"div",attributes:{className:"matrix"},children:n.buildArray((s=o).DOMItem.apply(s,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:n.buildArray((c=o).DOMItem.apply(c,[{axis:"y",tagName:"div",attributes:{className:"row"},children:n.buildArray((l=o).DOMItem.apply(l,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(u,[e])),t)}].concat(u)),r)}].concat(u)),d)})};r.matrix=i;r.square=function(e,t){return i(e,t,t)};r.cube=function(e,t){return i(e,t,t,t)};var u=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=u[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomObjectsMatrix=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomCoreMatrix,r={noConflict:function(){return e.jDomCoreMatrix=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-matrix.js requires jDomCore"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("core-matrix.js requires jDomObjectsMatrix"));r.bindPointData=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.point(0,0,0);return n.mergeObjects(t,t.point?{point:n.cloneObject(r)}:{children:t.children.map(function(t,o){return e(t,n.mergeObjects(r,_defineProperty({},t.axis,o)))})})};var i=function(e,t){return o.point(e.x+t.x,e.y+t.y,e.z+t.z)};r.nextCell=i;var u=function(e,t){return o.point(t.x-e.x,t.y-e.y,t.z-e.z)};r.pointDifference=u;var a=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z};r.checkEqualPoints=a;var s=function(e){return!!Object.keys(n.filterObject(e,function(e){return e<0})).length};r.pointHasNegative=s;var c=function(e){return n.reduceObject(e,n.curry(n.getMaxOrMin)(!s(e)),0)};r.getHighAbsoluteCoord=c;var l=function(e,t){return Object.keys(e).filter(function(r){return e[r]===t})};r.getAxisOfCoord=l;var d=function(e){return l(e,c(e))};r.getHighAbsoluteCoordAxis=d;var m=function(e,t){return n.mergeObjects(o.point(0,0,0),_defineProperty({},""+d(u(e,t))[0],s(u(e,t))?-1:1))};r.pointDirection=m;r.randomStart=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.point(10,10,10);return o.point(n.randomInteger(r.x-(e-1)*t.x),n.randomInteger(r.y-(e-1)*t.y),n.randomInteger(r.z-(e-1)*t.z))};r.lineEndPoint=function(e,t,r){return o.point(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))};var f=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a(t,r)?n.concat([t]):e(i(t,m(t,r)),r,n.concat([t]))};r.getPointsLine=f;var p=function(e){return e.reduce(function(e,t){return e.concat(f.apply(void 0,_toConsumableArray(t)))},[])};r.getPointsLines=p;var g=function(e,t,r,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return f(e,t).filter(function(e,t,r){return 0!==t&&t!==r.length-1||i}).reduce(function(e,t){return n.mergeObjects(e,_defineProperty({},""+!!o(t,r),[t]))},{true:[],false:[]})};r.testPointsBetween=g;r.getInBetween=function(e,t,r,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.mergeObjects({true:[],false:[]},g(e,t,r,o,i))};r.checkInBetween=function(e,t,r,n){return!(arguments.length>4&&void 0!==arguments[4]&&!arguments[4]||!n(e,r)&&!n(t,r))||!!g(e,t,r,n).true.length};r.getAxisLengths=function(e){return o.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)};r.randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[n.randomInteger(e.length)]:o.point(0,0,0)};var v=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)};r.checkValidPoint=v;r.getDOMItemFromPoint=function(e,t){return!!v(e,t)&&t.children[e.z].children[e.y].children[e.x]};r.getAllPoints=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?r.concat([t.point]):t.children.reduce(function(t,r){return t.concat(e(r,[]))},[])};r.adjacentPoints=function(e,t){return p([[o.point(-1,1,1),o.point(1,-1,-1)],[o.point(1,1,1),o.point(-1,1,-1)],[o.point(-1,-1,1),o.point(1,-1,1)],[o.point(1,0,0),o.point(1,1,-1)],[o.point(-1,1,0),o.point(1,1,0)]]).concat([o.point(0,0,1),o.point(1,0,0),o.point(-1,0,-1),o.point(0,0,-1)]).map(function(t){return i(e,t)}).filter(function(r){return v(i(e,r),t)})};r.adjacentEdgePoints=function(e,t){return[o.point(-1,0,0),o.point(1,0,0),o.point(0,-1,0),o.point(0,1,0),o.point(0,0,-1),o.point(0,0,1)].map(function(t){return i(e,t)}).filter(function(e){return v(e,t)})};var h=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=h[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomCoreMatrix=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.jDomLayout,r={noConflict:function(){return e.jDomLayout=t,r}};r.mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{name:"mainMenuForm",className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}};r.boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}};r.finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}};var n=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=n[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.jDomLayout=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gamePieces,r={noConflict:function(){return e.gamePieces=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("game-pieces.js requires jDomCore"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("game-pieces.js requires jDomObjectsMatrix"));r.waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.mergeObjects(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}}(e,t),o.tile())};r.shipTile=function(){return{hasShip:!0}};r.ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}};r.hitTile=function(){return{isHit:!0}};r.playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}};r.playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}};var i=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=i[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gamePieces=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameUtils,r={noConflict:function(){return e.gameUtils=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("functions.js requires jDomCore"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("./objects-dom.js"):console.error("functions.js requires jDomObjects"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("functions.js requires jDomCoreDom"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("functions.js requires jDomCoreMatrix"));var a=e.jDomObjectsMatrix;void 0===a&&("undefined"!=typeof require?a=require("./objects-matrix.js"):console.error("functions.js requires jDomObjectsMatrix"));var s=e.jDomLayout;void 0===s&&("undefined"!=typeof require?s=require("./layout.js"):console.error("functions.js requires jDomLayout"));var c=e.gamePieces;void 0===c&&("undefined"!=typeof require?c=require("./functions.js"):console.error("functions.js requires gamePieces"));var l=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip},d=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit};r.checkIfHitCell=d;r.getAllNonHitCells=function(e){return u.getAllPoints(e).filter(function(t){return!d(t,e)})};r.getAdjEdgeNonHitCells=function(e,t){return u.adjacentEdgePoints(e,t).filter(function(e){return!d(e,t)})};var m=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})};r.getALowStatusItem=m;r.getLowStatusItems=function(e){return e.filter(function(t){return t.status<=m(e).status})};var f=function(e){return e.filter(function(e){return e.status<100&&e.status>0})};r.getBrokenItems=f;r.getBrokenShipsPlayers=function(e){return e.filter(function(e){return f(e.shipFleet).length})};r.numDamangedParts=function(e,t){return e-Math.ceil(t/100*e)};r.filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)};var p=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(r=e,n=t,u.randDirection([a.point(1,0,0),a.point(0,1,0),a.point(0,0,1)].filter(function(e){return r[u.getAxisOfCoord(e,1)]>n})));return{start:u.randomStart(t,o,e),dir:o}},g=n.curry(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var o;return function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.mergeObjects(c.ship(e.name),{parts:t.map(function(e){return setShip(r,e,o)})})}(e,(o=u).getPointsLine.apply(o,_toConsumableArray(function e(t,r,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p(n,r);return 0===u.getHighAbsoluteCoord(i.dir)?[a.point(0,0,0),a.point(0,0,0)]:(o=u).checkInBetween.apply(o,[i.start,u.lineEndPoint(i.start,r,i.dir)].concat([t,l]))?e(t,r,n):[i.start,u.lineEndPoint(i.start,r,i.dir)]}(t,e.size,u.getAxisLengths(t)))),t,r)})})([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]);r.beginRound=function(e,t){e.preventDefault();var r=i.getTopParentItem(t),o=parseInt(i.getChildrenByName("human-players",t)[0].element.value),c=parseInt(i.getChildrenByName("robot-players",t)[0].element.value);if(o<0||o>100||c<0||c>100)return!1;var l=i.getChildrenByName("first-go-first",t)[0].element.checked;0===(o=o<0?0:o)&&(c=c<2?2:c),1===o&&(c=c<1?1:c),i.removeChild(i.getChildrenByClass("main-menu",r.body)[0],r.body);var d=i.renderHTML(s.boards(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&r<1)return n;var o=playerSet({},"Player "+(n.length+1));return o.isRobot=t<=0,o.board=u.bindPointData(a.square(waterTile(o,n),10)),o.shipFleet=g(o.board,!1),o.playerStats=playerStats(o,Math.round(100*o.status)/100+"%"),o.children=[o.board,o.playerStats],n.push(o),e(--t,t<0?--r:r,n)}(o,c)),r).children,m=updatePlayer(l?d[0]:d[n.randomInteger(d.length)]);return m.isRobot&&computerAttack(m,d),!1};var v=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jDomObjectsDom.documentItem,t=e.body.children.length-1;t>=0;--t)i.removeChild(e.body.children[t],e.body);return i.renderHTML(s.mainMenu(),e),e};r.main=v;r.restart=function(e,t){return v(i.getTopParentItem(t))};var h=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=h[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameUtils=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameAI,r={noConflict:function(){return e.gameAI=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("game-ai.js requires jDomCore"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("./core-dom.js"):console.error("game-ai.js requires jDomCoreDom"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("game-ai.js requires jDomObjectsMatrix"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("game-ai.js requires jDomCoreMatrix"));var a=e.gameUtils;void 0===a&&("undefined"!=typeof require?a=require("./functions.js"):console.error("game-ai.js requires gameUtils"));var s=function(e,t,r){return[n.queueTimeout(c,0,{targets:e,victim:r}),n.queueTimeout(c,200,{targets:e,target:t,victim:r})]},c=function(e){return e.victim.board.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return o.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return o.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e};r.computerAttack=function(e,t){var r,o,c=(r=t.filter(function(e){return!e.attacker}),1===(o=a.getBrokenShipsPlayers(r).length?a.getBrokenShipsPlayers(r):getLowStatusItems(r)).length?o[0]:o[n.randomInteger(o.length)]);return attackFleet.isLocked=!1,attackFleet(function(e){var t=a.getBrokenItems(e.shipFleet),r=[];if(t.length){var o=t.filter(function(e){return a.numDamangedParts(e.parts.length,e.status)>1}),c=a.getALowStatusItem(o.length?o:t).parts.filter(function(t){return a.checkIfHitCell(t.point,e.board)});if(o.length){for(var l=0;l<c.length;++l){var d=u.getInBetween(c[0].point,c[l].point,e.board,a.checkIfHitCell,!1);if(d.false.length)return s(d.false,d.false[0],e),u.getDOMItemFromPoint(d.false[0],e.board)}var m=(u.pointDifference(c[0].point,c[1].point).x>0?[i.point(-1,0,0),i.point(1,0,0)]:[i.point(0,-1,0),i.point(0,1,0)]).map(function(e,t){return u.nextCell(c[(c.length-1)*t].point,e)}).filter(function(t){return u.checkValidPoint(t,e.board)}).filter(function(t){return!a.checkIfHitCell(t,e.board)}),f=m.reduce(function(t,r){return a.checkIfHitCell(t,e.board)?r:t});if(f)return s(m,f,e),u.getDOMItemFromPoint(f,e.board)}r=a.getAdjEdgeNonHitCells(c[0].point,e.board)}var p=r.length?r:a.getAllNonHitCells(e.board).filter(function(e){return a.filterAdjacentPoints(e)}),g=p[n.randomInteger(p.length)];return s(p,g,e),u.getDOMItemFromPoint(g,e.board)}(c))};var l=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=l[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameAI=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameActions,r={noConflict:function(){return e.gameActions=t,r}},n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("actions.js requires jDomCore"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("./core-dom.js"):console.error("actions.js requires jDomCoreDom"));var i=e.jDomCoreMatrix;void 0===i&&("undefined"!=typeof require?i=require("./core-matrix.js"):console.error("actions.js requires jDomCoreMatrix"));var u=e.jDomLayout;void 0===u&&("undefined"!=typeof require?u=require("./layout.js"):console.error("actions.js requires jDomLayout"));var a=e.gamePieces;void 0===a&&("undefined"!=typeof require?a=require("./game-pieces.js"):console.error("actions.js requires gamePieces"));var s=e.gameAI;void 0===s&&("undefined"!=typeof require?s=require("./game-ai.js"):console.error("actions.js requires gameAI"));var c=function(e,t,r,i,u){var a,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return a=n.mergeObjectsMutable(t.children[u].children[i].children[r],e),s?(v.isLocked=!0,n.queueTimeout(function(){return a.isHit&&(a.attributes.style.backgroundColor=a.hasShip?"red":"white"),a=o.updateElement(a),v.isLocked=!1,a},0)):(a.isHit&&(a.attributes.style.backgroundColor=a.hasShip?"red":"white"),a=o.updateElement(a)),a},l=n.curry(c)(n.mergeObjects(a.shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),d=n.curry(c)(a.shipTile()),m=n.curry(c)(a.hitTile());r.setShip=function(e,t,r){return r?l(e,t.x,t.y,t.z):d(e,t.x,t.y,t.z)};var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=o.updateElements(n.mergeObjects(e.playerStats,a.playerStats(e,t))),e},p=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,r&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,v.isLocked=!0,e.attacker?(n.queueTimeout(function(){return v.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):n.queueTimeout(function(){return v.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),n.queueTimeout(function(){return f(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e};r.updatePlayer=p;var g=function(e,t,r,i,a){var c=(i=i.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(c=p(c,t,r),i.length<2)return n.queueTimeout(function(){return e=i[0],t=o.getTopParentItem(e),(r=e.parentItem.children).map(function(e){return f(e)}),e=f(e,"WINNER"),o.renderHTML(u.finalScore(r),t),[e];var e,t,r},200);var l,d,m,g=(l=c,d=i,(m=t)?l:p(function e(t,r,n){var o=r.length>1&&n>=r.length-1?r[0]:r[++n];return o.status>0?o:e(t,r,n)}(l,d,d.indexOf(l)),m));return g.isRobot&&n.queueTimeout(s.computerAttack,0,g,i),i},v=function e(t){e.isLocked=e.isLocked||!1;var r=o.getParentsByClass("player",t)[0],n=o.getParentsByClass("boards",t)[0].children;if(r.status<=0||r.attacker||e.isLocked)return n;var u=m(r.board,t.point.x,t.point.y,t.point.z,n.reduce(function(e,t){return e.attacker?e:t}).isRobot),a=!1,s=0;if(u.hasShip){var c=0;r.shipFleet.map(function(e){var r=e.parts.filter(function(r){return i.checkEqualPoints(r.point,t.point)&&(a=e),!r.isHit});return e.status=r.length/e.parts.length*100,c+=e.status,e}),r.status=c/r.shipFleet.length}return a&&(r=f(r,Math.round(100*r.status)/100+"%"),s=a.status<=0?a.parts.length:0),g(0,u.hasShip,s,n,t.point)};r.attackFleet=v;r.attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return v(t)};var h=Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{});Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=h[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameActions=r,e=Object.assign(e,r))}.call(void 0),function(){var e=this,t=e.gameMain,r={noConflict:function(){return e.gameMain=t,r}},n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects-dom.js"):console.error("main.js requires jDomObjects"));var o=e.gameUtils;void 0===o&&("undefined"!=typeof require?o=require("./functions.js"):console.error("main.js requires gameUtils"));var i=e.gameActions;void 0===i&&("undefined"!=typeof require?i=require("./actions.js"):console.error("main.js requires gameActions"));var u=o.main(n.documentDOMItem([o.beginRound,i.attackListener,o.restart])),a=e.jDomCoreDom;void 0===a&&("undefined"!=typeof require?a=require("./core-dom.js"):console.error("game-ai.js requires jDomCoreDom"));var s=a.getChildrenByClass("main-menu-form",u.body),c=(a.getChildrenFromAttribute("type","submit",s[0]),Object.keys(r).reduce(function(t,r){return t[r]=e[r],t},{}));Object.keys(r).map(function(t){return r[t].noConflict=function(){return e[t]=c[t],r[t]},t}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r)):(r.gameAI=r,e=Object.assign(e,r))}.call(void 0);
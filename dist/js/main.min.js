"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},curry=function(r){return function t(){for(var n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];return e.length>=r.length?r.apply(void 0,e):function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t.apply(void 0,[].concat(e,n))}}},cloneObject=function(r){return JSON.parse(JSON.stringify(r))},mergeObjects=function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return Object.assign.apply(Object,[{}].concat(t))};!function(){var r=function r(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e=e.slice(),e.push(t),--n>0?r(cloneObject(t),n,e):e},t=curry(r),n=function(r,t){return t<r.length-1?++t:r.length-1},e=function(r,t){return{x:r,y:t}},o=function(r,t){return r.z?{x:r.x+t.x,y:r.y+t.y,z:r.z+t.z}:{x:r.x+t.x,y:r.y+t.y}},u=function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(n).length||(n=e(0,0)),Array.isArray(t)?t.map(function(t,e){switch(o){case 0:n=mergeObjects(n,{y:e});break;case 1:n=mergeObjects(n,{x:e});break;default:n=mergeObjects(n,{z:e})}return r(t,n,o+1)}):(t.point=cloneObject(n),t)},i=function(r){return r.isHit&&(r.styles.backgroundColor=r.hasShip?"red":"white"),Object.keys(r.styles).length&&Object.keys(r.styles).forEach(function(t){return r.element.style[t]=r.styles[t]}),r},c=function r(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=o||0,u=function(r){return n(t,r)};if(0===o){var c=function(){var n=[];Array.isArray(t[o])&&(n=t[o].map(function(r){return document.createElement(r)})),e.forEach(function(e){return n[n.length-1].appendChild(r(t,e,u(o)))});var i=!1;return n.forEach(function(r){i&&i.appendChild(r),i=r}),{v:n[0]}}();if("object"===("undefined"==typeof c?"undefined":_typeof(c)))return c.v}if(Array.isArray(e)){var a=function(){var n=document.createElement(t[o]);return e.forEach(function(e){return n.appendChild(r(t,e,u(o)))}),{v:n}}();if("object"===("undefined"==typeof a?"undefined":_typeof(a)))return a.v}var f=document.createElement(t[o]);return e instanceof Object&&(e=i(mergeObjects(e,{element:f}))),f},a=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;return n.appendChild(c(r,t))},f=curry(a),s=f([["table","tbody"],"tr","td"]),l=function(r,t,n,e){return i(mergeObjects(t[e][n],r))},y=curry(l),h=function(r,t,n,e,o){return i(mergeObjects(t[e][n][o],r))},p=(curry(h),function(){return{hasShip:!1,isHit:!1,point:{},styles:{border:"1px solid #333",width:"35px",height:"35px",backgroundColor:"blue",cursor:"pointer"},events:{click:{f:S,args:["shipFleet","point"]}},element:{}}}),d=function(){return{hasShip:!0}},b=function(){return{status:100,parts:[]}},v=function(){return{isHit:!0}},g=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:r,status:100,board:{},shipFleet:[]}},m=y(mergeObjects(d(),{styles:{backgroundColor:"#777"}})),x=y(d()),O=function(r,t,n){return n?m(r,t.x,t.y):x(r,t.x,t.y)},j=y(v()),S=function(r,t,n){var e=j(r,n.x,n.y);return e.hasShip?t.map(function(r){if(r.hasOwnProperty("parts")){var t=r.parts.filter(function(r){return!r.isHit});r.status=t.length/r.parts.length*100}return r}):t},A=function(r,t){return t[r.y][r.x].hasShip},k=function(r,t,n){if(A(r,n)||A(t,n))return!0;var e=t.x-r.x,o=t.y-r.y;if(e>0){for(var u=r.x;u<t.x;++u)if(A({x:u,y:r.y},n))return!0}else if(o>0)for(var i=r.y;i<t.y;++i)if(A({x:r.x,y:i},n))return!0;return!1},E=function(r,t,n,e){for(var u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=b(),c=t,a=0;a<r;++a)i.parts.push(O(e,c,u)),c=o(c,n);return i},C=function(r,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=[];for(var u in r){var i=e(0,0),c=0,a=e(0,1),f=e(0,0);do c=Math.floor(2*Math.random()),a=0===c?e(0,1):e(1,0),i=e(Math.floor(Math.random()*(t.length-(r[u]-1)*a.x)),Math.floor(Math.random()*(t[0].length-(r[u]-1)*a.y))),f=e(i.x+a.x*(r[u]-1),i.y+a.y*(r[u]-1));while(k(i,f,t));o.push(E(r[u],i,a,t,n))}return o},M=curry(C),w=M([5,4,3,3,2]),z=t(p()),F=function(r,n){return t(z(r),n)},H=function(r){return F(r,r)},_=curry(S),J=function r(t,n,e,o){return Array.isArray(t)?t.map(function(t){return r(t,n,e,o)}):t.element.addEventListener("click",function(){return _(e,o,t.point)})},N=function(r){for(var t=[],n=0;n<r;++n){var e=g();e.board=H(10);_(e.board);s(u(e.board),document.body),e.shipFleet=w(e.board,!0);var o=e.shipFleet;J(e.board,o,e.board,e.shipFleet),t.push(e)}return t},L=N(1);console.log(L)}();
"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},curry=function(e){return function t(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return n.length>=e.length?e.apply(void 0,n):function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(void 0,[].concat(n,r))}}},cloneObject=function(e){return JSON.parse(JSON.stringify(e))},mergeObjects=function e(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=r[0],l=r[1];r.length>2;){var o=r.splice(r.length-2,2);l=r[r.length-2]=e.apply(void 0,_toConsumableArray(o))}return"object"!==("undefined"==typeof i?"undefined":_typeof(i))||"object"!==("undefined"==typeof l?"undefined":_typeof(l))?"object"===("undefined"==typeof l?"undefined":_typeof(l))?l:i:(Object.keys(l).map(function(t){"object"===_typeof(l[t])&&i.hasOwnProperty(t)&&"object"===_typeof(i[t])&&(i[t]=e(i[t],l[t]),Object.keys(i[t]).length>Object.keys(l[t]).length&&(l[t]=cloneObject(i[t])))}),Object.assign(i,l))},fillArray=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n=n.slice(),n.push(t),--r>0?e(cloneObject(t),r,n):n},buildArray=curry(fillArray),nextIndex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t<e.length-1?++t:e.length-1},nextCell=function(e,t){return e.z?{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}:{x:e.x+t.x,y:e.y+t.y}},locateCells=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(r).length||(r=point(0,0)),Array.isArray(t)?t.map(function(t,i){switch(n){case 0:r=mergeObjects(r,{y:i});break;case 1:r=mergeObjects(r,{x:i});break;default:r=mergeObjects(r,{z:i})}return e(t,r,n+1)}):(t.point=cloneObject(r),t)},checkIfShipCell=function(e,t){return t[e.y][e.x].hasShip},checkIfAnyShip=function(e,t){return e.filter(function(e){return!checkIfShipCell(e,t)})},checkShipBetween=function(e,t,r){if(checkIfShipCell(e,r)||checkIfShipCell(t,r))return!0;var n=t.x-e.x,i=t.y-e.y;if(n>0){for(var l=e.x;l<t.x;++l)if(checkIfShipCell({x:l,y:e.y},r))return!0}else if(i>0)for(var o=e.y;o<t.y;++o)if(checkIfShipCell({x:e.x,y:o},r))return!0;return!1},buildShip=function(e,t,r,n){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=ship(),o=t,a=0;a<e;++a)l.parts.push(setShip(n,o,i)),o=nextCell(o,r);return l},buildFleet=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];for(var i in e){var l=point(0,0),o=0,a=point(0,1),u=point(0,0);do o=Math.floor(2*Math.random()),a=0===o?point(0,1):point(1,0),l=point(Math.floor(Math.random()*(t.length-(e[i]-1)*a.x)),Math.floor(Math.random()*(t[0].length-(e[i]-1)*a.y))),u=point(l.x+a.x*(e[i]-1),l.y+a.y*(e[i]-1));while(checkShipBetween(l,u,t));n.push(buildShip(e[i],l,a,t,r))}return n},fleetBuilder=curry(buildFleet),point=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{x:e,y:t,z:r}},shipViewTile=function(){return{hasShip:!0,styles:{backgroundColor:"#777"}}},tile=function(){return{point:{},styles:{width:"35px",height:"35px",backgroundColor:"transparent"},element:{}}},rectMatrix=function(e,t,r){return buildArray(buildArray(e,t),r)},rect3d=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return buildArray(rectMatrix(e,t,r),n)},squareMatrix=function(e,t){return rectMatrix(e,t,t)},cube3d=function(e,t){return rect3d(e,t,t,t)},tableHTML=function(){return[[{type:"table",class:"matrix"},{type:"tbody"}],{type:"tr",class:"row"},{type:"td",class:"column"}]},gameTile=function(){return{hasShip:!1,isHit:!1,styles:{border:"1px solid #333",backgroundColor:"white",cursor:"pointer"}}},waterTile=function(){return mergeObjects(tile(),gameTile(),{styles:{backgroundColor:"blue"}})},shipTile=function(){return{hasShip:!0}},ship=function(){return{status:100,parts:[]}},hitTile=function(){return{isHit:!0}},boardHTML=function(){return[[{type:"div",class:"matrix",styles:{display:"block",position:"relative"}}],{type:"div",class:"layer",styles:{display:"block",position:"absolute"}},{type:"div",class:"row",styles:{display:"flex"}},{type:"div",class:"column",styles:{display:"inline-block"}}]},playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,status:100,board:{},shipFleet:[]}},defaultFleet=fleetBuilder([5,4,3,3,2]),configureHtml=function(e){return e.isHit&&(e.styles.backgroundColor=e.hasShip?"red":"white"),addElementStyles(e.element,e.styles),e},addElementStyles=function(e,t){return Object.keys(t).length&&e.style?Object.keys(t).forEach(function(r){return e.style[r]=t[r]}):e},generateElement=function(e){var t=document.createElement(e.type);return Object.keys(e).map(function(r){"type"!==r&&"styles"!==r&&t.setAttribute(r,e[r])}),e.styles&&addElementStyles(t,e.styles),t},recurseHtml=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=function(e){return nextIndex(t,e)};if(0===n){var o=function(){var o=[];Array.isArray(t[n])&&(o=t[n].map(generateElement)),r.forEach(function(r){return o[o.length-1].appendChild(e(t,r,l(n),i++))});var a=!1;return o.forEach(function(e){a&&a.appendChild(e),a=e}),{v:o[0]}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}if(1===n&&t.length>2&&(t[n].styles.zIndex=i),Array.isArray(r)){var a=function(){var o=generateElement(t[n]);return r.forEach(function(r){return o.appendChild(e(t,r,l(n),i))}),{v:o}}();if("object"===("undefined"==typeof a?"undefined":_typeof(a)))return a.v}var u=generateElement(t[n]);return r instanceof Object&&(r=configureHtml(mergeObjects(r,{element:u}))),u},processHtml=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;return r.appendChild(recurseHtml(e,t))},generateHtml=curry(processHtml),createTable=generateHtml(boardHTML()),updateCell=function(e,t,r,n){return configureHtml(mergeObjects(t[n][r],e))},alterCell=curry(updateCell),update3dCell=function(e,t,r,n,i){return configureHtml(mergeObjects(t[n][r][i],e))},alter3dCell=curry(update3dCell),setViewShip=alterCell(mergeObjects(shipTile(),{styles:{backgroundColor:"#777"}})),setHiddenShip=alterCell(shipTile()),setShip=function(e,t,r){return r?setViewShip(e,t.x,t.y):setHiddenShip(e,t.x,t.y)},setHit=alterCell(hitTile()),attackFleet=function(e,t,r){var n=setHit(e,r.x,r.y);return n.hasShip?t.map(function(e){if(e.hasOwnProperty("parts")){var t=e.parts.filter(function(e){return!e.isHit});e.status=t.length/e.parts.length*100}return e}):t},launchAttack=curry(attackFleet),bindListeners=function e(t,r,n,i){return Array.isArray(t)?t.map(function(t){return e(t,r,n,i)}):t.element instanceof HTMLElement?t.element.addEventListener("click",function(){return launchAttack(n,i,t.point)}):t.element};!function(){var e=function(e){for(var t=[],r=0;r<e;++r){var n=playerSet();n.board=rect3d(waterTile(),10,10,1),createTable(locateCells(n.board),document.body),n.shipFleet=defaultFleet(n.board[0],!0);var i=n.shipFleet;bindListeners(n.board,i,n.board,n.shipFleet),t.push(n)}return t},t=e(1);console.log(t)}();
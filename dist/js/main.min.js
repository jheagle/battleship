"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},curry=function(e){return function t(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.length>=e.length?e.apply(void 0,r):function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(void 0,[].concat(r,n))}}},cloneObject=function(e){return JSON.parse(JSON.stringify(e))},mergeObjects=function e(){var t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];return"object"!==("undefined"==typeof t?"undefined":_typeof(t))||"object"!==("undefined"==typeof n?"undefined":_typeof(n))?"object"===("undefined"==typeof n?"undefined":_typeof(n))?n:t:(Object.keys(n).map(function(r){"object"===_typeof(n[r])&&t.hasOwnProperty(r)&&"object"===_typeof(t[r])&&(t[r]=e(t[r],n[r]),Object.keys(t[r]).length>Object.keys(n[r]).length&&(n[r]=cloneObject(t[r])))}),Object.assign(t,n))},fillArray=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r=r.slice(),r.push(t),--n>0?e(cloneObject(t),n,r):r},buildArray=curry(fillArray),nextIndex=function(e,t){return t<e.length-1?++t:e.length-1},nextCell=function(e,t){return e.z?{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}:{x:e.x+t.x,y:e.y+t.y}},locateCells=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object.keys(n).length||(n=point(0,0)),Array.isArray(t)?t.map(function(t,i){switch(r){case 0:n=mergeObjects(n,{y:i});break;case 1:n=mergeObjects(n,{x:i});break;default:n=mergeObjects(n,{z:i})}return e(t,n,r+1)}):(t.point=cloneObject(n),t)},checkIfShipCell=function(e,t){return t[e.y][e.x].hasShip},checkIfAnyShip=function(e,t){return e.filter(function(e){return!checkIfShipCell(e,t)})},checkShipBetween=function(e,t,n){if(checkIfShipCell(e,n)||checkIfShipCell(t,n))return!0;var r=t.x-e.x,i=t.y-e.y;if(r>0){for(var o=e.x;o<t.x;++o)if(checkIfShipCell({x:o,y:e.y},n))return!0}else if(i>0)for(var l=e.y;l<t.y;++l)if(checkIfShipCell({x:e.x,y:l},n))return!0;return!1},buildShip=function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=ship(),l=t,u=0;u<e;++u)o.parts.push(setShip(r,l,i)),l=nextCell(l,n);return o},buildFleet=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];for(var i in e){var o=point(0,0),l=0,u=point(0,1),c=point(0,0);do l=Math.floor(2*Math.random()),u=0===l?point(0,1):point(1,0),o=point(Math.floor(Math.random()*(t.length-(e[i]-1)*u.x)),Math.floor(Math.random()*(t[0].length-(e[i]-1)*u.y))),c=point(o.x+u.x*(e[i]-1),o.y+u.y*(e[i]-1));while(checkShipBetween(o,c,t));r.push(buildShip(e[i],o,u,t,n))}return r},fleetBuilder=curry(buildFleet),point=function(e,t){return{x:e,y:t}},point3d=function(e,t){return Object.assign({},e,{z:t})},shipViewTile=function(){return{hasShip:!0,styles:{backgroundColor:"#777"}}},tile=function(){return{point:{},styles:{width:"35px",height:"35px",backgroundColor:"transparent"},element:{}}},gameTile=function(){return mergeObjects(tile(),{hasShip:!1,isHit:!1,styles:{border:"1px solid #333",backgroundColor:"blue",cursor:"pointer"}})},rectMatrix=function(e,t,n){return buildArray(buildArray(e,t),n)},rect3d=function(e,t,n,r){return buildArray(rectMatrix(e,t,n),r)},squareMatrix=function(e,t){return rectMatrix(e,t,t)},cube3d=function(e,t){return rect3d(e,t,t,t)},shipTile=function(){return{hasShip:!0}},ship=function(){return{status:100,parts:[]}},hitTile=function(){return{isHit:!0}},playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{name:e,status:100,board:{},shipFleet:[]}},defaultFleet=fleetBuilder([5,4,3,3,2]),configureHtml=function(e){return e.isHit&&(e.styles.backgroundColor=e.hasShip?"red":"white"),Object.keys(e.styles).length&&e.element.style&&Object.keys(e.styles).forEach(function(t){return e.element.style[t]=e.styles[t]}),e},recurseHtml=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=r||0,i=function(e){return nextIndex(t,e)};if(0===r){var o=function(){var o=[];Array.isArray(t[r])&&(o=t[r].map(function(e){return document.createElement(e)})),n.forEach(function(n){return o[o.length-1].appendChild(e(t,n,i(r)))});var l=!1;return o.forEach(function(e){l&&l.appendChild(e),l=e}),{v:o[0]}}();if("object"===("undefined"==typeof o?"undefined":_typeof(o)))return o.v}if(Array.isArray(n)){var l=function(){var o=document.createElement(t[r]);return n.forEach(function(n){return o.appendChild(e(t,n,i(r)))}),{v:o}}();if("object"===("undefined"==typeof l?"undefined":_typeof(l)))return l.v}var u=document.createElement(t[r]);return n instanceof Object&&(n=configureHtml(mergeObjects(n,{element:u}))),u},processHtml=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body;return n.appendChild(recurseHtml(e,t))},generateHtml=curry(processHtml),createTable=generateHtml([["table","tbody"],"tr","td"]),updateCell=function(e,t,n,r){return configureHtml(mergeObjects(t[r][n],e))},alterCell=curry(updateCell),update3dCell=function(e,t,n,r,i){return configureHtml(mergeObjects(t[r][n][i],e))},alter3dCell=curry(update3dCell),setViewShip=alterCell(mergeObjects(shipTile(),{styles:{backgroundColor:"#777"}})),setHiddenShip=alterCell(shipTile()),setShip=function(e,t,n){return n?setViewShip(e,t.x,t.y):setHiddenShip(e,t.x,t.y)},setHit=alterCell(hitTile()),attackFleet=function(e,t,n){var r=setHit(e,n.x,n.y);return r.hasShip?t.map(function(e){if(e.hasOwnProperty("parts")){var t=e.parts.filter(function(e){return!e.isHit});e.status=t.length/e.parts.length*100}return e}):t},launchAttack=curry(attackFleet),bindListeners=function e(t,n,r,i){return Array.isArray(t)?t.map(function(t){return e(t,n,r,i)}):t.element instanceof HTMLElement?t.element.addEventListener("click",function(){return launchAttack(r,i,t.point)}):t.element};!function(){var e=function(e){for(var t=[],n=0;n<e;++n){var r=playerSet();r.board=squareMatrix(gameTile(),10),createTable(locateCells(r.board),document.body),r.shipFleet=defaultFleet(r.board,!0);var i=r.shipFleet;bindListeners(r.board,i,r.board,r.shipFleet),t.push(r)}return t},t=e(1);console.log(t)}();
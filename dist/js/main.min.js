"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var base=window||{};(function(){var e=this||{},t=e.jDomCore||{},r={};e.jDomCore=r,r.noConflict=function(){return e.jDomCore=t,r},r.curry=function(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.length>=e.length?e.apply(void 0,n):function(){for(var t=arguments.length,i=Array(t),o=0;o<t;o++)i[o]=arguments[o];return r.curry(e).apply(void 0,[].concat(n,i))}}},r.pipe=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},r.mapObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,r):Object.keys(e).reduce(function(r,n){return r[n]=t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2))),r},r||{})},r.filterObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2)))?r[n]=e[n]:delete r[n],r},r||{})},r.reduceObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([r,e[n],n,e].slice(0,t.length||2)))},r)},r.notEmptyObjectOrArray=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};r.cloneObject=function(e){return function e(t,n){return r.notEmptyObjectOrArray(t)?r.reduceObject(t,function(t,r,i){return t[i]=n[i]&&!/^(parentItem|listenerArgs|element)$/.test(i)?e(r,n[i]):r,t},n):n}(e,JSON.parse(JSON.stringify(e,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})))};var n=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.notEmptyObjectOrArray(n)?r.mapObject(n,function(r,n){return t[n]&&!/^(parentItem|listenerArgs|element)$/.test(n)?e(t[n],r):r},i?t:r.cloneObject(t)):n};r.mergeObjects=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 2===t.length?n(r.mergeObjects,t[0],t[1]):1===t.length?r.cloneObject(t[0]):t.reduce(r.curry(n)(r.mergeObjects),{})},r.mergeObjectsMutable=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return 2===t.length?n(r.mergeObjectsMutable,t[0],t[1],!0):1===t.length?t[0]:t.reduce(r.curry(n)(r.mergeObjectsMutable),{})};var i=function e(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--i>0?e(t,t?n:r.cloneObject(n),i,o.concat([n])):o.concat([n])};r.buildArray=r.curry(i)(!1),r.buildArrayOfReferences=r.curry(i)(!0),r.inArray=function(e,t){return e.indexOf(t)>=0},r.getMaxOrMin=function(e,t,r){return e&&r>t||!e&&r<t?r:t},r.getMax=r.curry(r.getMaxOrMin)(!0),r.getMin=r.curry(r.getMaxOrMin)(!1),r.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*r},r.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*r},r.compare=function(e,t){return e===t?0:e>t?1:-1},r.compareArrays=function(e,t){return t.filter(function(t,n){return!r.inArray(e,t)||e[n]!==t}).concat(e).reduce(function(n,i){return n[JSON.stringify(i,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})]=r.compare(t.filter(function(e){return e===i}).length,e.filter(function(e){return e===i}).length),n},{})},r.trace=function(e){return function(t){return console.info(e+": ",t),t}},r.queueTimeout=function(){for(var e=arguments.length,t=Array(e>2?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.queueTimeout.queue=r.queueTimeout.queue||[],r.queueTimeout.isRunning=r.queueTimeout.isRunning||!1;var u={id:0,func:i,timeout:o,args:t,result:0};if(i&&r.queueTimeout.queue.push(u),r.queueTimeout.queue.length&&!r.queueTimeout.isRunning){r.queueTimeout.isRunning=!0;var a=r.queueTimeout.queue.shift();return a.id=setTimeout(function(){return a.result=a.func.apply(a,_toConsumableArray(a.args)),r.queueTimeout.isRunning=!1,r.queueTimeout(!1)},a.timeout),a}return u},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}).call(window||base||{}),function(){var e=this||{},t=e.document;if(!Object.keys(e).length)if("undefined"!=typeof require){var r=require("./pseudo-dom.js");e=r.generate(),t=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var n=e.jDomObjects||{},i={};e.jDomObjects=i,i.noConflict=function(){return e.jDomObjects=n,i};var o=e.jDomCore;void 0===o&&("undefined"!=typeof require?o=require("./core.js"):console.error("objects-dom.js requires jDomCore")),i.DOMItem=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=o).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(r))};i.documentDOMItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.DOMItem({tagName:"html",attributes:{},element:t,eventListeners:r,children:e,head:e[0],body:e[1]})}([i.DOMItem({tagName:"head",attributes:{},element:t.head,children:[]}),i.DOMItem({tagName:"body",attributes:{},element:t.body,children:[]})],e);return r.children=r.children.map(function(e){return i.DOMItem(e,{parentItem:r})}),r.head=r.children[0],r.body=r.children[1],i.DOMItem(r)},i.documentItem=i.documentDOMItem(),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports=Object.assign(exports,i))}.call(window||base||{}),function(){var e=this||{},t=e.document;if(!Object.keys(e).length)if("undefined"!=typeof require){var r=require("./pseudo-dom.js");e=r.generate(),t=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var n=e.jDomCoreDom||{},i={};e.jDomCoreDom=i,i.noConflict=function(){return e.jDomCoreDom=n,i};var o=e.jDomCore;void 0===o&&("undefined"!=typeof require?o=require("./core.js"):console.error("core-dom.js requires jDomCore"));var u=e.jDomObjects;void 0===u&&("undefined"!=typeof require?u=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects")),i.elementHasAttribute=function(e,t,r){return!!e.style&&(t in e?/^(style|className)$/.test(t)?o.compareArrays("string"==typeof r?e[t].split(" "):Object.keys(e[t]),"string"==typeof r?r.split(" "):Object.keys(r)):e[t]===r:e.hasAttribute(t)&&e.getAttribute(t)===r)},i.elementChanges=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?i.generateElement(e):(e.attributes=o.filterObject(e.attributes,function(t,r){return o.filterObject(o.mapObject(e.attributes,function(t,r){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===r?o.filterObject(i.elementHasAttribute(e.element,r,t),function(e){return 1===e}):!i.elementHasAttribute(e.element,r,t)}),function(e){return!!e})[r]}),e)},i.updateElement=function(e){return e.element.style&&(e.attributes=o.mapObject(i.elementChanges(e).attributes,function(t,r){return r in e.element?o.notEmptyObjectOrArray(t)?o.mapObject(o.filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,r){return e.element.style[r]=t,t},e.element.style):(e.element[r]=t,t):(e.element.setAttribute(r,t),t)})),e},i.updateElements=function(e){return(e=i.updateElement(e)).children.map(function(e){return i.updateElements(e)}),e},i.generateElement=function(e){return e.element=t.createElement(e.tagName),i.updateElement(e)},i.bindAllElements=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return o.mapObject(u.DOMItem(e),function(e){return e},e),e.element=e.element&&e.element.style?e.element:i.bindElement(e).element,e.parentItem=t.body||t,e.children.map(function(t){return i.bindAllElements(t,e)}),e},i.bindElement=function(e){return e.element&&e.element.style||(e.element=i.generateElement(e).element),e},i.buildHTML=function(e){return e.children.map(function(t){return e.element.appendChild(i.buildHTML(t).element)}),e},i.appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body,r=t.body?t.body:t;return o.inArray(r.children,e)||r.children.push(e),i.buildHTML(r)},i.appendHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body,r=t.body?t.body:t;return o.inArray(r.children,e)||r.children.push(e),e.element&&e.element.style||(e=i.bindElement(e)),r.element.appendChild(e.element),e},i.removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)},i.registerListener=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem;return Object.assign(t.eventListeners,{name:e})},i.registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return o.mergeObjects(t,{eventListeners:e},t.eventListeners)},i.retrieveListener=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return o.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};i.assignListener=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t}(n)):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r,r},i.appendListeners=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e.children=e.children||[],e.eventListeners&&e.eventListeners[t]&&(e.eventListeners[t]={listenerFunc:r,listenerArgs:n,listenerOptions:o}),e.children.map(function(e){return i.appendListeners(e,t,r,n,o)}),e},i.bindAllListeners=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&o.mapObject(e.eventListeners,function(t,r){return i.assignListener(r,e.element,function(r){return t.listenerFunc(r,e,t.listenerArgs)},t.listenerOptions)}),e.children=e.children.map(function(e){return i.bindAllListeners(e)}),e},i.bindListeners=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&o.mapObject(e.eventListeners,function(t,r){return i.assignListener(r,e.element,function(r){return t.listenerFunc(r,e,t.listenerArgs)},t.listenerOptions)}),e},i.getChildrenFromAttribute=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem.body;return r.attributes[e]&&r.attributes[e]===t?r.children.reduce(function(r,n){return r.concat(i.getChildrenFromAttribute(e,t,n))},[]).concat([r]):r.children.reduce(function(r,n){return r.concat(i.getChildrenFromAttribute(e,t,n))},[])},i.getChildrenByClass=o.curry(i.getChildrenFromAttribute)("className"),i.getChildrenByName=o.curry(i.getChildrenFromAttribute)("name"),i.getParentsFromAttribute=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem.body;return Object.keys(r.parentItem).length?(r.attributes[e]||r[e]||!1)===t?i.getParentsFromAttribute(e,t,r.parentItem).concat([r]):i.getParentsFromAttribute(e,t,r.parentItem):[]},i.getParentsByClass=o.curry(i.getParentsFromAttribute)("className"),i.getParentsByName=o.curry(i.getParentsFromAttribute)("name"),i.getParentsByTagName=o.curry(i.getParentsFromAttribute)("tagName"),i.getTopParentItem=function(e){return Object.keys(e.parentItem).length?i.getTopParentItem(e.parentItem):e},i.renderHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return o.mapObject(u.DOMItem(e),function(e){return e},e),e.element=e.element&&e.element.style?e.element:i.bindElement(e).element,e.eventListeners=o.mapObject(e.eventListeners,function(e){return o.mergeObjects(e,{listenerFunc:i.retrieveListener(e.listenerFunc,i.getTopParentItem(t))})}),e.parentItem=t.body||t,(e=i.bindListeners(i.appendHTML(e,t))).children.map(function(t){return i.renderHTML(t,e)}),e},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports=Object.assign(exports,i))}.call(window||base||{}),function(){var e=this||{},t=e.jDomObjectsMatrix||{},r={};e.jDomObjectsMatrix=r,r.noConflict=function(){return e.jDomObjectsMatrix=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var i=e.jDomObjects;void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects")),r.point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}},r.tile=function(){return{point:{}}},r.matrix=function(e,t,r){for(var o=arguments.length,u=Array(o>4?o-4:0),a=4;a<o;a++)u[a-4]=arguments[a];var s,c,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return i.DOMItem({tagName:"div",attributes:{className:"matrix"},children:n.buildArray((s=i).DOMItem.apply(s,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:n.buildArray((c=i).DOMItem.apply(c,[{axis:"y",tagName:"div",attributes:{className:"row"},children:n.buildArray((l=i).DOMItem.apply(l,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(u,[e])),t)}].concat(u)),r)}].concat(u)),d)})},r.square=function(e,t){return r.matrix(e,t,t)},r.cube=function(e,t){return r.matrix(e,t,t,t)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.jDomCoreMatrix||{},r={};e.jDomCoreMatrix=r,r.noConflict=function(){return e.jDomCoreMatrix=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-matrix.js requires jDomCore"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("core-matrix.js requires jDomObjectsMatrix")),r.bindPointData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.point(0,0,0);return n.mergeObjects(e,e.point?{point:n.cloneObject(t)}:{children:e.children.map(function(e,i){return r.bindPointData(e,n.mergeObjects(t,_defineProperty({},e.axis,i)))})})},r.nextCell=function(e,t){return i.point(e.x+t.x,e.y+t.y,e.z+t.z)},r.pointDifference=function(e,t){return i.point(t.x-e.x,t.y-e.y,t.z-e.z)},r.checkEqualPoints=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},r.pointHasNegative=function(e){return!!Object.keys(n.filterObject(e,function(e){return e<0})).length},r.getHighAbsoluteCoord=function(e){return n.reduceObject(e,n.curry(n.getMaxOrMin)(!r.pointHasNegative(e)),0)},r.getAxisOfCoord=function(e,t){return Object.keys(e).filter(function(r){return e[r]===t})},r.getHighAbsoluteCoordAxis=function(e){return r.getAxisOfCoord(e,r.getHighAbsoluteCoord(e))},r.pointDirection=function(e,t){return n.mergeObjects(i.point(0,0,0),_defineProperty({},""+r.getHighAbsoluteCoordAxis(r.pointDifference(e,t))[0],r.pointHasNegative(r.pointDifference(e,t))?-1:1))},r.randomStart=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.point(10,10,10);return i.point(n.randomInteger(r.x-(e-1)*t.x),n.randomInteger(r.y-(e-1)*t.y),n.randomInteger(r.z-(e-1)*t.z))},r.lineEndPoint=function(e,t,r){return i.point(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))},r.getPointsLine=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return r.checkEqualPoints(e,t)?n.concat([e]):r.getPointsLine(r.nextCell(e,r.pointDirection(e,t)),t,n.concat([e]))},r.getPointsLines=function(e){return e.reduce(function(e,t){return e.concat(r.getPointsLine.apply(r,_toConsumableArray(t)))},[])},r.testPointsBetween=function(e,t,i,o){var u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return r.getPointsLine(e,t).filter(function(e,t,r){return 0!==t&&t!==r.length-1||u}).reduce(function(e,t){return n.mergeObjects(e,_defineProperty({},""+!!o(t,i),[t]))},{true:[],false:[]})},r.getInBetween=function(e,t,i,o){var u=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.mergeObjects({true:[],false:[]},r.testPointsBetween(e,t,i,o,u))},r.checkInBetween=function(e,t,n,i){return!(!(!(arguments.length>4&&void 0!==arguments[4])||arguments[4])||!i(e,n)&&!i(t,n))||!!r.testPointsBetween(e,t,n,i).true.length},r.getAxisLengths=function(e){return i.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)},r.randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[n.randomInteger(e.length)]:i.point(0,0,0)},r.checkValidPoint=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)},r.getDOMItemFromPoint=function(e,t){return!!r.checkValidPoint(e,t)&&t.children[e.z].children[e.y].children[e.x]},r.getAllPoints=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.point?t.concat([e.point]):e.children.reduce(function(e,t){return e.concat(r.getAllPoints(t,[]))},[])},r.adjacentPoints=function(e,t){return r.getPointsLines([[i.point(-1,1,1),i.point(1,-1,-1)],[i.point(1,1,1),i.point(-1,1,-1)],[i.point(-1,-1,1),i.point(1,-1,1)],[i.point(1,0,0),i.point(1,1,-1)],[i.point(-1,1,0),i.point(1,1,0)]]).concat([i.point(0,0,1),i.point(1,0,0),i.point(-1,0,-1),i.point(0,0,-1)]).map(function(t){return r.nextCell(e,t)}).filter(function(n){return r.checkValidPoint(r.nextCell(e,n),t)})},r.adjacentEdgePoints=function(e,t){return[i.point(-1,0,0),i.point(1,0,0),i.point(0,-1,0),i.point(0,1,0),i.point(0,0,-1),i.point(0,0,1)].map(function(t){return r.nextCell(e,t)}).filter(function(e){return r.checkValidPoint(e,t)})},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.jDomLayout||{},r={};e.jDomLayout=r,r.noConflict=function(){return e.jDomLayout=t,r};var n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects-dom.js"):console.error("layout.js requires jDomObjects")),r.mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{name:"mainMenuForm",className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}},r.boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}},r.finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gamePieces||{},r={};e.gamePieces=r,r.noConflict=function(){return e.gamePieces=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("game-pieces.js requires jDomCore"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("game-pieces.js requires jDomObjectsMatrix"));r.waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.mergeObjects(function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}}(e,t),i.tile())},r.shipTile=function(){return{hasShip:!0}},r.ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}},r.hitTile=function(){return{isHit:!0}},r.playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}},r.playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameUtils||{},r={};e.gameUtils=r,r.noConflict=function(){return e.gameUtils=t,r};var n=e.jDomCoreMatrix;void 0===n&&("undefined"!=typeof require?n=require("./core-matrix.js"):console.error("functions.js requires jDomCoreMatrix")),r.checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip},r.checkIfHitCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit},r.getAllNonHitCells=function(e){return n.getAllPoints(e).filter(function(t){return!r.checkIfHitCell(t,e)})},r.getAdjEdgeNonHitCells=function(e,t){return n.adjacentEdgePoints(e,t).filter(function(e){return!r.checkIfHitCell(e,t)})},r.getALowStatusItem=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})},r.getLowStatusItems=function(e){return e.filter(function(t){return t.status<=r.getALowStatusItem(e).status})},r.getBrokenItems=function(e){return e.filter(function(e){return e.status<100&&e.status>0})},r.getBrokenShipsPlayers=function(e){return e.filter(function(e){return r.getBrokenItems(e.shipFleet).length})},r.numDamagedParts=function(e,t){return e-Math.ceil(t/100*e)},r.filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameActions||{},r={};e.gameActions=r,r.noConflict=function(){return e.gameActions=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("actions.js requires jDomCore"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("actions.js requires jDomCoreDom"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("actions.js requires jDomObjectsMatrix"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("actions.js requires jDomCoreMatrix"));var a=e.jDomLayout;void 0===a&&("undefined"!=typeof require?a=require("./layout.js"):console.error("actions.js requires jDomLayout"));var s=e.gamePieces;void 0===s&&("undefined"!=typeof require?s=require("./game-pieces.js"):console.error("actions.js requires gamePieces"));var c=e.gameUtils;void 0===c&&("undefined"!=typeof require?c=require("./functions.js"):console.error("actions.js requires gameUtils"));var l=function(e,t,o,u,a){var s,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return s=n.mergeObjectsMutable(t.children[a].children[u].children[o],e),c?(r.attackFleet.isLocked=!0,n.queueTimeout(function(){return s.isHit&&(s.attributes.style.backgroundColor=s.hasShip?"red":"white"),s=i.updateElement(s),r.attackFleet.isLocked=!1,s},0)):(s.isHit&&(s.attributes.style.backgroundColor=s.hasShip?"red":"white"),s=i.updateElement(s)),s},d=n.curry(l)(n.mergeObjects(s.shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),m=n.curry(l)(s.shipTile()),f=n.curry(l)(s.hitTile());r.setShip=function(e,t,r){return r?d(e,t.x,t.y,t.z):m(e,t.x,t.y,t.z)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=i.updateElements(n.mergeObjects(e.playerStats,s.playerStats(e,t))),e};r.updatePlayer=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,o&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,r.attackFleet.isLocked=!0,e.attacker?(n.queueTimeout(function(){return r.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):n.queueTimeout(function(){return r.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),n.queueTimeout(function(){return p(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e};var g=function(e,t,o,u){var s=(u=u.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(s=r.updatePlayer(s,t,o),u.length<2)return n.queueTimeout(function(){return e=u[0],t=i.getTopParentItem(e),(r=e.parentItem.children).map(function(e){return p(e)}),e=p(e,"WINNER"),i.renderHTML(a.finalScore(r),t).children[0].children.map(function(e){return e.attributes.innerHTML}),[e];var e,t,r},200);var c,l,d,m=(c=s,l=u,(d=t)?c:r.updatePlayer(function e(t,r,n){var i=r.length>1&&n>=r.length-1?r[0]:r[++n];return i.status>0?i:e(t,r,n)}(c,l,l.indexOf(c)),d));return m.isRobot&&n.queueTimeout(r.computerAttack,0,m,u),u};r.attackFleet=function(e){r.attackFleet.isLocked=r.attackFleet.isLocked||!1;var t=i.getParentsByClass("player",e)[0],n=i.getParentsByClass("boards",e)[0].children;if(t.status<=0||t.attacker||r.attackFleet.isLocked)return n;var o=f(t.board,e.point.x,e.point.y,e.point.z,n.reduce(function(e,t){return e.attacker?e:t}).isRobot),a=!1,s=0;if(o.hasShip){var c=0;t.shipFleet.map(function(t){var r=t.parts.filter(function(r){return u.checkEqualPoints(r.point,e.point)&&(a=t),!r.isHit});return t.status=r.length/t.parts.length*100,c+=t.status,t}),t.status=c/t.shipFleet.length}return a&&(t=p(t,Math.round(100*t.status)/100+"%"),s=a.status<=0?a.parts.length:0),g(0,o.hasShip,s,n)},r.attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.attackFleet(t)};var h=function(e,t,r){return[n.queueTimeout(b,0,{targets:e,victim:r}),n.queueTimeout(b,200,{targets:e,target:t,victim:r})]},b=function(e){return e.victim.board.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return i.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return i.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return i.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e};r.computerAttack=function(e,t){var i,a,s=(i=t.filter(function(e){return!e.attacker}),1===(a=c.getBrokenShipsPlayers(i).length?c.getBrokenShipsPlayers(i):c.getLowStatusItems(i)).length?a[0]:a[n.randomInteger(a.length)]);return r.attackFleet.isLocked=!1,r.attackFleet(function(e){var t=c.getBrokenItems(e.shipFleet),r=[];if(t.length){var i=t.filter(function(e){return c.numDamagedParts(e.parts.length,e.status)>1}),a=c.getALowStatusItem(i.length?i:t).parts.filter(function(t){return c.checkIfHitCell(t.point,e.board)});if(i.length){for(var s=0;s<a.length;++s){var l=u.getInBetween(a[0].point,a[s].point,e.board,c.checkIfHitCell,!1);if(l.false.length)return h(l.false,l.false[0],e),u.getDOMItemFromPoint(l.false[0],e.board)}var d=(u.pointDifference(a[0].point,a[1].point).x>0?[o.point(-1,0,0),o.point(1,0,0)]:[o.point(0,-1,0),o.point(0,1,0)]).map(function(e,t){return u.nextCell(a[(a.length-1)*t].point,e)}).filter(function(t){return u.checkValidPoint(t,e.board)}).filter(function(t){return!c.checkIfHitCell(t,e.board)}),m=d.reduce(function(t,r){return c.checkIfHitCell(t,e.board)?r:t});if(m)return h(d,m,e),u.getDOMItemFromPoint(m,e.board)}r=c.getAdjEdgeNonHitCells(a[0].point,e.board)}var f=r.length?r:c.getAllNonHitCells(e.board).filter(function(e){return c.filterAdjacentPoints(e)}),p=f[n.randomInteger(f.length)];return h(f,p,e),u.getDOMItemFromPoint(p,e.board)}(s))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameStart||{},r={};e.gameStart=r,r.noConflict=function(){return e.gameStart=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("start-functions.js requires jDomCore"));var i=e.jDomObjects;void 0===i&&("undefined"!=typeof require?i=require("./objects-dom.js"):console.error("start-functions.js requires jDomObjects"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("./core-dom.js"):console.error("start-functions.js requires jDomCoreDom"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("start-functions.js requires jDomCoreMatrix"));var a=e.jDomObjectsMatrix;void 0===a&&("undefined"!=typeof require?a=require("./objects-matrix.js"):console.error("start-functions.js requires jDomObjectsMatrix"));var s=e.jDomLayout;void 0===s&&("undefined"!=typeof require?s=require("./layout.js"):console.error("start-functions.js requires jDomLayout"));var c=e.gamePieces;void 0===c&&("undefined"!=typeof require?c=require("./game-pieces.js"):console.error("start-functions.js requires gamePieces"));var l=e.gameUtils;void 0===l&&("undefined"!=typeof require?l=require("./functions.js"):console.error("start-functions.js requires gameUtils"));var d=e.gameActions;void 0===d&&("undefined"!=typeof require?d=require("./actions.js"):console.error("start-functions.js requires gameActions"));var m=function(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(r=e,n=t,u.randDirection([a.point(1,0,0),a.point(0,1,0),a.point(0,0,1)].filter(function(e){return r[u.getAxisOfCoord(e,1)]>n})));return{start:u.randomStart(t,i,e),dir:i}},f=n.curry(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var i;return function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.mergeObjects(c.ship(e.name),{parts:t.map(function(e){return d.setShip(r,e,i)})})}(e,(i=u).getPointsLine.apply(i,_toConsumableArray(function e(t,r,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m(n,r);return 0===u.getHighAbsoluteCoord(o.dir)?[a.point(0,0,0),a.point(0,0,0)]:(i=u).checkInBetween.apply(i,[o.start,u.lineEndPoint(o.start,r,o.dir)].concat([t,l.checkIfShipCell]))?e(t,r,n):[o.start,u.lineEndPoint(o.start,r,o.dir)]}(t,e.size,u.getAxisLengths(t)))),t,r)})})([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]);r.beginRound=function(e,t){e.preventDefault();var r=o.getTopParentItem(t),i=parseInt(o.getChildrenByName("human-players",t)[0].element.value),l=parseInt(o.getChildrenByName("robot-players",t)[0].element.value);if(i<0||i>100||l<0||l>100)return!1;var m=o.getChildrenByName("first-go-first",t)[0].element.checked;0===(i=i<0?0:i)&&(l=l<2?2:l),1===i&&(l=l<1?1:l),o.removeChild(o.getChildrenByClass("main-menu",r.body)[0],r.body);var p=o.renderHTML(s.boards(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&r<1)return n;var i=c.playerSet({},"Player "+(n.length+1));return i.isRobot=t<=0,i.board=u.bindPointData(a.square(c.waterTile(i,n),10)),i.shipFleet=f(i.board,!1),i.playerStats=c.playerStats(i,Math.round(100*i.status)/100+"%"),i.children=[i.board,i.playerStats],n.push(i),e(--t,t<0?--r:r,n)}(i,l)),r).children,g=d.updatePlayer(m?p[0]:p[n.randomInteger(p.length)]);return g.isRobot&&d.computerAttack(g,p),!1},r.main=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.documentItem,t=e.body.children.length-1;t>=0;--t)o.removeChild(e.body.children[t],e.body);return o.renderHTML(s.mainMenu(),e),e},r.restart=function(e,t){return r.main(o.getTopParentItem(t))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameMain||{},r={};e.gameMain=r,r.noConflict=function(){return e.gameMain=t,r};var n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects-dom.js"):console.error("main.js requires jDomObjects"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("main.js requires jDomCoreDom"));var o=e.gameActions;void 0===o&&("undefined"!=typeof require?o=require("./actions.js"):console.error("main.js requires gameActions"));var u=e.gameStart;void 0===u&&("undefined"!=typeof require?u=require("./start-functions.js"):console.error("main.js requires gameStart"));var a=u.main(n.documentDOMItem({beginRound:u.beginRound,attackListener:o.attackListener,restart:u.restart}));if(console.log(a),"undefined"==typeof document||"PseudoHTMLDocument"==typeof document){var s=i.getChildrenByClass("main-menu-form",a.body);i.getChildrenFromAttribute("type","submit",s[0])[0].element.click()}"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{});
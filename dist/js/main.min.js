"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var base=window||{};(function(){var e=this||{},t=e.jDomCore||{},r={};e.jDomCore=r,r.noConflict=function(){return e.jDomCore=t,r},r.curry=function(e){return function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.length>=e.length?e.apply(void 0,n):function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];return r.curry(e).apply(void 0,[].concat(n,o))}}},r.pipe=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},r.mapObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.map(t,r):Object.keys(e).reduce(function(r,n){return r[n]=t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2))),r},r||{})},r.filterObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return Array.isArray(e)?e.filter(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([e[n],n,e].slice(0,t.length||2)))?r[n]=e[n]:delete r[n],r},r||{})},r.reduceObject=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e[Object.keys(e)[0]]||e[0];return Array.isArray(e)?e.reduce(t,r):Object.keys(e).reduce(function(r,n){return t.apply(void 0,_toConsumableArray([r,e[n],n,e].slice(0,t.length||2)))},r)},r.notEmptyObjectOrArray=function(e){return!!("object"===(void 0===e?"undefined":_typeof(e))&&Object.keys(e).length||Array.isArray(e)&&e.length)};r.cloneObject=function(e){return function e(t,n){return r.notEmptyObjectOrArray(t)?r.reduceObject(t,function(t,r,o){return t[o]=n[o]&&!/^(parentItem|listenerArgs|element)$/.test(o)?e(r,n[o]):r,t},n):n}(e,JSON.parse(JSON.stringify(e,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})))};var n=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.notEmptyObjectOrArray(n)?r.mapObject(n,function(r,n){return t[n]&&!/^(parentItem|listenerArgs|element)$/.test(n)?e(t[n],r):r},o?t:r.cloneObject(t)):n};r.mergeObjects=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return 2===t.length?n(r.mergeObjects,t[0],t[1]):1===t.length?r.cloneObject(t[0]):t.reduce(r.curry(n)(r.mergeObjects),{})},r.mergeObjectsMutable=function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return 2===t.length?n(r.mergeObjectsMutable,t[0],t[1],!0):1===t.length?t[0]:t.reduce(r.curry(n)(r.mergeObjectsMutable),{})};var o=function e(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return--o>0?e(t,t?n:r.cloneObject(n),o,i.concat([n])):i.concat([n])};r.buildArray=r.curry(o)(!1),r.buildArrayOfReferences=r.curry(o)(!0),r.inArray=function(e,t){return e.indexOf(t)>=0},r.getMaxOrMin=function(e,t,r){return e&&r>t||!e&&r<t?r:t},r.getMax=r.curry(r.getMaxOrMin)(!0),r.getMin=r.curry(r.getMaxOrMin)(!1),r.randomNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.random()*e+t)*r},r.randomInteger=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(Math.floor(Math.random()*e)+t)*r},r.compare=function(e,t){return e===t?0:e>t?1:-1},r.compareArrays=function(e,t){return t.filter(function(t,n){return!r.inArray(e,t)||e[n]!==t}).concat(e).reduce(function(n,o){return n[JSON.stringify(o,function(e,t){return/^(parentItem|listenerArgs|element)$/.test(e)?void 0:t})]=r.compare(t.filter(function(e){return e===o}).length,e.filter(function(e){return e===o}).length),n},{})},r.trace=function(e){return function(t){return console.info(e+": ",t),t}},r.queueTimeout=function(){for(var e=arguments.length,t=Array(e>2?e-2:0),n=2;n<e;n++)t[n-2]=arguments[n];var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r.queueTimeout.queue=r.queueTimeout.queue||[],r.queueTimeout.isRunning=r.queueTimeout.isRunning||!1;var u={id:0,func:o,timeout:i,args:t,result:0};if(o&&r.queueTimeout.queue.push(u),r.queueTimeout.queue.length&&!r.queueTimeout.isRunning){r.queueTimeout.isRunning=!0;var a=r.queueTimeout.queue.shift();return a.id=setTimeout(function(){return a.result=a.func.apply(a,_toConsumableArray(a.args)),r.queueTimeout.isRunning=!1,r.queueTimeout(!1)},a.timeout),a}return u},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}).call(window||base||{}),function(){var e=this||{},t=e.document;if(!Object.keys(e).length)if("undefined"!=typeof require){var r=require("./pseudo-dom.js");e=r.generate(),t=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var n=e.jDomObjects||{},o={noConflict:function(){return e.jDomObjects=n,o}};e.jDomObjects=o;var i=e.jDomCore;void 0===i&&("undefined"!=typeof require?i=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var u=function(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i).mergeObjectsMutable.apply(e,[{tagName:"div",attributes:{style:{}},element:{},eventListeners:{},parentItem:{},children:[]}].concat(r))};o.DOMItem=u;var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u({tagName:"html",attributes:{},element:t,eventListeners:r,children:e,head:e[0],body:e[1]})}([u({tagName:"head",attributes:{},element:t.head,children:[]}),u({tagName:"body",attributes:{},element:t.body,children:[]})],e);return r.children=r.children.map(function(e){return u(e,{parentItem:r})}),r.head=r.children[0],r.body=r.children[1],u(r)};o.documentDOMItem=a,o.documentItem=a(),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports=Object.assign(exports,o))}.call(window||base||{}),function(){var e=this||{},t=e.document;if(!Object.keys(e).length)if("undefined"!=typeof require){var r=require("./pseudo-dom.js");e=r.generate(),t=e.document}else console.error("objects-dom.js requires jDomPseudoDom");var n=e.jDomCoreDom||{},o={noConflict:function(){return e.jDomCoreDom=n,o}};e.jDomCoreDom=o;var i=e.jDomCore;void 0===i&&("undefined"!=typeof require?i=require("./core.js"):console.error("core-dom.js requires jDomCore"));var u=e.jDomObjects;void 0===u&&("undefined"!=typeof require?u=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));var a=function(e,t,r){return!!e.style&&(t in e?/^(style|className)$/.test(t)?i.compareArrays("string"==typeof r?e[t].split(" "):Object.keys(e[t]),"string"==typeof r?r.split(" "):Object.keys(r)):e[t]===r:e.hasAttribute(t)&&e.getAttribute(t)===r)};o.elementHasAttribute=a;var s=function(e){return e.element.tagName.toLowerCase()!==e.tagName.toLowerCase()?l(e):(e.attributes=i.filterObject(e.attributes,function(t,r){return i.filterObject(i.mapObject(e.attributes,function(t,r){return"object"===(void 0===t?"undefined":_typeof(t))||"className"===r?i.filterObject(a(e.element,r,t),function(e){return 1===e}):!a(e.element,r,t)}),function(e){return!!e})[r]}),e)};o.elementChanges=s;var c=function(e){return e.element.style&&(e.attributes=i.mapObject(s(e).attributes,function(t,r){return r in e.element?i.notEmptyObjectOrArray(t)?i.mapObject(i.filterObject(t,function(e,t){return/^\D+$/.test(t)}),function(t,r){return e.element.style[r]=t,t},e.element.style):(e.element[r]=t,t):(e.element.setAttribute(r,t),t)})),e};o.updateElement=c;o.updateElements=function e(t){return(t=c(t)).children.map(function(t){return e(t)}),t};var l=function(e){return e.element=t.createElement(e.tagName),c(e)};o.generateElement=l;o.bindAllElements=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return i.mapObject(u.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.parentItem=r.body||r,t.children.map(function(r){return e(r,t)}),t};var d=function(e){return e.element&&e.element.style||(e.element=l(e).element),e};o.bindElement=d;var m=function e(t){return t.children.map(function(r){return t.element.appendChild(e(r).element)}),t};o.buildHTML=m;o.appendAllHTML=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body,r=t.body?t.body:t;return i.inArray(r.children,e)||r.children.push(e),m(r)};var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body,r=t.body?t.body:t;return i.inArray(r.children,e)||r.children.push(e),e.element&&e.element.style||(e=d(e)),r.element.appendChild(e.element),e};o.appendHTML=f;o.removeChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem.body;return t.element.removeChild(e.element),t.children.splice(t.children.indexOf(e),1)};o.registerListener=function(e){arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.name;var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem;return Object.assign(t.eventListeners,{name:e})};o.registerListeners=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return i.mergeObjects(t,{eventListeners:e},t.eventListeners)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return i.inArray(Object.keys(t.eventListeners),e)?t.eventListeners[e]:{}};o.retrieveListener=p;var g=function(e,t,r,n){return t.addEventListener?t.addEventListener(e,r,function e(t){if(void 0===e.supportsOptions){e.supportsOptions=!0;try{window.addEventListener("test",null,{capture:!1,once:!1,passive:!1})}catch(t){e.supportsOptions=!1}}return!("object"!==(void 0===t?"undefined":_typeof(t))||!e.supportsOptions)&&t}(n)):t.attachEvent?t.attachEvent("on"+e,r):t["on"+e]=r,r};o.assignListener=g;o.appendListeners=function e(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return t.children=t.children||[],t.eventListeners&&t.eventListeners[r]&&(t.eventListeners[r]={listenerFunc:n,listenerArgs:o,listenerOptions:i}),t.children.map(function(t){return e(t,r,n,o,i)}),t};o.bindAllListeners=function e(t){return t.eventListeners&&Object.keys(t.eventListeners).length&&t.element.style&&i.mapObject(t.eventListeners,function(e,r){return g(r,t.element,function(r){return e.listenerFunc(r,t,e.listenerArgs)},e.listenerOptions)}),t.children=t.children.map(function(t){return e(t)}),t};var h=function(e){return e.eventListeners&&Object.keys(e.eventListeners).length&&e.element.style&&i.mapObject(e.eventListeners,function(t,r){return g(r,e.element,function(r){return t.listenerFunc(r,e,t.listenerArgs)},t.listenerOptions)}),e};o.bindListeners=h;var v=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem.body;return n.attributes[t]&&n.attributes[t]===r?n.children.reduce(function(n,o){return n.concat(e(t,r,o))},[]).concat([n]):n.children.reduce(function(n,o){return n.concat(e(t,r,o))},[])};o.getChildrenFromAttribute=v;var b=i.curry(v)("className");o.getChildrenByClass=b;var y=i.curry(v)("name");o.getChildrenByName=y;var j=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.documentItem.body;return Object.keys(n.parentItem).length?(n.attributes[t]||n[t]||!1)===r?e(t,r,n.parentItem).concat([n]):e(t,r,n.parentItem):[]},x=i.curry(j)("className");o.getParentsByClass=x;var O=i.curry(j)("name");o.getParentsByName=O;var q=i.curry(j)("tagName");o.getParentsByTagName=q;var C=function e(t){return Object.keys(t.parentItem).length?e(t.parentItem):t};o.getTopParentItem=C;o.renderHTML=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.documentItem;return i.mapObject(u.DOMItem(t),function(e){return e},t),t.element=t.element&&t.element.style?t.element:d(t).element,t.eventListeners=i.mapObject(t.eventListeners,function(e){return i.mergeObjects(e,{listenerFunc:p(e.listenerFunc,C(r))})}),t.parentItem=r.body||r,(t=h(f(t,r))).children.map(function(r){return e(r,t)}),t},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports=Object.assign(exports,o))}.call(window||base||{}),function(){var e=this||{},t=e.jDomObjectsMatrix||{},r={noConflict:function(){return e.jDomObjectsMatrix=t,r}};e.jDomObjectsMatrix=r;var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("objects-dom.js requires jDomCore"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("./objects-dom.js"):console.error("core-dom.js requires jDomObjects"));r.point=function(e,t){return{x:e,y:t,z:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0}};r.tile=function(){return{point:{}}};var i=function(e,t,r){for(var i=arguments.length,u=Array(i>4?i-4:0),a=4;a<i;a++)u[a-4]=arguments[a];var s,c,l,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o.DOMItem({tagName:"div",attributes:{className:"matrix"},children:n.buildArray((s=o).DOMItem.apply(s,[{axis:"z",tagName:"div",attributes:{className:"layer"},children:n.buildArray((c=o).DOMItem.apply(c,[{axis:"y",tagName:"div",attributes:{className:"row"},children:n.buildArray((l=o).DOMItem.apply(l,[{axis:"x",tagName:"div",attributes:{className:"column"}}].concat(u,[e])),t)}].concat(u)),r)}].concat(u)),d)})};r.matrix=i;r.square=function(e,t){return i(e,t,t)};r.cube=function(e,t){return i(e,t,t,t)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.jDomCoreMatrix||{},r={noConflict:function(){return e.jDomCoreMatrix=t,r}};e.jDomCoreMatrix=r;var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("core-matrix.js requires jDomCore"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("core-matrix.js requires jDomObjectsMatrix"));r.bindPointData=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.point(0,0,0);return n.mergeObjects(t,t.point?{point:n.cloneObject(r)}:{children:t.children.map(function(t,o){return e(t,n.mergeObjects(r,_defineProperty({},t.axis,o)))})})};var i=function(e,t){return o.point(e.x+t.x,e.y+t.y,e.z+t.z)};r.nextCell=i;var u=function(e,t){return o.point(t.x-e.x,t.y-e.y,t.z-e.z)};r.pointDifference=u;var a=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z};r.checkEqualPoints=a;var s=function(e){return!!Object.keys(n.filterObject(e,function(e){return e<0})).length};r.pointHasNegative=s;var c=function(e){return n.reduceObject(e,n.curry(n.getMaxOrMin)(!s(e)),0)};r.getHighAbsoluteCoord=c;var l=function(e,t){return Object.keys(e).filter(function(r){return e[r]===t})};r.getAxisOfCoord=l;var d=function(e){return l(e,c(e))};r.getHighAbsoluteCoordAxis=d;var m=function(e,t){return n.mergeObjects(o.point(0,0,0),_defineProperty({},""+d(u(e,t))[0],s(u(e,t))?-1:1))};r.pointDirection=m;r.randomStart=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.point(10,10,10);return o.point(n.randomInteger(r.x-(e-1)*t.x),n.randomInteger(r.y-(e-1)*t.y),n.randomInteger(r.z-(e-1)*t.z))};r.lineEndPoint=function(e,t,r){return o.point(e.x+r.x*(t-1),e.y+r.y*(t-1),e.z+r.z*(t-1))};var f=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a(t,r)?n.concat([t]):e(i(t,m(t,r)),r,n.concat([t]))};r.getPointsLine=f;var p=function(e){return e.reduce(function(e,t){return e.concat(f.apply(void 0,_toConsumableArray(t)))},[])};r.getPointsLines=p;var g=function(e,t,r,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return f(e,t).filter(function(e,t,r){return 0!==t&&t!==r.length-1||i}).reduce(function(e,t){return n.mergeObjects(e,_defineProperty({},""+!!o(t,r),[t]))},{true:[],false:[]})};r.testPointsBetween=g;r.getInBetween=function(e,t,r,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return n.mergeObjects({true:[],false:[]},g(e,t,r,o,i))};r.checkInBetween=function(e,t,r,n){return!(arguments.length>4&&void 0!==arguments[4]&&!arguments[4]||!n(e,r)&&!n(t,r))||!!g(e,t,r,n).true.length};r.getAxisLengths=function(e){return o.point(e.children[0].children[0].children.length,e.children[0].children.length,e.children.length)};r.randDirection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e[n.randomInteger(e.length)]:o.point(0,0,0)};var h=function(e,t){return!!(t.children[e.z]&&t.children[e.z].children[e.y]&&t.children[e.z].children[e.y].children[e.x]&&t.children[e.z].children[e.y].children[e.x].point)};r.checkValidPoint=h;r.getDOMItemFromPoint=function(e,t){return!!h(e,t)&&t.children[e.z].children[e.y].children[e.x]};r.getAllPoints=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.point?r.concat([t.point]):t.children.reduce(function(t,r){return t.concat(e(r,[]))},[])};r.adjacentPoints=function(e,t){return p([[o.point(-1,1,1),o.point(1,-1,-1)],[o.point(1,1,1),o.point(-1,1,-1)],[o.point(-1,-1,1),o.point(1,-1,1)],[o.point(1,0,0),o.point(1,1,-1)],[o.point(-1,1,0),o.point(1,1,0)]]).concat([o.point(0,0,1),o.point(1,0,0),o.point(-1,0,-1),o.point(0,0,-1)]).map(function(t){return i(e,t)}).filter(function(r){return h(i(e,r),t)})};r.adjacentEdgePoints=function(e,t){return[o.point(-1,0,0),o.point(1,0,0),o.point(0,-1,0),o.point(0,1,0),o.point(0,0,-1),o.point(0,0,1)].map(function(t){return i(e,t)}).filter(function(e){return h(e,t)})},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.jDomLayout||{},r={noConflict:function(){return e.jDomLayout=t,r}};e.jDomLayout=r;r.mainMenu=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{tagName:"div",attributes:{className:"main-menu"},children:[{tagName:"div",attributes:{className:"content"},children:[{tagName:"form",attributes:{name:"mainMenuForm",className:"main-menu-form"},eventListeners:{submit:{listenerFunc:"beginRound",listenerArgs:{},listenerOptions:!1}},children:[{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"human-players",innerText:"Humans"}},{tagName:"input",attributes:{id:"human-players",name:"human-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"div",attributes:{className:"form-group"},children:[{tagName:"label",attributes:{for:"robot-players",innerText:"Robots"}},{tagName:"input",attributes:{id:"robot-players",name:"robot-players",type:"number",value:0,min:0,max:100,required:""}}]},{tagName:"label",attributes:{for:"first-go-first",innerText:"First Player Starts"}},{tagName:"input",attributes:{id:"first-go-first",name:"first-go-first",type:"checkbox"}},{tagName:"input",attributes:{type:"submit",value:"Start"}}]}]}]}};r.boards=function(){return{tagName:"div",attributes:{className:"boards"},children:arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]}};r.finalScore=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{tagName:"div",attributes:{className:"final-scores"},children:[{tagName:"div",attributes:{className:"score-cards"},children:e.map(function(e){return{tagName:"div",attributes:{className:"score-card",innerHTML:"<strong>"+e.name+"</strong><hr><br></strong><strong>Status:</strong> "+Math.round(100*e.status)/100+"%, <strong>Sunk:</strong> "+e.attacks.sunk+"<br><strong>Hit:</strong> "+e.attacks.hit+" / <strong>Miss:</strong> "+e.attacks.miss+"<br><strong>Turns:</strong> "+e.turnCnt}}})},{tagName:"input",attributes:{type:"button",value:"Restart"},eventListeners:{click:{listenerFunc:"restart",listenerArgs:{},listenerOptions:!1}}}]}},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gamePieces||{},r={noConflict:function(){return e.gamePieces=t,r}};e.gamePieces=r;var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("game-pieces.js requires jDomCore"));var o=e.jDomObjectsMatrix;void 0===o&&("undefined"!=typeof require?o=require("./objects-matrix.js"):console.error("game-pieces.js requires jDomObjectsMatrix"));r.waterTile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.mergeObjects(function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1],{hasShip:!1,isHit:!1,eventListeners:{click:{listenerFunc:"attackListener",listenerArgs:{},listenerOptions:!1}}}}(e,t),o.tile())};r.shipTile=function(){return{hasShip:!0}};r.ship=function(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",status:100,parts:[]}};r.hitTile=function(){return{isHit:!0}};r.playerSet=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",isRobot:!1,status:100,turnCnt:0,attacker:!1,attacks:{hit:0,miss:0,sunk:0},board:e,shipFleet:[],playerStats:{},tagName:"div",attributes:{className:"player"},children:[e]}};r.playerStats=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{tagName:"div",attributes:{},children:[{tagName:"span",attributes:{innerHTML:"<strong>"+e.name+"</strong>: "+t}},{tagName:"ul",attributes:{},children:e.shipFleet.map(function(e){return{tagName:"li",attributes:{innerHTML:"<strong>"+e.name+" ("+e.parts.length+"):</strong> "+Math.round(100*e.status)/100+"%"}}})}]}},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameUtils||{},r={noConflict:function(){return e.gameUtils=t,r}};e.gameUtils=r;var n=e.jDomCoreMatrix;void 0===n&&("undefined"!=typeof require?n=require("./core-matrix.js"):console.error("functions.js requires jDomCoreMatrix"));r.checkIfShipCell=function(e,t){return t.children[e.z].children[e.y].children[e.x].hasShip};var o=function(e,t){return t.children[e.z].children[e.y].children[e.x].isHit};r.checkIfHitCell=o;r.getAllNonHitCells=function(e){return n.getAllPoints(e).filter(function(t){return!o(t,e)})};r.getAdjEdgeNonHitCells=function(e,t){return n.adjacentEdgePoints(e,t).filter(function(e){return!o(e,t)})};var i=function(e){return e.reduce(function(e,t){return t.status<=e.status?t:e})};r.getALowStatusItem=i;r.getLowStatusItems=function(e){return e.filter(function(t){return t.status<=i(e).status})};var u=function(e){return e.filter(function(e){return e.status<100&&e.status>0})};r.getBrokenItems=u;r.getBrokenShipsPlayers=function(e){return e.filter(function(e){return u(e.shipFleet).length})};r.numDamangedParts=function(e,t){return e-Math.ceil(t/100*e)};r.filterAdjacentPoints=function(e){return e.z%2==0&&(e.x%2==0&&e.y%2==0||e.x%2!=0&&e.y%2!=0)||e.z%2!=0&&(e.x%2!=0&&e.y%2==0||e.x%2==0&&e.y%2!=0)},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameActions||{},r={};e.gameActions=r,r.noConflict=function(){return e.gameActions=t,r};var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("actions.js requires jDomCore"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("./core-dom.js"):console.error("actions.js requires jDomCoreDom"));var i=e.jDomObjectsMatrix;void 0===i&&("undefined"!=typeof require?i=require("./objects-matrix.js"):console.error("actions.js requires jDomObjectsMatrix"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("actions.js requires jDomCoreMatrix"));var a=e.jDomLayout;void 0===a&&("undefined"!=typeof require?a=require("./layout.js"):console.error("actions.js requires jDomLayout"));var s=e.gamePieces;void 0===s&&("undefined"!=typeof require?s=require("./game-pieces.js"):console.error("actions.js requires gamePieces"));var c=e.gameUtils;void 0===c&&("undefined"!=typeof require?c=require("./functions.js"):console.error("actions.js requires gameUtils"));var l=function(e,t,i,u,a){var s,c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return s=n.mergeObjectsMutable(t.children[a].children[u].children[i],e),c?(r.attackFleet.isLocked=!0,n.queueTimeout(function(){return s.isHit&&(s.attributes.style.backgroundColor=s.hasShip?"red":"white"),s=o.updateElement(s),r.attackFleet.isLocked=!1,s},0)):(s.isHit&&(s.attributes.style.backgroundColor=s.hasShip?"red":"white"),s=o.updateElement(s)),s},d=n.curry(l)(n.mergeObjects(s.shipTile(),{attributes:{style:{backgroundColor:"#777"}}})),m=n.curry(l)(s.shipTile()),f=n.curry(l)(s.hitTile());r.setShip=function(e,t,r){return r?d(e,t.x,t.y,t.z):m(e,t.x,t.y,t.z)};var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round(100*e.status)/100+"%";return e.playerStats=o.updateElements(n.mergeObjects(e.playerStats,s.playerStats(e,t))),e};r.updatePlayer=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.attacker&&(t?++e.attacks.hit:++e.attacks.miss,i&&++e.attacks.sunk);return t||(e.attacker=!e.attacker,r.attackFleet.isLocked=!0,e.attacker?(n.queueTimeout(function(){return r.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{width:"17px",height:"17px"}}}))})})})},400),++e.turnCnt):n.queueTimeout(function(){return r.attackFleet.isLocked=!1,e.board.children.map(function(e){return e.children.map(function(e){return e.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{width:"35px",height:"35px"}}}))})})})},0)),n.queueTimeout(function(){return p(e,e.attacker?"ATTACKER":Math.round(100*e.status)/100+"%")},0).result||e};var g=function(e,t,i,u){var s=(u=u.filter(function(e){return e.status>0})).reduce(function(e,t){return e.attacker?e:t});if(s=r.updatePlayer(s,t,i),u.length<2)return n.queueTimeout(function(){return e=u[0],t=o.getTopParentItem(e),(r=e.parentItem.children).map(function(e){return p(e)}),e=p(e,"WINNER"),o.renderHTML(a.finalScore(r),t).children[0].children.map(function(e){return e.attributes.innerHTML}),[e];var e,t,r},200);var c,l,d,m=(c=s,l=u,(d=t)?c:r.updatePlayer(function e(t,r,n){var o=r.length>1&&n>=r.length-1?r[0]:r[++n];return o.status>0?o:e(t,r,n)}(c,l,l.indexOf(c)),d));return m.isRobot&&n.queueTimeout(r.computerAttack,0,m,u),u};r.attackFleet=function(e){r.attackFleet.isLocked=r.attackFleet.isLocked||!1;var t=o.getParentsByClass("player",e)[0],n=o.getParentsByClass("boards",e)[0].children;if(t.status<=0||t.attacker||r.attackFleet.isLocked)return n;var i=f(t.board,e.point.x,e.point.y,e.point.z,n.reduce(function(e,t){return e.attacker?e:t}).isRobot),a=!1,s=0;if(i.hasShip){var c=0;t.shipFleet.map(function(t){var r=t.parts.filter(function(r){return u.checkEqualPoints(r.point,e.point)&&(a=t),!r.isHit});return t.status=r.length/t.parts.length*100,c+=t.status,t}),t.status=c/t.shipFleet.length}return a&&(t=p(t,Math.round(100*t.status)/100+"%"),s=a.status<=0?a.parts.length:0),g(0,i.hasShip,s,n)},r.attackListener=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.attackFleet(t)};var h=function(e,t,r){return[n.queueTimeout(v,0,{targets:e,victim:r}),n.queueTimeout(v,200,{targets:e,target:t,victim:r})]},v=function(e){return e.victim.board.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"#333"}}}))}),e.targets.forEach(function(t){return o.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"#333"}}}))}),e.target||(e.victim.board.children.map(function(e){return o.updateElement(n.mergeObjects(e,{attributes:{style:{borderColor:"yellow"}}}))}),e.targets.forEach(function(t){return o.updateElement(n.mergeObjects(u.getDOMItemFromPoint(t,e.victim.board),{attributes:{style:{borderColor:"yellow"}}}))})),e};r.computerAttack=function(e,t){var o,a,s=(o=t.filter(function(e){return!e.attacker}),1===(a=c.getBrokenShipsPlayers(o).length?c.getBrokenShipsPlayers(o):c.getLowStatusItems(o)).length?a[0]:a[n.randomInteger(a.length)]);return r.attackFleet.isLocked=!1,r.attackFleet(function(e){var t=c.getBrokenItems(e.shipFleet),r=[];if(t.length){var o=t.filter(function(e){return c.numDamangedParts(e.parts.length,e.status)>1}),a=c.getALowStatusItem(o.length?o:t).parts.filter(function(t){return c.checkIfHitCell(t.point,e.board)});if(o.length){for(var s=0;s<a.length;++s){var l=u.getInBetween(a[0].point,a[s].point,e.board,c.checkIfHitCell,!1);if(l.false.length)return h(l.false,l.false[0],e),u.getDOMItemFromPoint(l.false[0],e.board)}var d=(u.pointDifference(a[0].point,a[1].point).x>0?[i.point(-1,0,0),i.point(1,0,0)]:[i.point(0,-1,0),i.point(0,1,0)]).map(function(e,t){return u.nextCell(a[(a.length-1)*t].point,e)}).filter(function(t){return u.checkValidPoint(t,e.board)}).filter(function(t){return!c.checkIfHitCell(t,e.board)}),m=d.reduce(function(t,r){return c.checkIfHitCell(t,e.board)?r:t});if(m)return h(d,m,e),u.getDOMItemFromPoint(m,e.board)}r=c.getAdjEdgeNonHitCells(a[0].point,e.board)}var f=r.length?r:c.getAllNonHitCells(e.board).filter(function(e){return c.filterAdjacentPoints(e)}),p=f[n.randomInteger(f.length)];return h(f,p,e),u.getDOMItemFromPoint(p,e.board)}(s))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameStart||{},r={noConflict:function(){return e.gameStart=t,r}};e.gameStart=r;var n=e.jDomCore;void 0===n&&("undefined"!=typeof require?n=require("./core.js"):console.error("start-functions.js requires jDomCore"));var o=e.jDomObjects;void 0===o&&("undefined"!=typeof require?o=require("./objects-dom.js"):console.error("start-functions.js requires jDomObjects"));var i=e.jDomCoreDom;void 0===i&&("undefined"!=typeof require?i=require("./core-dom.js"):console.error("start-functions.js requires jDomCoreDom"));var u=e.jDomCoreMatrix;void 0===u&&("undefined"!=typeof require?u=require("./core-matrix.js"):console.error("start-functions.js requires jDomCoreMatrix"));var a=e.jDomObjectsMatrix;void 0===a&&("undefined"!=typeof require?a=require("./objects-matrix.js"):console.error("start-functions.js requires jDomObjectsMatrix"));var s=e.jDomLayout;void 0===s&&("undefined"!=typeof require?s=require("./layout.js"):console.error("start-functions.js requires jDomLayout"));var c=e.gamePieces;void 0===c&&("undefined"!=typeof require?c=require("./game-pieces.js"):console.error("start-functions.js requires gamePieces"));var l=e.gameUtils;void 0===l&&("undefined"!=typeof require?l=require("./functions.js"):console.error("start-functions.js requires gameUtils"));var d=e.gameActions;void 0===d&&("undefined"!=typeof require?d=require("./actions.js"):console.error("start-functions.js requires gameActions"));var m=function(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(r=e,n=t,u.randDirection([a.point(1,0,0),a.point(0,1,0),a.point(0,0,1)].filter(function(e){return r[u.getAxisOfCoord(e,1)]>n})));return{start:u.randomStart(t,o,e),dir:o}},f=n.curry(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.map(function(e){var o;return function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.mergeObjects(c.ship(e.name),{parts:t.map(function(e){return d.setShip(r,e,o)})})}(e,(o=u).getPointsLine.apply(o,_toConsumableArray(function e(t,r,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m(n,r);return 0===u.getHighAbsoluteCoord(i.dir)?[a.point(0,0,0),a.point(0,0,0)]:(o=u).checkInBetween.apply(o,[i.start,u.lineEndPoint(i.start,r,i.dir)].concat([t,l.checkIfShipCell]))?e(t,r,n):[i.start,u.lineEndPoint(i.start,r,i.dir)]}(t,e.size,u.getAxisLengths(t)))),t,r)})})([{name:"Aircraft Carrier",size:5},{name:"Battleship",size:4},{name:"Submarine",size:3},{name:"Cruiser",size:3},{name:"Destroyer",size:2}]);r.beginRound=function(e,t){e.preventDefault();var r=i.getTopParentItem(t),o=parseInt(i.getChildrenByName("human-players",t)[0].element.value),l=parseInt(i.getChildrenByName("robot-players",t)[0].element.value);if(o<0||o>100||l<0||l>100)return!1;var m=i.getChildrenByName("first-go-first",t)[0].element.checked;0===(o=o<0?0:o)&&(l=l<2?2:l),1===o&&(l=l<1?1:l),i.removeChild(i.getChildrenByClass("main-menu",r.body)[0],r.body);var p=i.renderHTML(s.boards(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t<1&&r<1)return n;var o=c.playerSet({},"Player "+(n.length+1));return o.isRobot=t<=0,o.board=u.bindPointData(a.square(c.waterTile(o,n),10)),o.shipFleet=f(o.board,!1),o.playerStats=c.playerStats(o,Math.round(100*o.status)/100+"%"),o.children=[o.board,o.playerStats],n.push(o),e(--t,t<0?--r:r,n)}(o,l)),r).children,g=d.updatePlayer(m?p[0]:p[n.randomInteger(p.length)]);return g.isRobot&&d.computerAttack(g,p),!1};var p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.documentItem,t=e.body.children.length-1;t>=0;--t)i.removeChild(e.body.children[t],e.body);return i.renderHTML(s.mainMenu(),e),e};r.main=p,r.restart=function(e,t){return p(i.getTopParentItem(t))},"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{}),function(){var e=this||{},t=e.gameMain||{},r={noConflict:function(){return e.gameMain=t,r}};e.gameMain=r;var n=e.jDomObjects;void 0===n&&("undefined"!=typeof require?n=require("./objects-dom.js"):console.error("main.js requires jDomObjects"));var o=e.jDomCoreDom;void 0===o&&("undefined"!=typeof require?o=require("./core-dom.js"):console.error("main.js requires jDomCoreDom"));var i=e.gameActions;void 0===i&&("undefined"!=typeof require?i=require("./actions.js"):console.error("main.js requires gameActions"));var u=e.gameStart;void 0===u&&("undefined"!=typeof require?u=require("./start-functions.js"):console.error("main.js requires gameStart"));var a=u.main(n.documentDOMItem({beginRound:u.beginRound,attackListener:i.attackListener,restart:u.restart}));console.log(a),"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports=Object.assign(exports,r))}.call(window||base||{});
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: game/functions.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: game/functions.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'
// Game specific functions
;(function () {
  /**
   * Store a reference to this scope which will be Window if rendered via browser
   */
  let root = this || {}

  /**
   * Store reference to any pre-existing module of the same name
   * @type {gameUtils|*}
   */
  const previousGameUtils = root.gameUtils || {}

  /**
   * A reference to all functions to be used globally / exported
   * @typedef (Object) gameUtils
   * @module game/functions
   */
  const gameUtils = {}
  root.gameUtils = gameUtils

  /**
   * Return a reference to this library while preserving the original same-named library
   * @function noConflict
   * @returns {gameUtils}
   */
  gameUtils.noConflict = () => {
    root.gameUtils = previousGameUtils
    return gameUtils
  }

  /**
   * Verify availability of jDomMatrixCore
   * @typedef {*|module:jDom/matrix/core} jDomMatrixCore
   */
  let jDomMatrixCore = root.jDomMatrixCore

  /**
   * If jDomMatrixCore remains undefined, attempt to retrieve it as a module
   */
  if (typeof jDomMatrixCore === 'undefined') {
    if (typeof require !== 'undefined') {
      jDomMatrixCore = require('../jDom/matrix/core.js')
    } else {
      console.error('functions.js requires jDom/matrix/core')
    }
  }

  /**
   * Return the hasShip tile boolean at the specified point.
   * @function checkIfShipCell
   * @param pnt
   * @param matrix
   * @returns {boolean}
   */
  gameUtils.checkIfShipCell = (pnt, matrix) => matrix.children[pnt.z].children[pnt.y].children[pnt.x].hasShip

  /**
   * Return the isHit tile boolean at the specified point.
   * @function checkIfHitCell
   * @param pnt
   * @param matrix
   * @returns {boolean}
   */
  gameUtils.checkIfHitCell = (pnt, matrix) => matrix.children[pnt.z].children[pnt.y].children[pnt.x].isHit

  /**
   * Get all points which were not yet hit in the matrix.
   * @function getAllNonHitCells
   * @param matrix
   * @returns {Array}
   */
  gameUtils.getAllNonHitCells = matrix => jDomMatrixCore.getAllPoints(matrix).filter(p => !gameUtils.checkIfHitCell(p, matrix))

  /**
   * Get the points which have same edges with the provided point and are not hit.
   * @function getAdjEdgeNonHitCells
   * @param pnt
   * @param matrix
   * @returns {Array}
   */
  gameUtils.getAdjEdgeNonHitCells = (pnt, matrix) => jDomMatrixCore.adjacentEdgePoints(pnt, matrix).filter(p => !gameUtils.checkIfHitCell(p, matrix))

  /**
   * Given an array of items, return the item with the lowest status property (at the end of the array)
   * @function getALowStatusItem
   * @param items
   * @returns {Array}
   */
  gameUtils.getALowStatusItem = items => items.reduce((a, b) => b.status &lt;= a.status ? b : a)

  /**
   * Given an array of items, return all items which have the lowest status property
   * @function getLowStatusItems
   * @param items
   * @returns {Array}
   */
  gameUtils.getLowStatusItems = items => items.filter(i => i.status &lt;= gameUtils.getALowStatusItem(items).status)

  /**
   * Given an array of items, return all of the items which have a status less than 100, but more than 0
   * @function getBrokenItems
   * @param items
   * @returns {Array}
   */
  gameUtils.getBrokenItems = items => items.filter(i => i.status &lt; 100 &amp;&amp; i.status > 0)

  /**
   * Return all of the players which have broken ships.
   * @function getBrokenShipsPlayers
   * @param players
   * @returns {Array}
   */
  gameUtils.getBrokenShipsPlayers = players => players.filter(p => gameUtils.getBrokenItems(p.shipFleet).length)

  /**
   * Return the number of damaged ship parts. Performs math on the number of parts vs the damaged status.
   * @function numDamagedParts
   * @param total
   * @param status
   * @returns {number}
   */
  gameUtils.numDamagedParts = (total, status) => total - Math.ceil(((status / 100) * total))

  /**
   * Used to generate 'checkerboard' style attack by only attacking every non-edge-touching cell
   * @function filterAdjacentPoints
   * @param pnt
   * @returns {boolean}
   */
  gameUtils.filterAdjacentPoints = pnt => ((pnt.z % 2 === 0 &amp;&amp; ((pnt.x % 2 === 0 &amp;&amp; pnt.y % 2 === 0) || (pnt.x % 2 !== 0 &amp;&amp; pnt.y % 2 !== 0))) || (pnt.z % 2 !== 0 &amp;&amp; ((pnt.x % 2 !== 0 &amp;&amp; pnt.y % 2 === 0) || (pnt.x % 2 === 0 &amp;&amp; pnt.y % 2 !== 0))))

  /**
   * Either export all functions to be exported, or assign to the Window context
   */
  if (typeof exports !== 'undefined') {
    if (typeof module !== 'undefined' &amp;&amp; module.exports) {
      exports = module.exports = gameUtils
    }
    exports = Object.assign(exports, gameUtils)
  }
}).call(this || window || base || {}) // Use the external context to assign this, which will be Window if rendered via browser
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-game_actions.html">game/actions</a></li><li><a href="module-game_functions.html">game/functions</a></li><li><a href="module-game_layout.html">game/layout</a></li><li><a href="module-game_main.html">game/main</a></li><li><a href="module-game_pieces.html">game/pieces</a></li><li><a href="module-game_setup.html">game/setup</a></li><li><a href="module-jDom_core_core.html">jDom/core/core</a></li><li><a href="module-jDom_core_dom_core.html">jDom/core/dom/core</a></li><li><a href="module-jDom_core_dom_objects.html">jDom/core/dom/objects</a></li><li><a href="module-jDom_matrix_core.html">jDom/matrix/core</a></li><li><a href="module-jDom_matrix_objects.html">jDom/matrix/objects</a></li><li><a href="module-jDom_pseudoDom_objects.html">jDom/pseudoDom/objects</a></li></ul><h3>Classes</h3><ul><li><a href="PseudoElement.html">PseudoElement</a></li><li><a href="PseudoEvent.html">PseudoEvent</a></li><li><a href="PseudoEventListener.html">PseudoEventListener</a></li><li><a href="PseudoEventTarget.html">PseudoEventTarget</a></li><li><a href="PseudoHTMLDocument.html">PseudoHTMLDocument</a></li><li><a href="global.html#PseudoHTMLElement">PseudoHTMLElement</a></li><li><a href="PseudoNode.html">PseudoNode</a></li></ul><h3><a href="global.html">Global</a></h3>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Sun Jan 05 2020 21:07:39 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
